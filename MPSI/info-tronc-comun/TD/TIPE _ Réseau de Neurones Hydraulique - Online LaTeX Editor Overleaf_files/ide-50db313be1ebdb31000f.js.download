!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Frontend=t():(e.Frontend=e.Frontend||{},e.Frontend["pages/ide"]=t())}(self,(function(){return function(){"use strict";var e,t,n,r,i,o,a,l,u,c={63551:function(e,t,n){n.d(t,{aM:function(){return x},mx:function(){return w}});n(71372),n(15735),n(58188),n(28673),n(6886),n(60523),n(28399),n(18178),n(88233),n(34115),n(634),n(20796),n(32501),n(26936),n(27233),n(77950),n(21850);var r=n(2784),i=n(72045),o=n(63290),a=n(72526),l=n(28684),u=n(73720),c=n(73091),s=n(39493),f=n(96931),d=n(52322);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=50,y=function(){return(0,i.Z)()},b=1;function v(e,t){switch(t.type){case"INITIAL_FETCH_MESSAGES":return{...e,status:"pending",initialMessagesLoaded:!0};case"FETCH_MESSAGES":return{...e,status:"pending"};case"FETCH_MESSAGES_SUCCESS":return{...e,status:"idle",...(0,u.n)(e.messages,t.messages,e.uniqueMessageIds),lastTimestamp:t.messages[0]?t.messages[0].timestamp:null,atEnd:t.messages.length<h};case"SEND_MESSAGE":return{...e,...(0,u.q)(e.messages,{id:""+b++,user:t.user,content:t.content,timestamp:Date.now()},e.uniqueMessageIds)};case"RECEIVE_MESSAGE":return{...e,...(0,u.q)(e.messages,t.message,e.uniqueMessageIds),unreadMessageCount:e.unreadMessageCount+1};case"MARK_MESSAGES_AS_READ":return{...e,unreadMessageCount:0};case"CLEAR":return{...g};case"ERROR":return{...e,status:"error",error:t.error};default:throw new Error("Unknown action")}}var g={status:"idle",messages:[],initialMessagesLoaded:!1,lastTimestamp:null,atEnd:!1,unreadMessageCount:0,error:null,uniqueMessageIds:[]},j=(0,r.createContext)(void 0),x=function(e){var t=e.children,n=(0,r.useRef)();void 0===n.current&&(n.current=y());var i=(0,o.SE)(),u=(0,a.d)()._id,m=(0,s.l5)().chatIsOpen,b=(0,c.Z)(),x=b.hasFocus,w=b.flashTitle,S=b.stopFlashingTitle,E=p((0,r.useReducer)(v,g),2),C=E[0],I=E[1],k=(0,r.useMemo)((function(){function e(){if(!C.atEnd){var e={limit:String(h)};C.lastTimestamp&&(e.before=String(C.lastTimestamp));var t=new URLSearchParams(e),n="/project/".concat(u,"/messages?").concat(t.toString());(0,l.xA)(n).then((function(){I({type:"FETCH_MESSAGES_SUCCESS",messages:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reverse()})})).catch((function(e){I({type:"ERROR",error:e})}))}}return{loadInitialMessages:function(){C.initialMessagesLoaded||(I({type:"INITIAL_FETCH_MESSAGES"}),e())},loadMoreMessages:function(){I({type:"FETCH_MESSAGES"}),e()},reset:function(){I({type:"CLEAR"}),e()}}}),[u,C.atEnd,C.initialMessagesLoaded,C.lastTimestamp]),A=k.loadInitialMessages,O=k.loadMoreMessages,T=k.reset,R=(0,r.useCallback)((function(e){if(e){I({type:"SEND_MESSAGE",user:i,content:e});var t="/project/".concat(u,"/messages");(0,l.ty)(t,{body:{content:e,client_id:n.current}}).catch((function(e){I({type:"ERROR",error:e})}))}}),[u,i]),Z=(0,r.useCallback)((function(){I({type:"MARK_MESSAGES_AS_READ"})}),[]),N=(0,f.IM)().socket;(0,r.useEffect)((function(){if(N)return N.on("new-chat-message",e),function(){N&&N.removeListener("new-chat-message",e)};function e(e){e.clientId!==n.current&&I({type:"RECEIVE_MESSAGE",message:e})}}),[N]),(0,r.useEffect)((function(){x&&(S(),m&&Z()),!x&&C.unreadMessageCount>0&&w("New Message")}),[x,m,C.unreadMessageCount,w,S,Z]);var P=(0,r.useMemo)((function(){return{status:C.status,messages:C.messages,initialMessagesLoaded:C.initialMessagesLoaded,atEnd:C.atEnd,unreadMessageCount:C.unreadMessageCount,loadInitialMessages:A,loadMoreMessages:O,reset:T,sendMessage:R,markMessagesAsRead:Z,error:C.error}}),[A,O,Z,T,R,C.atEnd,C.error,C.initialMessagesLoaded,C.messages,C.status,C.unreadMessageCount]);return(0,d.jsx)(j.Provider,{value:P,children:t})};function w(){var e=(0,r.useContext)(j);if(!e)throw new Error("useChatContext is only available inside ChatProvider");return e}},50641:function(e,t,n){n.d(t,{Hc:function(){return s},ou:function(){return c}});n(71372);var r=n(2784),i=n(77241),o=n(45564),a=n(51261),l=n(52322),u=(0,r.createContext)(void 0),c=function(e){var t=e.children,n=(0,i.Z)(),c=n.compiler,s=n.setCompiler,f=n.imageName,d=n.setImageName,p=n.rootDocId,m=n.setRootDocId,h=n.spellCheckLanguage,y=n.setSpellCheckLanguage,b=(0,o.Z)(),v=b.autoComplete,g=b.setAutoComplete,j=b.autoPairDelimiters,x=b.setAutoPairDelimiters,w=b.syntaxValidation,S=b.setSyntaxValidation,E=b.editorTheme,C=b.setEditorTheme,I=b.overallTheme,k=b.setOverallTheme,A=b.mode,O=b.setMode,T=b.fontSize,R=b.setFontSize,Z=b.fontFamily,N=b.setFontFamily,P=b.lineHeight,F=b.setLineHeight,L=b.pdfViewer,M=b.setPdfViewer;(0,a.Z)();var D=(0,r.useMemo)((function(){return{compiler:c,setCompiler:s,imageName:f,setImageName:d,rootDocId:p,setRootDocId:m,spellCheckLanguage:h,setSpellCheckLanguage:y,autoComplete:v,setAutoComplete:g,autoPairDelimiters:j,setAutoPairDelimiters:x,syntaxValidation:w,setSyntaxValidation:S,editorTheme:E,setEditorTheme:C,overallTheme:I,setOverallTheme:k,mode:A,setMode:O,fontSize:T,setFontSize:R,fontFamily:Z,setFontFamily:N,lineHeight:P,setLineHeight:F,pdfViewer:L,setPdfViewer:M}}),[c,s,f,d,p,m,h,y,v,g,j,x,w,S,E,C,I,k,A,O,T,R,Z,N,P,F,L,M]);return(0,l.jsx)(u.Provider,{value:D,children:t})};function s(){var e=(0,r.useContext)(u);if(!e)throw new Error("useProjectSettingsContext is only available inside ProjectSettingsProvider");return e}},36190:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(13980),i=n.n(r),o=n(86186),a=n(52322);function l(e){var t=e.children;return(0,a.jsx)(o.Z,{bsStyle:"danger",children:t})}l.propTypes={children:i().any.isRequired}},37087:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(13980),i=n.n(r),o=n(75234),a=n(28684),l=(n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850),n(71372),n(2784)),u=n(72526),c=n(46267);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(){var e=(0,o.$G)().t,t=(0,u.d)()._id,n=s((0,l.useState)(10),2),r=n[0],i=n[1],a=(0,c.T)();return(0,l.useEffect)((function(){i(10);var e=window.setInterval((function(){i((function(n){return 0===n?(window.clearInterval(e),a.assign("/login?redir=/project/".concat(t)),0):n-1}))}),1e3);return function(){window.clearInterval(e)}}),[t,a]),e("session_expired_redirecting_to_login",{seconds:r})}var p=n(17776),m=n(36190),h=n(52322);function y(e){var t=e.error,n=(0,o.$G)().t;if("string"==typeof t)switch(t){case"name-exists":return(0,h.jsx)(m.Z,{children:n("file_already_exists")});case"too-many-files":return(0,h.jsx)(m.Z,{children:n("project_has_too_many_files")});case"remote-service-error":return(0,h.jsx)(m.Z,{children:n("remote_service_error")});case"folder_not_found":return(0,h.jsx)(m.Z,{children:n("the_target_folder_could_not_be_found")});case"invalid_filename":return(0,h.jsx)(m.Z,{children:n("invalid_filename",{nameLimit:150})});case"rate-limit-hit":return(0,h.jsx)(m.Z,{children:n("too_many_files_uploaded_throttled_short_period")});case"not-logged-in":return(0,h.jsx)(m.Z,{children:(0,h.jsx)(d,{})});case"linked-project-compile-error":return(0,h.jsx)(m.Z,{children:n("generic_linked_file_compile_error")});default:return(0,h.jsx)(m.Z,{children:n("generic_something_went_wrong")})}switch(t.constructor){case a.kp:var r,i,l=null===(r=t.data)||void 0===r?void 0:r.message;if(l)return(0,h.jsx)(m.Z,{children:l.text||l});switch(null===(i=t.response)||void 0===i?void 0:i.status){case 400:return(0,h.jsx)(m.Z,{children:n("invalid_request")});case 403:return(0,h.jsx)(m.Z,{children:n("session_error")});case 429:return(0,h.jsx)(m.Z,{children:n("too_many_attempts")});default:return(0,h.jsx)(m.Z,{children:n("something_went_wrong_server")})}case p.w4:case p.I9:case p.Cr:return null;default:return(0,h.jsx)(m.Z,{children:n("generic_something_went_wrong")})}}y.propTypes={error:i().oneOfType([i().string,i().object]).isRequired}},27715:function(e,t,n){n.d(t,{P:function(){return E},Z:function(){return C}});n(71372),n(27233),n(28673),n(26936),n(43450),n(77950),n(21850),n(95342),n(58188),n(49228),n(1939),n(73439),n(18178),n(34115),n(634),n(20796),n(15735),n(6886),n(32501),n(88233);var r=n(2784);function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){return e.reduce((async function(e,n){var r=await e,o=await t(n);return[].concat(i(r),[o])}),Promise.resolve([]))}var l=n(79401),u=n(38113),c=n(86994),s=n(61416),f=n(72526),d=n(84050),p=n(47481),m=n(61985),h=n(17776),y=n(52322);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=(0,r.createContext)(void 0),j=function(e){return e.START_RENAME="START_RENAME",e.START_DELETE="START_DELETE",e.DELETING="DELETING",e.START_CREATE_FILE="START_CREATE_FILE",e.START_CREATE_FOLDER="START_CREATE_FOLDER",e.CREATING_FILE="CREATING_FILE",e.CREATING_FOLDER="CREATING_FOLDER",e.MOVING="MOVING",e.CANCEL="CANCEL",e.CLEAR="CLEAR",e.ERROR="ERROR",e}(j||{}),x={isDeleting:!1,isRenaming:!1,isCreatingFile:!1,isCreatingFolder:!1,isMoving:!1,inFlight:!1,actionedEntities:null,newFileCreateMode:null,error:null};function w(e){return e}function S(e,t){switch(t.type){case j.START_RENAME:return{...x,isRenaming:!0};case j.START_DELETE:return{...x,isDeleting:!0,actionedEntities:t.actionedEntities};case j.START_CREATE_FILE:return{...x,isCreatingFile:!0,newFileCreateMode:t.newFileCreateMode};case j.START_CREATE_FOLDER:return{...x,isCreatingFolder:!0};case j.CREATING_FILE:return{...x,isCreatingFile:!0,newFileCreateMode:e.newFileCreateMode,inFlight:!0};case j.CREATING_FOLDER:return{...x,isCreatingFolder:!0,inFlight:!0};case j.DELETING:return{...x,isDeleting:!0,inFlight:!0,actionedEntities:e.actionedEntities};case j.MOVING:return{...x,isMoving:!0,inFlight:!0};case j.CLEAR:return{...x};case j.CANCEL:return e.inFlight?e:{...x};case j.ERROR:return{...e,inFlight:!1,error:t.error};default:throw new Error("Unknown user action type: ".concat(t.type))}}var E=function(e){var t=e.reindexReferences,n=e.children,i=(0,f.d)()._id,o=(0,d._i)().permissionsLevel,v=b((0,r.useReducer)("readOnly"===o?w:S,x),2),E=v[0],C=v[1],I=(0,p.O)(),k=I.fileTreeData,A=I.dispatchRename,O=I.dispatchMove,T=(0,m.nF)(),R=T.selectedEntityIds,Z=T.isRootFolderSelected,N=b((0,r.useState)(null),2),P=N[0],F=N[1],L=(0,r.useCallback)((function(){C({type:j.START_RENAME})}),[]),M=(0,r.useCallback)((function(e){var t=Array.from(R)[0],n=(0,u.we)(k,t),r=n.entity.name;if(e===r)return C({type:j.CLEAR});var o=function(e,t,n){if(!(0,s.AG)(n))return new h.I9;if(!(0,c.j)(e,t.parentFolderId,n))return new h.w4;var r=1===t.path.length,i="folder"===t.type;if(r&&!i&&(0,s.tQ)(n))return new h.Cr}(k,n,e);return o?C({type:j.ERROR,error:o}):(C({type:j.CLEAR}),A(t,e),(0,l.g6)(i,n.type,n.entity._id,e).catch((function(e){A(t,r),C({type:j.ERROR,error:e})})))}),[A,k,i,R]),D=(0,r.useCallback)((function(e,t){return!(0,c.j)(k,e,t)}),[k]),_=(0,r.useCallback)((function(){var e=Array.from(R).map((function(e){return(0,u.we)(k,e).entity}));C({type:j.START_DELETE,actionedEntities:e})}),[k,R]),B=(0,r.useCallback)((function(){C({type:j.DELETING});var e=!1;return a(Array.from(R),(function(t){var n=(0,u.we)(k,t);return e=e||/\.bib$/.test(n.entity.name),(0,l.c4)(i,n.type,n.entity._id).catch((function(e){if(404!==e.info.statusCode)throw e}))})).then((function(){e&&t(),C({type:j.CLEAR})})).catch((function(e){C({type:j.ERROR,error:e})}))}),[k,i,R,t]),H=(0,r.useCallback)((function(e,t){C({type:j.MOVING});var n=Array.from(t).map((function(e){return(0,u.we)(k,e)})).filter((function(n){return n.parentFolderId!==e&&!t.has(n.parentFolderId)})),r=e===k._id,o=n.map((function(t){return function(e,t,n,r){if(!(0,c.j)(e,t,n.entity.name)){var i=new h.d9;return i.entityName=n.entity.name,i}var o="folder"===n.type;if(r&&!o&&(0,s.tQ)(n.entity.name))return new h.Cr}(k,e,t,r)})).find((function(e){return e}));if(o)return C({type:j.ERROR,error:o});var f={},d=!1;return n.forEach((function(t){f[t.entity._id]=t.parentFolderId,O(t.entity._id,e)})),a(n,(async function(t){try{await(0,l.zG)(i,t.type,t.entity._id,e)}catch(e){d=!0,O(t.entity._id,f[t.entity._id]),C({type:j.ERROR,error:e})}})).then((function(){d||C({type:j.CLEAR})}))}),[O,k,i]),z=(0,r.useCallback)((function(){C({type:j.START_CREATE_FOLDER})}),[]),U=(0,r.useMemo)((function(){return function(e,t,n){if(n)return e._id;var r=Array.from(t)[0];if(!r)return e._id;var i=(0,u.Z7)(e,r);if(!i)return e._id;return"folder"===i.type?i.entity._id:i.parentFolderId}(k,R,Z)}),[k,R,Z]),J=(0,r.useMemo)((function(){if(1===R.size){var e,t=b(R,1)[0],n=(0,u.Z7)(k,t);return null==n||null===(e=n.entity)||void 0===e?void 0:e.name}return null}),[k,R]),G=(0,r.useCallback)((function(e){var t=function(e,t,n){if(!(0,s.AG)(n.name))return new h.I9;if(!(0,c.j)(e,t,n.name))return new h.w4;var r=t===e._id,i="folder"===n.endpoint;if(r&&!i&&(0,s.tQ)(n.name))return new h.Cr}(k,U,e);return t?Promise.reject(t):(0,l.Xe)(i,U,e)}),[k,U,i]),q=(0,r.useCallback)((function(e){return C({type:j.CREATING_FOLDER}),G({endpoint:"folder",name:e}).then((function(){C({type:j.CLEAR})})).catch((function(e){C({type:j.ERROR,error:e})}))}),[G]),X=(0,r.useCallback)((function(e){C({type:j.START_CREATE_FILE,newFileCreateMode:e})}),[]),V=(0,r.useCallback)((function(){X("doc")}),[X]),K=(0,r.useCallback)((function(){X("upload")}),[X]),W=(0,r.useCallback)((function(e){return C({type:j.CREATING_FILE}),G(e).then((function(){C({type:j.CLEAR})})).catch((function(e){C({type:j.ERROR,error:e})}))}),[G]),Y=(0,r.useCallback)((function(e){return e.endpoint="doc",W(e)}),[W]),Q=(0,r.useCallback)((function(e){return e.endpoint="linked_file",W(e)}),[W]),$=(0,r.useCallback)((function(){C({type:j.CANCEL})}),[]);(0,r.useEffect)((function(){function e(e){C({type:j.START_CREATE_FILE,newFileCreateMode:e.detail.mode})}return window.addEventListener("file-tree.start-creating",e),function(){window.removeEventListener("file-tree.start-creating",e)}}),[]);var ee=(0,r.useMemo)((function(){if(1===R.size){var e=b(R,1)[0],t=(0,u.Z7)(k,e);if("fileRef"===(null==t?void 0:t.type))return"/project/".concat(i,"/file/").concat(e);if("doc"===(null==t?void 0:t.type))return"/project/".concat(i,"/doc/").concat(e,"/download")}}),[k,i,R]),te={canDelete:R.size>0&&!Z,canRename:1===R.size&&!Z,canCreate:R.size<2,...E,parentFolderId:U,selectedFileName:J,isDuplicate:D,startRenaming:L,finishRenaming:M,startDeleting:_,finishDeleting:B,finishMoving:H,startCreatingFile:X,startCreatingFolder:z,finishCreatingFolder:q,startCreatingDocOrFile:V,startUploadingDocOrFile:K,finishCreatingDoc:Y,finishCreatingLinkedFile:Q,cancel:$,droppedFiles:P,setDroppedFiles:F,downloadPath:ee};return(0,y.jsx)(g.Provider,{value:te,children:n})};function C(){var e=(0,r.useContext)(g);if(!e)throw new Error("useFileTreeActionable is only available inside FileTreeActionableProvider");return e}},64733:function(e,t,n){n.d(t,{Q:function(){return c},e:function(){return u}});n(71372),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850);var r=n(2784),i=n(52322);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=(0,r.createContext)(void 0);function u(){var e=(0,r.useContext)(l);if(!e)throw new Error("useFileTreeMainContext is only available inside FileTreeMainProvider");return e}var c=function(e){var t=e.refProviders,n=e.reindexReferences,a=e.setRefProviderEnabled,u=e.setStartedFreeTrial,c=e.children,s=o((0,r.useState)(null),2),f=s[0],d=s[1];return(0,i.jsx)(l.Provider,{value:{refProviders:t,reindexReferences:n,setRefProviderEnabled:a,setStartedFreeTrial:u,contextMenuCoords:f,setContextMenuCoords:d},children:c})}},61985:function(e,t,n){n.d(t,{mI:function(){return O},nF:function(){return T},oJ:function(){return k}});n(34115),n(634),n(20796),n(32501),n(88233),n(15735),n(58188),n(93244),n(28673),n(6886),n(71372),n(1939),n(95342),n(43450),n(27233),n(77950),n(21850),n(26936),n(43430),n(18178);var r,i=n(2784),o=n(12524),a=n.n(o),l=n(76635),u=n.n(l),c=n(38113),s=n(47481),f=n(72526),d=n(84050),p=n(39493),m=n(18977),h=n(44694),y=n(64733),b=n(50325),v=n(52322);function g(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=(0,i.createContext)(void 0),E=function(e){return e.SELECT="SELECT",e.MULTI_SELECT="MULTI_SELECT",e.UNSELECT="UNSELECT",e}(E||{});function C(e,t){switch(t.type){case E.SELECT:return new Set(Array.isArray(t.id)?t.id:[t.id]);case E.MULTI_SELECT:var n=new Set(e);return n.has(t.id)?n.size>1&&n.delete(t.id):n.add(t.id),n;case E.UNSELECT:var r=new Set(e);return r.delete(t.id),r;default:throw new Error("Unknown selectable action type: ".concat(t.type))}}function I(e,t){switch(t.type){case E.SELECT:return new Set([t.id]);case E.MULTI_SELECT:case E.UNSELECT:return e;default:throw new Error("Unknown selectable action type: ".concat(t.type))}}var k=function(e){var t=e.onSelect,n=e.children,r=(0,f.d)(),o=r._id,a=r.rootDocId,l=(0,d._i)().permissionsLevel,p=j((0,m.Z)("doc.open_id.".concat(o),a),1)[0],y=(0,s.O)(),b=y.fileTreeData,g=y.setSelectedEntities,x=j((0,i.useState)(!1),2),w=x[0],k=x[1],A=j((0,i.useReducer)("readOnly"===l?I:C,null,(function(){return p&&(0,c.Z7)(b,p)?new Set([p]):new Set})),2),O=A[0],T=A[1],R=j((0,i.useState)(new Set),2),Z=R[0],N=R[1];(0,i.useEffect)((function(){var e=new Set;O.forEach((function(t){var n=(0,c.Z7)(b,t);n&&n.path.forEach((function(t){return e.add(t)}))})),N(e)}),[b,O]);var P=(0,h.Z)(O);(0,i.useEffect)((function(){if(!u().isEqual(O,P)){var e=Array.from(O).map((function(e){return(0,c.Z7)(b,e)})).filter(Boolean);t(e),g(e)}}),[b,O,P,t,g]),(0,i.useEffect)((function(){function e(e){var t=(0,c.Z7)(b,e.detail);t&&T({type:E.SELECT,id:t.entity._id})}return window.addEventListener("editor.openDoc",e),function(){return window.removeEventListener("editor.openDoc",e)}}),[b]);var F=(0,i.useCallback)((function(e){T({type:E.SELECT,id:e})}),[]),L=(0,i.useCallback)((function(e){T({type:E.UNSELECT,id:e})}),[]),M=(0,i.useCallback)((function(e,t){var n=t?E.MULTI_SELECT:E.SELECT;T({type:n,id:e})}),[]),D={selectedEntityIds:O,selectedEntityParentIds:Z,select:F,unselect:L,selectOrMultiSelectEntity:M,isRootFolderSelected:w,setIsRootFolderSelected:k};return(0,v.jsx)(S.Provider,{value:D,children:n})},A=/Mac/.test(null===(r=window.navigator)||void 0===r?void 0:r.platform);function O(e,t){var n=(0,p.l5)(),r=n.view,o=n.setView,l=(0,y.e)().setContextMenuCoords,u=(0,s.O)().fileTreeData,f=T(),d=f.selectedEntityIds,m=f.selectOrMultiSelectEntity,h=f.isRootFolderSelected,b=f.setIsRootFolderSelected,v=d.has(e),g=(0,i.useCallback)((function(e){var t=[],n=!1;for(var r of Z(u))if(r===e){if(t.push(r),n)break;n=!0}else if(d.has(r)){if(t.push(r),n)break;n=!0}else n&&t.push(r);return t}),[u,d]),j=(0,i.useCallback)((function(){for(var e of d){var t=(0,c.Z7)(u,e);if("doc"===t.type)return"editor";if("fileRef"===t.type)return"file";if("folder"===t.type)return r}return null}),[u,d,r]),x=(0,i.useCallback)((function(n){n.stopPropagation();var r=!h&&(A?n.metaKey:n.ctrlKey);b(!1),n.shiftKey?m(g(e)):m(e,r),"file"===t?o("file"):"doc"===t?o("editor"):"folder"===t&&o(j())}),[e,h,b,m,o,t,g,j]),w=(0,i.useCallback)((function(e){x(e),e.ctrlKey||e.metaKey||l(null)}),[x,l]),S=(0,i.useCallback)((function(e){"Enter"!==e.key&&" "!==e.key||x(e)}),[x]),E=(0,i.useCallback)((function(t){d.has(e)||x(t)}),[e,x,d]),C=!h&&v&&"pdf"!==r;return{isSelected:v,props:(0,i.useMemo)((function(){return{className:a()({selected:C}),"aria-selected":C,onClick:w,onContextMenu:E,onKeyPress:S}}),[w,E,S,C])}}function T(){var e=(0,i.useContext)(S);if(!e)throw new Error("useFileTreeSelectable is only available inside FileTreeSelectableProvider");return e}var R=function(e,t){return b.W.compare(e.name,t.name)};function*Z(e){yield e._id;var t=g(e.folders).sort(R);for(var n of t)for(var r of Z(n))yield r;var i=[].concat(g(e.docs),g(e.fileRefs)).sort(R);for(var o of i)yield o._id}},17776:function(e,t,n){n.d(t,{Cr:function(){return h},I9:function(){return m},d9:function(){return b},w4:function(){return y}});n(71372),n(96928),n(58188),n(88233),n(61229),n(92215),n(15735),n(79321),n(28673),n(6886),n(9575),n(96264),n(34115),n(634),n(71245),n(20796);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:String(t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function c(e){var t=f();return function(){var n,i=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function s(e){var t="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(f())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&d(i,n.prototype),i}(e,arguments,p(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,e)},s(e)}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var m=function(e){u(InvalidFilenameError,e);var t=c(InvalidFilenameError);function InvalidFilenameError(){return l(this,InvalidFilenameError),t.call(this,"invalid filename")}return o(InvalidFilenameError)}(s(Error)),h=function(e){u(BlockedFilenameError,e);var t=c(BlockedFilenameError);function BlockedFilenameError(){return l(this,BlockedFilenameError),t.call(this,"blocked filename")}return o(BlockedFilenameError)}(s(Error)),y=function(e){u(DuplicateFilenameError,e);var t=c(DuplicateFilenameError);function DuplicateFilenameError(){return l(this,DuplicateFilenameError),t.call(this,"duplicate filename")}return o(DuplicateFilenameError)}(s(Error)),b=function(e){u(DuplicateFilenameMoveError,e);var t=c(DuplicateFilenameMoveError);function DuplicateFilenameMoveError(){return l(this,DuplicateFilenameMoveError),t.call(this,"duplicate filename on move")}return o(DuplicateFilenameMoveError)}(s(Error))},15270:function(e,t,n){n.d(t,{t:function(){return s}});n(58188),n(73439),n(21515),n(43430),n(34115),n(634),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850),n(71372);var r=n(2784),i=n(28684),o=n(50325),a=n(30286);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=function(e,t){return o.W.compare(e.path,t.path)};function s(e){var t=l((0,r.useState)(!1),2),n=t[0],o=t[1],u=l((0,r.useState)(null),2),s=u[0],f=u[1],d=l((0,r.useState)(!1),2),p=d[0],m=d[1],h=(0,a.Z)().signal;return(0,r.useEffect)((function(){e&&(o(!0),m(!1),f(null),(0,i.xA)("/project/".concat(e,"/entities"),{signal:h}).then((function(e){f(e.entities.sort(c))})).catch((function(e){return m(e)})).finally((function(){return o(!1)})))}),[e,h]),{loading:n,data:s,error:p}}},25137:function(e,t,n){n.d(t,{h:function(){return s}});n(58188),n(73439),n(21515),n(95342),n(77950),n(74069),n(1939),n(43430),n(34115),n(634),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(21850),n(71372);var r=n(2784),i=n(28684),o=n(50325),a=n(30286);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=function(e,t){return o.W.compare(e.path,t.path)};function s(e){var t=l((0,r.useState)(!1),2),n=t[0],o=t[1],u=l((0,r.useState)(null),2),s=u[0],f=u[1],d=l((0,r.useState)(!1),2),p=d[0],m=d[1],h=(0,a.Z)().signal;return(0,r.useEffect)((function(){e&&(o(!0),m(!1),f(null),(0,i.ty)("/project/".concat(e,"/compile"),{body:{check:"silent",draft:!1,incrementalCompilesEnabled:!1},signal:h}).then((function(e){if("success"===e.status){var t=e.outputFiles.filter((function(e){return e.path.match(/.*\.(pdf|png|jpeg|jpg|gif)/)}));e.outputFiles.forEach((function(t){t.clsiServerId=e.clsiServerId,t.compileGroup=e.compileGroup})),f(t.sort(c))}else m("linked-project-compile-error")})).catch((function(e){return m(e)})).finally((function(){return o(!1)})))}),[e,h]),{loading:n,data:s,error:p}}},87983:function(e,t,n){n.d(t,{Z:function(){return s}});n(26936),n(58188),n(73439),n(21515),n(43430),n(34115),n(634),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(27233),n(77950),n(21850),n(71372);var r=n(2784),i=n(28684),o=n(50325),a=n(30286);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=function(e,t){return o.W.compare(e.name,t.name)};function s(){var e=l((0,r.useState)(!0),2),t=e[0],n=e[1],o=l((0,r.useState)(null),2),u=o[0],s=o[1],f=l((0,r.useState)(!1),2),d=f[0],p=f[1],m=(0,a.Z)().signal;return(0,r.useEffect)((function(){(0,i.xA)("/user/projects",{signal:m}).then((function(e){s(e.projects.sort(c))})).catch((function(e){return p(e)})).finally((function(){return n(!1)}))}),[m]),{loading:t,data:u,error:d}}},50325:function(e,t,n){n.d(t,{W:function(){return r}});var r=new Intl.Collator("en",{numeric:!0,sensitivity:"variant",caseFirst:"upper"})},38113:function(e,t,n){n.d(t,{Z7:function(){return c},gl:function(){return a},mz:function(){return u},we:function(){return o}});n(15735),n(58188),n(93244),n(28673),n(6886),n(1939),n(18178);var r=n(91601),i=n.n(r);function o(e,t){var n=c(e,t);if(n)return n;throw new(i())("Entity not found in tree",{entityId:t})}function a(e,t){var n=new Set;return t.forEach((function(t){n.add(o(e,t))})),n}function l(e){var t=new Set([e._id]);for(var n in e.folders){l(e.folders[n]).forEach((function(e){t.add(e)}))}return t}function u(e){var t=new Set;return e.forEach((function(e){l(e).forEach((function(e){t.add(e)}))})),t}function c(e,t,n){for(var r in n||(n=[e._id]),e.docs){var i=e.docs[r];if(i._id===t)return{entity:i,type:"doc",parent:e.docs,parentFolderId:e._id,path:n,index:r}}for(var o in e.fileRefs){var a=e.fileRefs[o];if(a._id===t)return{entity:a,type:"fileRef",parent:e.fileRefs,parentFolderId:e._id,path:n,index:o}}for(var l in e.folders){var u=e.folders[l];if(u._id===t)return{entity:u,type:"folder",parent:e.folders,parentFolderId:e._id,path:n,index:l};var s=c(u,t,n.concat(u._id));if(s)return s}return null}},65487:function(e,t,n){n.d(t,{Z:function(){return r}});n(39529);function r(e){var t=e.split(".").pop();return t=t?t.toLowerCase():t,["png","pdf","jpg","jpeg","gif"].includes(t)?"image":["csv","xls","xlsx"].includes(t)?"table":["py","r"].includes(t)?"file-text":["bib"].includes(t)?"book":"file"}},47897:function(e,t,n){n.d(t,{s:function(){return o}});n(77950),n(74069);var r,i=n(87754),o=function(e,t){return r||(r=new i.m8(window.ExposedSettings.fileIgnorePattern,{nocase:!0,dot:!0})),!!e&&(!t||!r.match(t+"/"+e))}},86994:function(e,t,n){n.d(t,{j:function(){return i},z:function(){return o}});n(49228),n(58188),n(26936);var r=n(38113);function i(e,t,n){return!o(e,t,n)}function o(e,t,n){return e._id!==t&&(e=(0,r.Z7)(e,t).entity),e.docs.find((function(e){return e.name===n}))||e.fileRefs.find((function(e){return e.name===n}))||e.folders.find((function(e){return e.name===n}))}},61416:function(e,t,n){n.d(t,{AG:function(){return l},tQ:function(){return u}});n(17368),n(24471),n(77950),n(51172),n(88233),n(85940),n(16781),n(74069),n(21850),n(28673),n(15735),n(6886),n(27233);var r=new RegExp("[\\/\\\\\\*\\u0000-\\u001F\\u007F\\u0080-\\u009F\\uD800-\\uDFFF]","g"),i=new RegExp("(^\\.$)|(^\\.\\.$)|(^\\s+)|(\\s+$)","g"),o=new RegExp("^(prototype|constructor|toString|toLocaleString|valueOf|hasOwnProperty|isPrototypeOf|propertyIsEnumerable|__defineGetter__|__lookupGetter__|__defineSetter__|__lookupSetter__|__proto__)$"),a=1024;function l(e){return(t=e).length>0&&t.length<=a&&!e.match(r)&&!e.match(i);var t}function u(e){return o.test(e)}},79401:function(e,t,n){n.d(t,{Xe:function(){return c},c4:function(){return l},g6:function(){return a},zG:function(){return u}});n(18178),n(34769),n(34115);var r=n(28684),i=["endpoint"];function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e,t,n,i){return(0,r.ty)("/project/".concat(e,"/").concat(s(t),"/").concat(n,"/rename"),{body:{name:i}})}function l(e,t,n){return(0,r.K$)("/project/".concat(e,"/").concat(s(t),"/").concat(n))}function u(e,t,n,i){return(0,r.ty)("/project/".concat(e,"/").concat(s(t),"/").concat(n,"/move"),{body:{folder_id:i}})}function c(e,t,n){var a=n.endpoint,l=o(n,i);return(0,r.ty)("/project/".concat(e,"/").concat(a),{body:{parent_folder_id:t,...l}})}function s(e){return"fileRef"===e?"file":e}},7242:function(e,t,n){n.d(t,{h:function(){return b},z:function(){return v}});n(96708),n(26936),n(71372),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(27233),n(77950),n(21850);var r=n(2784),i=n(72526),o=n(8596),a=n(91661),l=n(48910),u=n(37246),c=n(45177),s=n(32755),f=n(96227),d=n(32687),p=n(52322);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=(0,r.createContext)(void 0),b=function(e){var t=e.children,n=(0,i.d)(),h=n.rootDocId,b=n.owner,v=(0,o.I)(),g=v.eventEmitter,j=v.projectJoined,x=(0,a.QA)(),w=x.openDocId,S=x.currentDocumentId,E=x.openInitialDoc,C=(0,l.f)().selectEntity,I=m((0,u.Z)("openFile"),2)[1],k=m((0,r.useState)(null),2),A=k[0],O=k[1],T=m((0,r.useState)(0),2),R=T[0],Z=T[1],N=m((0,r.useState)(!1),2),P=N[0],F=N[1],L=(0,r.useCallback)((function(){F(!0)}),[]),M=(0,r.useCallback)((function(e){if(c.c.log("File tree selection changed",e),Z(e.length),1===e.length){var t=m(e,1)[0];if("folder"!==t.type){O(t),"doc"===t.type&&P&&(w(t.entity._id),t.entity.name.endsWith(".bib")&&(0,f.BZ)("open-bib-file",{projectOwner:b._id,isSampleFile:"sample.bib"===t.entity.name,linkedFileProvider:null}));var n="fileRef"===t.type?(0,s.s)(t.entity):null;if(I(n),n){var r,i;if(null!=t&&null!==(r=t.entity)&&void 0!==r&&null!==(r=r.name)&&void 0!==r&&r.endsWith(".bib"))(0,f.BZ)("open-bib-file",{projectOwner:b._id,isSampleFile:!1,linkedFileProvider:null===(i=t.entity.linkedFileData)||void 0===i?void 0:i.provider});window.dispatchEvent(new CustomEvent("file-view:file-opened"))}}}else O(null)}),[P,I,w,b]),D=(0,r.useCallback)((function(e){g.emit("entity:deleted",e),e.entity._id===S&&w(h)}),[g,S,w,h]);(0,d.Z)("doc:after-opened",(0,r.useCallback)((function(e){C(e.detail.docId)}),[C]));var _=(0,r.useRef)(!1);(0,r.useEffect)((function(){h&&P&&j&&!_.current&&(_.current=!0,E(h))}),[P,E,j,h]);var B=(0,r.useMemo)((function(){return{selectedEntityCount:R,openEntity:A,handleFileTreeInit:L,handleFileTreeSelect:M,handleFileTreeDelete:D}}),[D,L,M,A,R]);return(0,p.jsx)(y.Provider,{value:B,children:t})},v=function(){var e=(0,r.useContext)(y);if(!e)throw new Error("useFileTreeOpenContext is only available inside FileTreeOpenProvider");return e}},66624:function(e,t,n){n.d(t,{I:function(){return c},f:function(){return u}});n(71372),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850);var r=n(2784),i=n(52322);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=(0,r.createContext)(void 0),u=function(e){var t=e.children,n=o((0,r.useState)(null),2),a=n[0],u=n[1],c=(0,r.useCallback)((function(e){u(e)}),[]);return(0,i.jsxs)(l.Provider,{value:a,children:[(0,i.jsx)("div",{className:"global-alerts",ref:c}),t]})},c=function(){var e=(0,r.useContext)(l);if(void 0===e)throw new Error("useGlobalAlertsContainer is only available inside GlobalAlertsProvider");return e}},52654:function(e,t,n){n.d(t,{k2:function(){return w},oU:function(){return x}});n(15735),n(79321),n(58188),n(28673),n(6886),n(43450),n(67890),n(35883),n(18178),n(71372),n(34115),n(634),n(20796),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850);var r=n(2784),i=n(8596),o=n(5446),a=n(91661),l=n(76635),u=n.n(l),c=n(28684),s=n(28865),f=n(84050),d=n(65403),p=n(32687),m=n(50066),h=n(86845),y=n(75234),b=n(52322);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=(0,r.createContext)(void 0),x=function(e){var t=e.children,n=(0,y.$G)().t,l=(0,i.I)(),g=l.eventEmitter,x=l.projectId,w=(0,o.Km)().socket,S=(0,s.uS)().onlineUsersCount,E=(0,f._i)().permissionsLevel,C=(0,h.P_)(),I=(0,a.QA)().currentDocument,k=(0,m.a)().showGenericMessageModal,A=v((0,r.useState)({}),2),O=A[0],T=A[1],R=(0,r.useRef)(new Map);(0,r.useEffect)((function(){var e=function(e){var t=v(e.detail,1)[0];"doc"===t.type&&T((function(e){return u().omit(e,t.entity._id)}))};return g.on("entity:deleted",e),function(){g.off("entity:deleted",e)}}),[g]),(0,r.useEffect)((function(){window.dispatchEvent(new CustomEvent("project:metadata",{detail:O}))}),[O]);var Z=(0,r.useCallback)((function(e){var t=e.docId,n=e.meta;null!=t&&null!=n&&T((function(e){return{...e,[t]:n}}))}),[]),N=(0,r.useCallback)((function(){return u().flattenDeep(Object.values(O).map((function(e){return e.labels})))}),[O]),P=(0,r.useCallback)((function(){var e={};for(var t of Object.values(O))for(var n of Object.entries(t.packages)){var r=v(n,2),i=r[0],o=r[1];e[i]=o}return e}),[O]),F=(0,r.useCallback)((function(){(0,c.xA)("/project/".concat(x,"/metadata")).then((function(e){var t=e.projectMeta;t&&T(t)}))}),[x]),L=(0,r.useCallback)((function(e){var t=S>0;(0,c.ty)("/project/".concat(x,"/doc/").concat(e,"/metadata"),{body:{broadcast:t}}).then((function(e){!t&&e&&Z(e)}))}),[Z,S,x]),M=(0,r.useCallback)((function(e){if("readOnly"!==E){var t=R.current.get(e);null!=t&&(window.clearTimeout(t),R.current.delete(e)),R.current.set(e,window.setTimeout((function(){L(e),R.current.delete(e)}),2e3))}}),[L,E]),D=(0,r.useCallback)((function(e){Z(e)}),[Z]);(0,d.Z)(w,"broadcastDocMeta",D);var _=(0,r.useCallback)((function(){I&&M(I.doc_id)}),[I,M]);(0,p.Z)("editor:metadata-outdated",_);var B=(0,r.useRef)(C);(0,r.useEffect)((function(){B.current=C}),[C]),(0,r.useEffect)((function(){var e=function(e){v(e.detail,1)[0].project.deletedByExternalDataSource&&k(n("project_renamed_or_deleted"),n("project_renamed_or_deleted_detail")),window.setTimeout((function(){B.current.write&&F()}),200)};return g.once("project:joined",e),function(){g.off("project:joined",e)}}),[g,F,k,n]);var H=(0,r.useMemo)((function(){return{metadata:{state:{documents:O},getAllLabels:N,getAllPackages:P}}}),[O,N,P]);return(0,b.jsx)(j.Provider,{value:H,children:t})};function w(){var e=(0,r.useContext)(j);if(!e)throw new Error("useMetadataContext is only available inside MetadataProvider");return e}},19816:function(e,t,n){n.d(t,{H:function(){return h},k:function(){return y}});n(71372),n(28673),n(15735),n(6886),n(34115),n(634),n(58188),n(20796),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850);var r=n(2784),i=n(44466),o=n(32687),a=n(96227),l=n(37246),u=n(79477),c=n(76066),s=n(72526),f=n(52322);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=(0,r.createContext)(void 0),h=function(e){var t=e.children,n=d((0,r.useState)(void 0),2),p=n[0],h=n[1],y=d((0,r.useState)(-1),2),v=y[0],g=y[1],j=d((0,r.useState)(!1),2),x=j[0],w=j[1],S=d((0,r.useState)(!1),2),E=S[0],C=S[1],I=d((0,r.useState)(!1),2),k=I[0],A=I[1],O=(0,i.Z)("editor:gotoLine",!0);(0,o.Z)("file-view:file-opened",(0,r.useCallback)((function(e){w(!0)}),[])),(0,o.Z)("scroll:editor:update",(0,r.useCallback)((function(e){k?A(!1):g(e.detail+1)}),[k])),(0,o.Z)("cursor:editor:update",(0,r.useCallback)((function(e){E?C(!1):g(e.detail.row+1)}),[E])),(0,o.Z)("doc:after-opened",(0,r.useCallback)((function(e){e.detail.isNewDoc&&C(!0),w(!1),A(!0)}),[]));var T=(0,r.useCallback)((function(e,t){A(!0),O(e,0,t),a.BZ("outline-jump-to-line")}),[O]),R=(0,r.useMemo)((function(){return b(null==p?void 0:p.items,v)}),[p,v]),Z=d((0,l.Z)("editor.open_doc_name"),1)[0],N=(0,r.useMemo)((function(){return!!Z&&(0,u.Z)(Z)}),[Z]),P=(0,s.d)()._id,F="file_outline.expanded.".concat(P),L=d((0,r.useState)((function(){return!1!==c.Z.getItem(F)})),2),M=L[0],D=L[1],_=N&&!x,B=(0,r.useCallback)((function(){_&&(c.Z.setItem(F,!M),a.BZ(M?"outline-collapse":"outline-expand"),D(!M))}),[_,M,F]),H=(0,r.useMemo)((function(){return{flatOutline:p,setFlatOutline:h,highlightedLine:R,jumpToLine:T,canShowOutline:_,outlineExpanded:M,toggleOutlineExpanded:B}}),[p,R,T,_,M,B]);return(0,f.jsx)(m.Provider,{value:H,children:t})},y=function(){var e=(0,r.useContext)(m);if(!e)throw new Error("useOutlineProvider is only available inside OutlineProvider");return e},b=function(e,t){if(!e)return-1;var n=-1;for(var r of e){if(r.line>t)return n;n=r.line}return n}},57743:function(e,t,n){n.d(t,{H6:function(){return v},a4:function(){return j},nl:function(){return g}});n(15735),n(58188),n(6886),n(26936),n(96708),n(71372),n(34115),n(634),n(20796),n(28673),n(32501),n(88233),n(27233),n(77950),n(21850);var r=n(42957),i=n(2784),o=n(8596),a=n(5446),l=n(76635),u=n.n(l),c=n(28684),s=n(37246),f=n(47481),d=n(14595),p=n(45177),m=n(52322);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=(0,i.createContext)(void 0);function v(e){e.set("$root._references",{keys:[]})}var g=function(e){var t=e.children,n=(0,f.O)().fileTreeData,l=(0,o.I)(),y=l.eventEmitter,v=l.projectId,g=(0,a.Km)().socket,j=h((0,s.Z)("$root._references"),2),x=j[0],w=j[1],S=h((0,i.useState)({}),2),E=S[0],C=S[1],I=(0,i.useCallback)((function(e,t){var n=x.keys,r=t?e:u().union(n,e);window.dispatchEvent(new CustomEvent("project:references",{detail:r})),w({keys:r})}),[x.keys,w]),k=(0,i.useCallback)((function(e){(0,c.ty)("/project/".concat(v,"/references/indexAll"),{body:{shouldBroadcast:e}}).then((function(e){I(e.keys,!0)})).catch((function(e){p.c.error(e)}))}),[v,I]),A=(0,i.useCallback)((function(e,t){var n=e.doc_id,i=e._doc.snapshot,o=Date.now(),a=(0,r.Y)("blob "+i.length+"\0"+i),l=E[n];l&&l.timestamp>o-216e5&&l.hash===a||(k(t),C((function(e){return{...e,[n]:{hash:a,timestamp:o}}})))}),[E,k]);(0,i.useEffect)((function(){var e=function(e){var t,r=h(e.detail,1)[0];r.doc_id&&null!==(t=(0,d.I)(n,r.doc_id))&&void 0!==t&&null!==(t=t.name)&&void 0!==t&&t.endsWith(".bib")&&A(r,!0)};return y.on("document:closed",e),function(){y.off("document:closed",e)}}),[y,n,A]),(0,i.useEffect)((function(){var e=function(){k(!0)};return y.on("references:should-reindex",e),function(){y.off("references:should-reindex",e)}}),[y,k]),(0,i.useEffect)((function(){var e=function(){g.on("references:keys:updated",(function(e,t){return I(e,t)})),k(!1)};return y.once("project:joined",e),function(){y.off("project:joined",e)}}),[y,k,g,I]);var O=(0,i.useMemo)((function(){return{indexReferencesIfDocModified:A,indexAllReferences:k}}),[A,k]);return(0,m.jsx)(b.Provider,{value:O,children:t})};function j(){var e=(0,i.useContext)(b);if(!e)throw new Error("useReferencesContext is only available inside ReferencesProvider");return e}},32755:function(e,t,n){n.d(t,{P:function(){return i},s:function(){return r}});n(26936);function r(e){return{_id:e._id,name:e.name,id:e._id,type:"file",selected:!0,linkedFileData:e.linkedFileData,created:e.created?new Date(e.created):new Date}}function i(e){return{...r(e),created:e.created}}},14185:function(e,t,n){n.d(t,{XA:function(){return l},bx:function(){return a},yk:function(){return u}});var r=n(39493),i=n(79657),o=n(52322);function a(){return(0,r.l5)().detachRole?null:(0,o.jsx)(i.Z,{})}function l(){var e=(0,r.l5)(),t=e.detachRole,n=e.detachIsLinked;return"detacher"===t&&n?(0,o.jsx)(i.Z,{}):null}function u(){var e=(0,r.l5)(),t=e.detachRole,n=e.detachIsLinked;return"detached"===t&&n?(0,o.jsx)(i.Z,{}):null}},78237:function(e,t,n){n.d(t,{Z:function(){return l},j:function(){return a}});var r=n(2784),i=n(32687),o=n(83976),a=function(e){if(e.shiftKey||e.altKey)return!1;if(e.ctrlKey){if("s"===e.key||"Enter"===e.key||"."===e.key)return!0;if("S"===e.key&&!e.shiftKey)return!0}else if(e.metaKey){if("s"===e.key||"Enter"===e.key)return!0;if("S"===e.key&&!e.shiftKey)return!0}};function l(e,t){var n=(0,r.useCallback)((function(t){a(t)&&(t.preventDefault(),e())}),[e]),l=(0,r.useCallback)((function(){e()}),[e]);(0,i.Z)("pdf:recompile",l),(0,r.useEffect)((function(){return document.body.addEventListener("keydown",n),function(){document.body.removeEventListener("keydown",n)}}),[n]);var u=(0,o.Z)("set-changed-at",t,"detacher","detached"),c=(0,r.useCallback)((function(){u(Date.now())}),[u]);(0,i.Z)("doc:changed",c)}},72891:function(e,t,n){n.d(t,{Z:function(){return C},s:function(){return E}});n(71372),n(58188),n(73439),n(21515),n(43105),n(34115),n(634),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850);var r=n(2784),i=n(67873),o=n(2571),a=n(63584),l=n(75234),u=n(10280),c=n(11685),s=n(84050),f=n(28500),d=n(44872),p=n(52322),m=(0,r.lazy)((function(){return Promise.all([n.e(7198),n.e(3261),n.e(1758),n.e(3588)]).then(n.bind(n,56543)).then((function(e){return{default:e.ReadOnlyTokenLink}}))})),h=(0,r.lazy)((function(){return Promise.all([n.e(7198),n.e(3261),n.e(9865),n.e(1758),n.e(7733)]).then(n.bind(n,27733))}));function y(e){var t=e.show,n=e.cancel,y=e.animation,v=e.inFlight,g=e.error,j=(0,l.$G)().t,x=(0,s._i)().isRestrictedTokenMember;return(0,p.jsxs)(c.Z,{show:t,onHide:n,animation:y,children:[(0,p.jsx)(i.Z.Header,{closeButton:!0,children:(0,p.jsx)(i.Z.Title,{children:j("share_project")})}),(0,p.jsx)(i.Z.Body,{className:"modal-body-share",children:(0,p.jsx)(o.Z,{fluid:!0,children:(0,p.jsx)(r.Suspense,{fallback:(0,p.jsx)(f.w,{minHeight:"15rem"}),children:x?(0,p.jsx)(m,{}):(0,p.jsx)(h,{})})})}),(0,p.jsxs)(i.Z.Footer,{className:"modal-footer-share",children:[(0,p.jsxs)("div",{className:"modal-footer-left",children:[v&&(0,p.jsx)(u.Z,{type:"refresh",spin:!0}),g&&(0,p.jsx)("span",{className:"text-danger error",children:(0,p.jsx)(b,{error:g})})]}),(0,p.jsx)("div",{className:"modal-footer-right",children:(0,p.jsx)(d.Z,{onClick:n,as:a.Z,type:"button",bsStyle:null,className:"btn-secondary",disabled:v,children:j("close")})})]})]})}function b(e){var t=e.error,n=(0,l.$G)().t;switch(t){case"cannot_invite_non_user":return(0,p.jsx)(p.Fragment,{children:n("cannot_invite_non_user")});case"cannot_verify_user_not_robot":return(0,p.jsx)(p.Fragment,{children:n("cannot_verify_user_not_robot")});case"cannot_invite_self":return(0,p.jsx)(p.Fragment,{children:n("cannot_invite_self")});case"invalid_email":return(0,p.jsx)(p.Fragment,{children:n("invalid_email")});case"too_many_requests":return(0,p.jsx)(p.Fragment,{children:n("too_many_requests")});default:return(0,p.jsx)(p.Fragment,{children:n("generic_something_went_wrong")})}}var v=n(72526),g=n(22276),j=n(96227);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=(0,r.createContext)(void 0);function E(){var e=(0,r.useContext)(S);if(!e)throw new Error("useShareProjectContext is only available inside ShareProjectProvider");return e}var C=r.memo((function(e){var t=e.handleHide,n=e.show,i=e.animation,o=void 0===i||i,a=x((0,r.useState)(!1),2),l=a[0],u=a[1],c=x((0,r.useState)(),2),s=c[0],f=c[1],d=(0,v.d)(),m=(0,g.yW)().splitTestVariants;(0,r.useEffect)((function(){n&&(0,j.BZ)("share-modal-opened",{splitTestVariant:m["null-test-share-modal"],project_id:d._id})}),[m,d._id,n]),(0,r.useEffect)((function(){n&&f(void 0)}),[n]);var h=(0,r.useCallback)((function(){l||t()}),[t,l]),b=(0,r.useCallback)((function(e){f(void 0),u(!0);var t=e();return t.catch((function(e){var t,n;f((null===(t=e.data)||void 0===t?void 0:t.errorReason)||(null===(n=e.data)||void 0===n?void 0:n.error)||"generic_something_went_wrong")})),t.finally((function(){u(!1)})),t}),[]),w=(0,r.useCallback)((function(e){return Object.assign(d,e)}),[d]);return d?(0,p.jsx)(S.Provider,{value:{updateProject:w,monitorRequest:b,inFlight:l,setInFlight:u,error:s,setError:f},children:(0,p.jsx)(y,{animation:o,cancel:h,error:s,inFlight:l,show:n})}):null}))},66123:function(e,t,n){n.d(t,{bh:function(){return m},eH:function(){return p},np:function(){return s},c_:function(){return l},GY:function(){return u},yV:function(){return a},xX:function(){return d},h1:function(){return f},hS:function(){return c}});n(18178);var r,i,o=n(28684);n(58188),n(73439);function a(e,t,n){var a;return function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(t,n){if(e||!window.grecaptcha)return t();try{r||(r=window.grecaptcha.render("recaptcha",{callback:function(e){i&&(i(e),i=void 0),window.grecaptcha.reset()}})),i=t}catch(e){n(e)}}))}(null===(a=window.ExposedSettings.recaptchaDisabled)||void 0===a?void 0:a.invite).then((function(r){return(0,o.ty)("/project/".concat(e,"/invite"),{body:{email:t,privileges:n,"g-recaptcha-response":r}})}))}function l(e,t){return(0,o.ty)("/project/".concat(e,"/invite/").concat(t._id,"/resend"))}function u(e,t){return(0,o.K$)("/project/".concat(e,"/invite/").concat(t._id))}function c(e,t,n){return(0,o.BS)("/project/".concat(e,"/users/").concat(t._id),{body:n})}function s(e,t){return(0,o.K$)("/project/".concat(e,"/users/").concat(t._id))}function f(e,t){return(0,o.ty)("/project/".concat(e,"/transfer-ownership"),{body:{user_id:t._id}})}function d(e,t){return(0,o.ty)("/project/".concat(e,"/settings/admin"),{body:{publicAccessLevel:t}})}function p(e){return(0,o.xA)("/project/".concat(e,"/members"))}function m(e){return(0,o.xA)("/project/".concat(e,"/invites"))}},17317:function(e,t,n){n.d(t,{LK:function(){return a},UD:function(){return u},mB:function(){return c}});n(28673),n(15735),n(6886),n(95342),n(58188),n(99805);var r=n(1727),i=r.Py.define(),o=r.Py.define(),a=function(){return[l]},l=r.QQ.define({create:function(){return[]},update:function(e,t){var n=function(t){t.is(i)&&e.push(t.value),t.is(o)&&(e=e.filter((function(e){return!(e.effect===t.value.effect&&e.callback===t.value.callback)})));for(var n=function(n){var i,o=e[n];t.is(o.effect)&&(setTimeout((function(){return o.callback(t.value)})),null!==(i=o.options)&&void 0!==i&&i.once&&(e.splice(n,1),--n));r=n},r=0;r<e.length;++r)n(r)};for(var r of t.effects)n(r);return e}}),u=function(e,t,n,r){e.dispatch({effects:i.of({effect:t,callback:n,options:r})})},c=function(e,t,n){e.dispatch({effects:o.of({effect:t,callback:n})})}},78014:function(e,t,n){n.d(t,{HY:function(){return y},Hs:function(){return d},J$:function(){return p},Z0:function(){return m},jv:function(){return h},op:function(){return v}});n(28673),n(15735),n(6886),n(43450),n(58188),n(73439),n(93244),n(26936),n(39529),n(31235),n(9575),n(96264),n(34115),n(634),n(71372),n(71245),n(20796);var r=n(1727),i=n(65329),o=n(17317),a=n(6956),l=n(45177);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:String(t)}function f(e,t){return e?{...e,from:t.mapPos(e.from),to:t.mapPos(e.to)}:e}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props=t}var t,n,r;return t=e,(n=[{key:"from",get:function(){return this.props.from}},{key:"to",get:function(){return this.props.to}},{key:"caption",get:function(){return this.props.caption}},{key:"label",get:function(){return this.props.label}},{key:"width",get:function(){return this.props.width}},{key:"unknownGraphicsArguments",get:function(){return this.props.unknownGraphicsArguments}},{key:"graphicsCommandArguments",get:function(){return this.props.graphicsCommandArguments}},{key:"graphicsCommand",get:function(){return this.props.graphicsCommand}},{key:"file",get:function(){return this.props.file}},{key:"map",value:function(t){return new e({from:t.mapPos(this.from),to:t.mapPos(this.to),caption:f(this.caption,t),label:f(this.label,t),graphicsCommand:f(this.graphicsCommand,t),width:this.width,file:f(this.file,t),graphicsCommandArguments:f(this.graphicsCommandArguments,t),unknownGraphicsArguments:this.unknownGraphicsArguments})}}])&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),p=r.Py.define(),m=r.QQ.define({create:function(){return null},update:function(e,t){var n;for(var r of t.effects)r.is(p)&&(n=r.value);return void 0!==n?n:e?e.map(t.changes):e}}),h=function(){return[m]};function y(e){var t=new AbortController,n=new Promise((function(n){var r=function(){l.c.warn("Aborting wait for file tree update"),(0,o.mB)(e,a.tw,i),n()};function i(){t.signal.aborted||(t.signal.removeEventListener("abort",r),n())}t.signal.addEventListener("abort",r,{once:!0}),(0,o.UD)(e,a.tw,i,{once:!0})}));return{withTimeout:function(){return setTimeout((function(){return t.abort()}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:500),n},promise:n}}var b=new Set(["image/jpeg","image/png","application/pdf"]),v=function(){return i.tk.domEventHandlers({drop:function(e){if(e.dataTransfer&&0!==e.dataTransfer.files.length){var t=e.dataTransfer.files[0];b.has(t.type)&&window.dispatchEvent(new CustomEvent("figure-modal:paste-image",{detail:{name:t.name,type:t.type,data:t}}))}},paste:function(e){if(e.clipboardData&&0!==e.clipboardData.files.length&&!e.clipboardData.types.includes("text/plain")){var t=e.clipboardData.files[0];b.has(t.type)&&window.dispatchEvent(new CustomEvent("figure-modal:paste-image",{detail:{name:t.name,type:t.type,data:t}}))}}})}},6956:function(e,t,n){n.d(t,{DN:function(){return v},L3:function(){return f},S3:function(){return g},dK:function(){return p},jF:function(){return u},m0:function(){return h},tw:function(){return y},uk:function(){return c},yC:function(){return b}});n(28673),n(15735),n(6886);var r=n(1727),i=n(9685),o=n(65329),a=n(77120),l=n(31931),u=r.Py.define(),c=(0,l.V)(u),s=new r.F6,f=r.QQ.define({create:function(){},update:function(e,t){for(var n of t.effects)if(n.is(y))return n.value;return e}}),d=new r.F6,p=function(e,t,n){var r=n.syntaxValidation;return d.of(m(e,t,r))},m=function(e,t,n){var r=a.c6.matchFilename(i.M,e);return r?[s.of(a.c.of("    ")),f,o.lg.define((function(e){return r.load().then((function(r){e.dispatch({effects:[s.reconfigure(r),u.of(null)]}),e.dispatch({effects:[y.of(t),v.of(n)]})})),{}})),f]:[]},h=function(e,t,n){return{effects:d.reconfigure(m(e,t,n))}},y=r.Py.define(),b=function(e){return{effects:y.of(e)}},v=r.Py.define(),g=function(e){return{effects:v.of(e)}}},9685:function(e,t,n){n.d(t,{M:function(){return i}});n(15735),n(58188),n(73439),n(28673),n(6886);var r=n(77120),i=[r.c6.of({name:"latex",extensions:["tex","sty","cls","clo","bst","bbl","pdf_tex","pdf_t","map","fd","enc","def","mf","pgf","tikz","bbx","cbx","dbx","lbx","lco","ldf","xmpdata","Rnw","rnw","lyx","inc","dtx","hak","eps_tex","brf","ins","hva","Rtex","rtex","pstex","pstex_t","gin","fontspec","pygstyle","pygtex","ps_tex","ltx"],load:function(){return Promise.all([n.e(3539),n.e(7042),n.e(7029),n.e(88),n.e(375)]).then(n.bind(n,10375)).then((function(e){return e.latex()}))}}),r.c6.of({name:"bibtex",extensions:["bib"],load:function(){return Promise.all([n.e(3539),n.e(5303)]).then(n.bind(n,5303)).then((function(e){return e.bibtex()}))}}),r.c6.of({name:"markdown",extensions:["md","markdown"],load:function(){return Promise.all([n.e(3539),n.e(915),n.e(7029),n.e(7544)]).then(n.bind(n,7544)).then((function(e){return e.markdown()}))}})]},49272:function(e,t,n){n.r(t),n.d(t,{AffilCtrlSeq:function(){return ee},AffiliationCtrlSeq:function(){return te},Ampersand:function(){return lt},AuthorCtrlSeq:function(){return $},BareFilePathArgument:function(){return st},Begin:function(){return d},BibKeyArgument:function(){return We},BibliographyCtrlSeq:function(){return Y},BibliographyStyleCtrlSeq:function(){return Q},BlankLine:function(){return ke},Book:function(){return Ut},BookCtrlSeq:function(){return M},BottomRuleCtrlSeq:function(){return ue},BracketMath:function(){return At},CaptionCtrlSeq:function(){return O},CenteringCtrlSeq:function(){return W},Chapter:function(){return Gt},ChapterCtrlSeq:function(){return _},CiteCtrlSeq:function(){return y},CiteStarrableCtrlSeq:function(){return b},CloseBrace:function(){return Re},CloseBracket:function(){return Be},CloseBracketCtrlSym:function(){return we},CloseBracketMath:function(){return Tt},CloseParenCtrlSym:function(){return je},CloseParenMath:function(){return Nt},ColorBoxCtrlSeq:function(){return ie},Command:function(){return Fe},Comment:function(){return Ee},Csname:function(){return c},CtrlSeq:function(){return rt},CtrlSym:function(){return Ye},DefCtrlSeq:function(){return T},DefinitionArgument:function(){return et},DefinitionFragment:function(){return nt},DisplayMath:function(){return kt},DocumentClassCtrlSeq:function(){return w},DocumentEnvName:function(){return se},DocumentEnvironment:function(){return Oe},Dollar:function(){return it},DollarMath:function(){return mt},End:function(){return p},EnvName:function(){return ze},Environment:function(){return He},EquationArrayEnvName:function(){return pe},EquationArrayEnvironment:function(){return Lt},EquationEnvName:function(){return de},EquationEnvironment:function(){return Ft},FigureEnvName:function(){return ye},FigureEnvironment:function(){return Bt},FilePathArgument:function(){return Xe},HLineCtrlSeq:function(){return oe},HboxCtrlSeq:function(){return j},HrefCtrlSeq:function(){return E},IncludeCtrlSeq:function(){return q},IncludeGraphicsCtrlSeq:function(){return A},InlineMath:function(){return ht},InputCtrlSeq:function(){return G},ItemCtrlSeq:function(){return X},KnownCommand:function(){return Le},KnownCtrlSym:function(){return ot},KnownEnvironment:function(){return Ae},LaTeX:function(){return Ce},LabelArgument:function(){return Ve},LabelCtrlSeq:function(){return v},LeftCtrlSeq:function(){return R},LineBreakCtrlSym:function(){return Se},ListEnvName:function(){return be},ListEnvironment:function(){return Ht},LiteralArgContent:function(){return o},LongArg:function(){return _e},LstInlineContent:function(){return i},LstInlineCtrlSeq:function(){return k},MacroParameter:function(){return Qe},MaketitleCtrlSeq:function(){return ne},Math:function(){return yt},MathChar:function(){return It},MathClosing:function(){return St},MathCommand:function(){return vt},MathCtrlSym:function(){return gt},MathDelimitedGroup:function(){return xt},MathDelimiter:function(){return u},MathGroup:function(){return jt},MathOpening:function(){return wt},MathSpecialChar:function(){return Et},MathTextCommand:function(){return bt},MathTextCtrlSeq:function(){return g},MidRuleCtrlSeq:function(){return le},MultiColumnCtrlSeq:function(){return ce},NewCommandCtrlSeq:function(){return N},NewEnvironmentCtrlSeq:function(){return F},NewLine:function(){return tt},NewTheoremCtrlSeq:function(){return V},Normal:function(){return at},Number:function(){return Ct},OpenBrace:function(){return Te},OpenBracket:function(){return Ne},OpenBracketCtrlSym:function(){return xe},OpenBracketMath:function(){return Ot},OpenParenCtrlSym:function(){return ge},OpenParenMath:function(){return Zt},OptionalArgument:function(){return Ze},OptionalMacroParameter:function(){return $e},PackageArgument:function(){return Ge},Paragraph:function(){return Kt},ParagraphCtrlSeq:function(){return U},ParenMath:function(){return Rt},Part:function(){return Jt},PartCtrlSeq:function(){return D},RefArgument:function(){return Ke},RefCtrlSeq:function(){return m},RefStarrableCtrlSeq:function(){return h},RenewCommandCtrlSeq:function(){return P},RenewEnvironmentCtrlSeq:function(){return L},RightCtrlSeq:function(){return Z},Section:function(){return qt},SectionCtrlSeq:function(){return B},SectioningArgument:function(){return ct},ShortArg:function(){return Je},ShortOptionalArg:function(){return Pe},ShortTextArgument:function(){return Ue},SpaceDelimitedLiteralArgContent:function(){return a},SubParagraph:function(){return Wt},SubParagraphCtrlSeq:function(){return J},SubSection:function(){return Xt},SubSectionCtrlSeq:function(){return H},SubSubSection:function(){return Vt},SubSubSectionCtrlSeq:function(){return z},TableEnvName:function(){return ve},TableEnvironment:function(){return zt},TabularArgument:function(){return ft},TabularContent:function(){return dt},TabularEnvName:function(){return fe},TabularEnvironment:function(){return Pt},Text:function(){return Ie},TextArgument:function(){return De},TextColorCtrlSeq:function(){return re},TheoremStyleCtrlSeq:function(){return K},TikzPictureContent:function(){return _t},TikzPictureEnvName:function(){return he},TikzPictureEnvironment:function(){return Dt},Tilde:function(){return ut},TitleCtrlSeq:function(){return x},TopRuleCtrlSeq:function(){return ae},TrailingContent:function(){return f},TrailingWhitespaceOnly:function(){return s},UnknownCommand:function(){return pt},UrlArgument:function(){return qe},UrlCtrlSeq:function(){return C},UsePackageCtrlSeq:function(){return S},VerbContent:function(){return r},VerbCtrlSeq:function(){return I},VerbatimContent:function(){return l},VerbatimEnvName:function(){return me},VerbatimEnvironment:function(){return Mt},Whitespace:function(){return Me}});var r=1,i=2,o=3,a=4,l=5,u=6,c=7,s=8,f=9,d=10,p=11,m=12,h=13,y=14,b=15,v=16,g=17,j=18,x=19,w=20,S=21,E=22,C=23,I=24,k=25,A=26,O=27,T=28,R=29,Z=30,N=31,P=32,F=33,L=34,M=35,D=36,_=37,B=38,H=39,z=40,U=41,J=42,G=43,q=44,X=45,V=46,K=47,W=48,Y=49,Q=50,$=51,ee=52,te=53,ne=54,re=55,ie=56,oe=57,ae=58,le=59,ue=60,ce=61,se=62,fe=63,de=64,pe=65,me=66,he=67,ye=68,be=69,ve=70,ge=71,je=72,xe=73,we=74,Se=75,Ee=76,Ce=77,Ie=78,ke=79,Ae=80,Oe=81,Te=84,Re=85,Ze=86,Ne=87,Pe=88,Fe=89,Le=90,Me=92,De=93,_e=94,Be=95,He=97,ze=100,Ue=108,Je=109,Ge=116,qe=120,Xe=128,Ve=131,Ke=133,We=135,Ye=137,Qe=138,$e=139,et=140,tt=141,nt=142,rt=143,it=145,ot=146,at=148,lt=149,ut=150,ct=152,st=162,ft=172,dt=173,pt=174,mt=175,ht=176,yt=177,bt=178,vt=179,gt=180,jt=181,xt=182,wt=183,St=184,Et=185,Ct=186,It=187,kt=190,At=191,Ot=192,Tt=193,Rt=194,Zt=195,Nt=196,Pt=199,Ft=204,Lt=209,Mt=213,Dt=218,_t=222,Bt=225,Ht=229,zt=233,Ut=238,Jt=241,Gt=244,qt=247,Xt=250,Vt=253,Kt=256,Wt=259},31931:function(e,t,n){n.d(t,{B:function(){return r},V:function(){return i}});n(58188);var r=function(e){return function(t){return t.effects.some((function(t){return t.is(e)}))}},i=function(e){return function(t){return t.transactions.some((function(t){return t.effects.some((function(t){return t.is(e)}))}))}}},30864:function(e,t,n){n.d(t,{DC:function(){return a},Mt:function(){return o},rG:function(){return i}});n(58188),n(26936);var r=n(77120);var i=function(e,t,n){var i=(0,r.l)(e,t,100);if(!i)return null;var o=i.resolve(t),a=null==o?void 0:o.prevSibling;return(null==a?void 0:a.type.name)===n},o=function(e,t){var n=t.getChild("ShortOptionalArg");if(n)return e.doc.sliceString(n.from,n.to)},a=function(e,t,n){if(!e.type.is("UnknownCommand"))return!1;var r=e.getChild("CtrlSeq");return!!r&&n.doc.sliceString(r.from,r.to)===t}},77904:function(e,t,n){n.d(t,{M2:function(){return f},Oh:function(){return d},RV:function(){return s},XP:function(){return a},a5:function(){return u},dr:function(){return c},y4:function(){return l}});n(18178),n(77950),n(85940),n(74069),n(9575),n(96264),n(34115),n(634),n(58188),n(71372),n(71245),n(96928),n(61229),n(92215),n(20796),n(15735),n(28673),n(6886);var r=n(77120),i=n(30864),o=(n(759),n(78014));var a=function(e,t,n,r){if(t.type.is("EnvNameGroup")){var i;if(!r(t.node))return!1;if(null===(i=t.node.prevSibling)||void 0===i||!i.type.is("Begin"))return!1;var o=t.node.getChild("OpenBrace");if(!o)return!1;var a=o.node.nextSibling;if(!a)return!1;var l=e.doc.sliceString(a.from,a.to);if(l.length<1)return!1;var u={title:l,from:a.from,to:a.to,line:e.doc.lineAt(a.from).number};n.push(u)}else if(t.type.is("NewEnvironment")||t.type.is("RenewEnvironment")){if(!r(t.node))return!1;var c=t.node.getChild("LiteralArgContent");if(!c)return;var s=e.doc.sliceString(c.from,c.to);if(!s)return;var f={title:s,from:c.from,to:c.to,line:e.doc.lineAt(c.from).number};n.push(f)}},l=function(e,t){var n=(0,r.l)(e,t,100);if(n){var o=n.resolve(t);if(o){if(o.type.is("EnvNameGroup")&&(0,i.rG)(e,t,"Begin"))return!0;if(o.type.is("$Environment")||o.type.is("LaTeX")&&t===e.doc.length){if(!(o=n.resolve(t,-1)))return;if(o.type.is("OpenBrace")||o.type.is("$EnvName"))return!0}}}},u=function(e,t){var n=(0,r.l)(e,t,100);if(n){var o=n.resolve(t);if(o){if(o.type.is("EnvNameGroup")&&(0,i.rG)(e,t,"End"))return!0;if(o.type.is("$Environment")||o.type.is("Content")){if(!(o=n.resolve(t,-1)))return;if(o.type.is("OpenBrace")||o.type.is("EnvName"))return!0}}}};function c(e,t){var n,r,i,o;if(null!==(n=e)&&void 0!==n&&n.type.is("$Environment")&&(e=e.getChild("BeginEnv")),!(null!==(r=e)&&void 0!==r&&r.type.is("BeginEnv")||null!==(i=e)&&void 0!==i&&i.type.is("EndEnv")))return null;var a=null===(o=e)||void 0===o||null===(o=o.getChild("EnvNameGroup"))||void 0===o||null===(o=o.getChild("OpenBrace"))||void 0===o?void 0:o.nextSibling;return a?a.type.is("CloseBrace")?null:t.sliceDoc(a.from,a.to):null}var s=function(e,t){var n;return null===(n=c(e,t))||void 0===n?void 0:n.replace(/\*$/,"")};function f(e){var t;return null===(t=e.getChild("BeginEnv"))||void 0===t?void 0:t.getChildren("TextArgument")}function d(e,t){var n,r,i,a,l=null,u=null,c=null,s=e.from,f=e.to,d=!1;return e.cursor().iterate((function(e){if(d)return!1;if(e.type.is("Caption")){if(l)return d=!0,!1;l={from:e.from,to:e.to}}if(e.type.is("Label")){if(u)return d=!0,!1;u={from:e.from,to:e.to}}if(e.type.is("IncludeGraphics")){var o,s;if(n)return d=!0,!1;a={from:e.from,to:e.to};var f=null===(o=e.node.getChild("IncludeGraphicsArgument"))||void 0===o||null===(o=o.getChild("FilePathArgument"))||void 0===o?void 0:o.getChild("LiteralArgContent");if(!f)return d=!0,!1;n={from:f.from,to:f.to,path:t.sliceDoc(f.from,f.to)};var p=null===(s=e.node.getChild("OptionalArgument"))||void 0===s?void 0:s.getChild("ShortOptionalArg");if(!p)return r=void 0,!1;c={from:p.from,to:p.to};var m=t.sliceDoc(p.from,p.to),h=m.match(/^width=([0-9]|(?:[0-9]*\.[0-9]+)|(?:[0-9]+\.))\\(linewidth|pagewidth|textwidth|hsize|columnwidth)$/);h?(r=parseFloat(h[1]),"linewidth"!==h[2]&&(i=m)):i=m}})),d||void 0===a||void 0===n?null:new o.Hs({caption:l,label:u,file:n,from:s,to:f,width:r,unknownGraphicsArguments:i,graphicsCommand:a,graphicsCommandArguments:c})}},85209:function(e,t,n){n.d(t,{XP:function(){return c},zz:function(){return f}});n(18178),n(16781),n(43450),n(28673),n(15735),n(6886),n(9575),n(96264),n(34115),n(634),n(58188),n(71372),n(71245),n(96928),n(61229),n(92215),n(20796),n(759);var r=n(49272),i=n(77904);var o=function(e){return e[e.Book=1]="Book",e[e.Part=2]="Part",e[e.Chapter=3]="Chapter",e[e.Section=4]="Section",e[e.SubSection=5]="SubSection",e[e.SubSubSection=6]="SubSubSection",e[e.Paragraph=7]="Paragraph",e[e.SubParagraph=8]="SubParagraph",e[e.Frame=9]="Frame",e[e.Invalid=-1]="Invalid",e}(o||{}),a={book:o.Book,part:o.Part,chapter:o.Part,section:o.Section,subsection:o.SubSection,subsubsection:o.SubSubSection,paragraph:o.Paragraph,subparagraph:o.SubParagraph,frame:o.Frame},l=function(e){var t;if("string"==typeof e)return null!==(t=a[e])&&void 0!==t?t:o.Invalid;switch(e){case r.Book:return o.Book;case r.Part:return o.Part;case r.Chapter:return o.Chapter;case r.Section:return o.Section;case r.SubSection:return o.SubSection;case r.SubSubSection:return o.SubSubSection;case r.Paragraph:return o.Paragraph;case r.SubParagraph:return o.SubParagraph;default:return o.Invalid}},u=function(e,t){var n=[];return t.node.cursor().iterate((function(r){return!(r.from>=t.to)&&(!r.type.is("Label")&&(!!r.node.firstChild||void n.push(e.doc.sliceString(r.from,r.to))))})),n.join("")},c=function(e,t,n,r){if(t.type.is("SectioningCommand")){var a,c=t.node,s=c.parent;if(!r(c))return;var f=null===(a=c.getChild("SectioningArgument"))||void 0===a?void 0:a.getChild("LongArg");if(!f)return;for(var d=s;d;d=d.parent)if(d.type.is("NewCommand")||d.type.is("RenewCommand"))return!1;var p=null!=s&&s.type.is("$SectioningCommand")?l(s.type.id):l((h=c.firstChild)?e.doc.sliceString(h.from+1,h.to):""),m={line:e.doc.lineAt(c.from).number,title:u(e,f),from:c.from,to:c.to,level:p};n.push(m)}var h;if(t.type.is("$Environment")){var y=t.node;if("frame"===(0,i.dr)(y,e)){var b,v=y.getChild("BeginEnv");if(!r(v))return;var g=null===(b=(0,i.M2)(y))||void 0===b?void 0:b.map((function(e){return e.getChild("LongArg")}));if(null!=g&&g.length){var j=g[0],x=j?e.sliceDoc(j.from,j.to):"",w={line:e.doc.lineAt(v.from).number,title:x,from:v.from,to:v.to,level:o.Frame};n.push(w)}}}},s=function(e){return{title:e.title,line:e.line,level:e.level}},f=function(e){var t=[],n=[];for(var r of e){for(var i=s(r);t.length&&t[t.length-1].level>=i.level;)t.pop();if(t.length){var o=t[t.length-1];o.children?o.children.push(i):o.children=[i],t.push(i)}else t.push(i),n.push(i)}return n}},759:function(e,t,n){n.d(t,{vt:function(){return l},y0:function(){return c}});n(43450),n(95342),n(58188),n(43430),n(9575),n(96264),n(34115),n(634),n(71372),n(71245),n(20796),n(15735),n(28673),n(6886);var r=n(77120),i=n(21649);var o=20,a=500,l=function(e){return e[e.Pending=0]="Pending",e[e.Partial=1]="Partial",e[e.Complete=2]="Complete",e}({}),u=function(e,t,n,r){return!(t<n||e>r)};function c(e,t,n,c,s){var f=arguments.length>5&&void 0!==arguments[5]&&arguments[5],d=arguments.length>6?arguments[6]:void 0,p=arguments.length>7?arguments[7]:void 0,m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{items:[],status:l.Pending},h=m.status===l.Complete?m.items.filter((function(e){return!u(e.from,e.to,t,n)})).map((function(e){return function(e,t){if(!t)return e;var n=e.from,r=e.to,i=t.changes.mapPos(n),o=t.changes.mapPos(r),a=t.state.doc.lineAt(i).number;return i===n&&o===r&&a===e.line?e:{...e,from:i,to:o,line:a}}(e,p)})):[];m.status!==l.Complete&&(s=e.doc.length,c=0);var y=(0,r.l)(e,s,f?a:o);return y?(y.iterate({from:c,to:s,enter:function(t){return d(e,t,h,(function(e){return u(e.from,e.to,c,s)}))},mode:i.vj.IgnoreMounts|i.vj.IgnoreOverlays}),{status:l.Complete,items:h.sort((function(e,t){return e.from-t.from}))}):m.status!==l.Pending?{status:l.Partial,items:m.items}:{items:[],status:l.Pending}}},89551:function(e,t,n){n.d(t,{J:function(){return i},k:function(){return r}});var r=5===(0,n(99618).Z)("ol-bootstrapVersion"),i=function(e){var t=e.bs5,n=e.bs3;return r?t:n}},7585:function(e,t,n){n.d(t,{K8:function(){return a},WP:function(){return l},mr:function(){return o},oT:function(){return u}});var r=n(19034),i=n.n(r);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h:mm a";return i()(e).format(t)}function a(e){return i()(e).calendar()}function l(e){return i()().diff(e,"years")>0?o(e,"D MMMM YYYY, h:mm a"):o(e,"D MMMM, h:mm a")}function u(e){return Date.parse(e)/1e3}i().updateLocale("en",{calendar:{lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",lastWeek:"ddd, Do MMM YY",nextWeek:"ddd, Do MMM YY",sameElse:"ddd, Do MMM YY"}})},73545:function(e,t,n){n(15735),n(58188),n(73439),n(28673),n(6886);var r=n(24991),i=n(75234),o=window.i18n.currentLangCode;r.ZP.use(i.Db).init({lng:o,compatibilityJSON:"v3",react:{useSuspense:!1,bindI18nStore:"added",transSupportBasicHtmlNodes:!1},interpolation:{prefix:"__",suffix:"__",unescapeSuffix:"HTML",skipOnVariables:!0,escapeValue:!1,defaultVariables:{appName:window.ExposedSettings.appName}}});var a=n(88135)("./".concat(o,".json")).then((function(e){r.ZP.addResourceBundle(o,"translation",e)}));t.Z=a},14642:function(e,t,n){n(49228),n(58188),n(27233),n(28673),n(77950),n(74069),n(32501),n(88233),n(34115),n(634),n(20796),n(15735),n(6886),n(26936),n(21850),n(71372);var r=n(92193);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.Z={getColorScheme:function(e,t){return this.isDarkTheme(t)?{cursor:"hsl(".concat(e,", 70%, 50%)"),labelBackgroundColor:"hsl(".concat(e,", 70%, 50%)"),highlightBackgroundColor:"hsl(".concat(e,", 100%, 28%);"),strikeThroughBackgroundColor:"hsl(".concat(e,", 100%, 20%);"),strikeThroughForegroundColor:"hsl(".concat(e,", 100%, 60%);")}:{cursor:"hsl(".concat(e,", 70%, 50%)"),labelBackgroundColor:"hsl(".concat(e,", 70%, 50%)"),highlightBackgroundColor:"hsl(".concat(e,", 70%, 85%);"),strikeThroughBackgroundColor:"hsl(".concat(e,", 70%, 95%);"),strikeThroughForegroundColor:"hsl(".concat(e,", 70%, 40%);")}},isDarkTheme:function(e){var t=e.find(".ace_editor").css("background-color"),n=i(Array.from(t.match(/rgb\(([0-9]+), ([0-9]+), ([0-9]+)\)/)),4),r=(n[0],n[1]),o=n[2],a=n[3];return(r=parseInt(r,10))+(o=parseInt(o,10))+(a=parseInt(a,10))<384},ANONYMOUS_HUE:100,OWN_HUE:200,OWN_HUE_BLOCKED_SIZE:20,TOTAL_HUES:360,getHueForUserId:function(e){if(null==e||"anonymous-user"===e)return this.ANONYMOUS_HUE;if(window.user.id===e)return this.OWN_HUE;var t=this.getHueForId(e);return t>this.OWN_HUE-this.OWN_HUE_BLOCKED_SIZE&&t<this.OWN_HUE+this.OWN_HUE_BLOCKED_SIZE&&(t=(t-=this.OWN_HUE)+this.TOTAL_HUES-this.OWN_HUE_BLOCKED_SIZE),t},getHueForTagId:function(e){return this.getHueForId(e)},getHueForId:function(e){var t=(0,r.M)(e);return parseInt(t.toString().slice(0,8),16)%(this.TOTAL_HUES-2*this.OWN_HUE_BLOCKED_SIZE)}}},43363:function(e,t,n){n.d(t,{A:function(){return E},N:function(){return A}});n(39529),n(31235),n(58188),n(1939),n(28673),n(15735),n(6886),n(95342),n(43430),n(43450);var r=n(1727),i=n(76635),o=n(34097),a=n(99618),l=n(45177),u="CM6-BeforeUpdate",c="CM6-AfterUpdate",s="CM6-DomUpdate",f="CM6-Update",d="CM6-Keypress-Measure",p=0,m=Date.now(),h=!1;try{var y="featureTestMark";performance.mark(y,{startTime:performance.now(),detail:{test:1}}),performance.clearMarks(y);var b="featureTestMeasure";performance.measure(b,{start:performance.now(),detail:{test:1}}),performance.clearMeasures(b),h=!0}catch(e){}var v=!1;function g(){return performance.memory.usedJSHeapSize}try{"memory"in window.performance&&(g(),v=!0)}catch(e){}var j=!1,x=0;try{if(PerformanceObserver.supportedEntryTypes.includes("longtask"))j=!0,new PerformanceObserver((function(e){x+=e.getEntries().length})).observe({entryTypes:["longtask"]})}catch(e){}function w(e){return!!e&&["input","delete"].includes(e.split(".")[0])}function S(e){return!!e&&["input.type","delete.forward","delete.backward"].includes(e)}function E(){if(!h)return{start:function(){},end:function(){}};var e=0,t=0,n=[];return{start:function(e){var t=performance.now();e.forEach((function(e){S(e.annotation(r.YW.userEvent))&&n.push(t)})),performance.mark(u)},end:function(i,o){performance.mark(c);var a=!1;i.forEach((function(n){var i=n.annotation(r.YW.userEvent);w(i)&&(a=!0,++e,S(i)&&++t,performance.measure(f,{start:u,end:c,detail:{userEventType:i,userEventsSinceDomUpdateCount:e}}))})),a&&o.requestMeasure({key:"inputEventCounter",read:function(){performance.mark(s,{detail:{keypressesSinceDomUpdateCount:t}}),e=0,t=0;var r=performance.now();for(var i of n)performance.measure(d,{start:i,end:r});n.length=0}}),p=i[i.length-1].state.doc.length}}}function C(e){return 0===e.length?0:e.reduce((function(e,t){return e+t}),0)/e.length}function I(e){return e.reduce((function(e,t){return Math.max(e,t)}),0)}function k(e){switch(e){case"measure":performance.clearMeasures(f),performance.clearMarks(u),performance.clearMarks(c);break;case"dom":performance.clearMarks(s);break;case"keypress":performance.clearMeasures(d)}}function A(){var e,t=performance.getEntriesByName(f,"measure");k("measure");var n,r=t.filter((function(e){return w(e.detail.userEventType)})),l=r.map((function(e){return e.duration})).sort((function(e,t){return e-t})),u=(0,i.round)(I(l),2),c=(0,i.round)(C(l),2),h=(0,i.round)(function(e){if(0===e.length)return 0;var t=Math.floor(e.length/2);return e.length%2==0?(e[t-1]+e[t])/2:e[t]}(l),2),y=(0,i.round)(0===(n=l).length?0:n[Math.round(.95*(n.length-1))],2),b=I(r.map((function(e){return e.detail.userEventsSinceDomUpdateCount}))),S=(0,o.Z)(),E=Math.floor((Date.now()-m)/1e3),A=v?g():null,O=performance.getEntriesByName(s,"mark");k("dom");var T=0,R=0,Z=0,N=0;for(var P of O){var F=P.detail.keypressesSinceDomUpdateCount;1===F?++R:F>1&&++T,F>Z&&(Z=F),N+=F}var L=(0,i.round)(T/(T+R),4),M=(0,i.round)(N/(T+R),4),D=performance.getEntriesByName(d,"measure").map((function(e){return e.duration})),_=(0,i.round)(C(D),2);k("keypress");var B=null;j&&(B=x,x=0);var H=(null===(e=(0,a.Z)("ol-ExposedSettings"))||void 0===e?void 0:e.sentryRelease)||null;return{max:u,mean:c,median:h,ninetyFifthPercentile:y,maxUserEventsBetweenDomUpdates:b,docLength:p,numberOfEntries:l.length,grammarly:S,sessionLength:E,memory:A,lags:T,nonLags:R,longestLag:Z,meanLagsPerMeasure:L,meanKeypressesPerMeasure:M,meanKeypressPaint:_,longTasks:B,release:H}}window.addEventListener("editor:visual-switch",(function(){k("measure"),k("dom"),k("keypress")})),window._reportCM6Perf=function(){l.c.warn(A())}},28684:function(e,t,n){n.d(t,{BS:function(){return h},K$:function(){return y},kp:function(){return v},ty:function(){return m},xA:function(){return p}});n(61229),n(92215),n(71372),n(9575),n(96264),n(34115),n(634),n(71245),n(34769),n(20796),n(15735),n(28673),n(6886),n(6710),n(58188),n(73439),n(26936),n(77950),n(21850),n(96928);var r=n(91601);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o=["body","headers","method","credentials","swallowAbortError"];function a(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:String(t)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function s(e){var t=f();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t){return g(e,{...t,method:"GET"})}function m(e,t){return g(e,{...t,method:"POST"})}function h(e,t){return g(e,{...t,method:"PUT"})}function y(e,t){return g(e,{...t,method:"DELETE"})}function b(e){var t;if(!e)return"Unknown Error";return null!==(t={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"}[e])&&void 0!==t?t:"Unexpected Error: ".concat(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(FetchError,e);var t,n,r,i=s(FetchError);function FetchError(e,t,n,r,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FetchError),e||(e=b(null==r?void 0:r.status)),(a=i.call(this,e,{statusCode:r?r.status:void 0})).url=t,a.options=n,a.response=r,a.data=o,a}return t=FetchError,(n=[{key:"getErrorMessageKey",value:function(){var e;return null===(e=this.data)||void 0===e||null===(e=e.message)||void 0===e?void 0:e.key}},{key:"getUserFacingMessage",value:function(){var e,t,n,r=null===(e=this.response)||void 0===e?void 0:e.status,i=b(r),o=(null===(t=this.data)||void 0===t||null===(t=t.message)||void 0===t?void 0:t.text)||(null===(n=this.data)||void 0===n?void 0:n.message);if(o&&o!==i)return o;var a={400:"Invalid Request. Please correct the data and try again.",403:"Session error. Please check you have cookies enabled. If the problem persists, try clearing your cache and cookies.",429:"Too many attempts. Please wait for a while and try again."};return r&&a[r]?a[r]:"Something went wrong. Please try again."}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),FetchError}(n.n(r)());function g(e,t){var n=t.body,r=t.headers,i=void 0===r?{}:r,l=t.method,u=void 0===l?"GET":l,c=t.credentials,s=void 0===c?"same-origin":c,f=t.swallowAbortError,d=void 0===f||f,p={...a(t,o),headers:{...i,"Content-Type":"application/json","X-Csrf-Token":window.csrfToken,Accept:"application/json"},credentials:s,method:u};return void 0!==n&&(p.body=JSON.stringify(n)),new Promise((function(t,n){fetch(e,p).then((function(r){return async function(e){var t=e.headers.get("Content-Type");if(!t)return{};if(/application\/json/.test(t))return e.json();if(/text\/plain/.test(t)){return{message:await e.text()}}if(/text\/html/.test(t)){var n=await e.text();if(!/^\s*</.test(n))return{message:n}}return{}}(r).then((function(i){r.ok?t(i):n(new v(r.statusText,e,p,r,i))}),(function(t){d&&"AbortError"===t.name||n(new v("There was an error parsing the response body",e,p,r).withCause(t))}))}),(function(t){d&&"AbortError"===t.name||n(new v("There was an error fetching the JSON",e,p).withCause(t))}))}))}},45643:function(e,t,n){n.d(t,{Vs:function(){return i},eR:function(){return o},xG:function(){return a}});n(15735),n(58188),n(28673),n(6886),n(60523),n(28399),n(88233);var r=n(96227);function i(e,t,n,i){var o={"paywall-type":e};i&&(o.variant=i),r.lW("subscription-funnel","upgraded-free-trial",e),r.BZ("paywall-click",o);var a=new URLSearchParams({itm_campaign:e});t&&a.set("itm_content",t),n&&(n.startedFreeTrial=!0),window.open("/user/subscription/choose-your-plan?".concat(a.toString()))}function o(e,t){var n=window.open();!function(){"function"==typeof ga&&ga("send","event","subscription-funnel","upgraded-plan",e);t&&(t.startedFreeTrial=!0),n.location="/user/subscription"}()}function a(e){r.BZ("paywall-prompt",{"paywall-type":e})}},45225:function(e,t,n){n.r(t);var r={};n.r(r),n.d(r,{default:function(){return Se}});var i={};n.r(i),n.d(i,{CreateFileMode:function(){return Jr},CreateFilePane:function(){return Gr}});var o={};n.r(o),n.d(o,{CreateFileMode:function(){return qr},CreateFilePane:function(){return Xr}});var a={};n.r(a),n.d(a,{default:function(){return oi}});var l={};n.r(l),n.d(l,{TPRFileViewNotOriginalImporter:function(){return po}});var u={};n.r(u),n.d(u,{TPRFileViewInfo:function(){return yo}});var c={};n.r(c),n.d(c,{TPRFileViewRefreshButton:function(){return vo}});var s={};n.r(s),n.d(s,{TPRFileViewRefreshError:function(){return TPRFileViewRefreshError}});var f={};n.r(f),n.d(f,{WritefullPromotion:function(){return ca},default:function(){return sa}});var d={};n.r(d),n.d(d,{default:function(){return ba}});n(48176),n(46181);var p=n(28316),m=(n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850),n(71372),n(2784)),h=n(37025),y=n(23357),b=n(75234),v=n(90350),g=n(86186),j=n(52322);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e){var t=e.reconnectAt,n=e.tryReconnectNow,r=(0,b.$G)().t,i=x((0,m.useState)((0,v.o)(t)),2),o=i[0],a=i[1];return(0,m.useEffect)((function(){var e=window.setInterval((function(){a((0,v.o)(t))}),1e3);return function(){return window.clearInterval(e)}}),[t]),(0,j.jsxs)(g.Z,{bsStyle:"warning",className:"small",children:[(0,j.jsx)("strong",{children:r("lost_connection")})," ",r("reconnecting_in_x_secs",{seconds:o}),".",(0,j.jsx)("button",{id:"try-reconnect-now-button",className:"pull-right",onClick:function(){return n()},children:r("try_now")})]})}var E=n(5446),C=n(45177),I=n(37246),k=n(66624);function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(){var e=(0,b.$G)().t,t=(0,E.Km)(),n=t.connectionState,r=t.isConnected,i=t.isStillReconnecting,o=t.tryReconnectNow,a=t.secondsUntilReconnect,l=(0,k.I)(),u=A((0,I.Z)("sync_tex_error"),1)[0];return l?(0,p.createPortal)((0,j.jsxs)(j.Fragment,{children:[n.forceDisconnected?(0,j.jsx)(g.Z,{bsStyle:"danger",className:"small",children:(0,j.jsx)("strong",{children:e("disconnected")})}):null,n.reconnectAt?(0,j.jsx)(S,{reconnectAt:n.reconnectAt,tryReconnectNow:o}):null,i?(0,j.jsx)(g.Z,{bsStyle:"warning",className:"small",children:(0,j.jsxs)("strong",{children:[e("reconnecting"),""]})}):null,u?(0,j.jsxs)(g.Z,{bsStyle:"warning",className:"small",children:[(0,j.jsx)("strong",{children:e("synctex_failed")}),(0,j.jsx)("a",{href:"/learn/how-to/SyncTeX_Errors",target:"_blank",id:"synctex-more-info-button",className:"alert-link-as-btn pull-right",children:e("more_info")})]}):null,n.inactiveDisconnect||n.readyState===WebSocket.CLOSED&&("rate-limited"===n.error||"unable-to-connect"===n.error)&&!a()?(0,j.jsx)(g.Z,{bsStyle:"warning",className:"small",children:(0,j.jsx)("strong",{children:e("editor_disconected_click_to_reconnect")})}):null,C.j?(0,j.jsx)(g.Z,{bsStyle:"warning",className:"small",children:(0,j.jsxs)("strong",{children:["Connected: ",r.toString()]})}):null]}),l):null}var R=n(95641),Z=(n(34769),n(12524)),N=n.n(Z),P=["children","resizable","onDoubleClick"];function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var D=function(e){var t=e.children,n=e.resizable,r=void 0===n||n,i=e.onDoubleClick,o=M(e,P),a=(0,b.$G)().t,l=F((0,m.useState)(!1),2),u=l[0],c=l[1];return(0,m.useEffect)((function(){if(u){var e=function(){var e;null===(e=o.onDragging)||void 0===e||e.call(o,!0)};return document.addEventListener("pointermove",e),function(){document.removeEventListener("pointermove",e)}}var t;null===(t=o.onDragging)||void 0===t||t.call(o,!1)}),[u,o]),(0,j.jsx)(R.OT,{disabled:!r&&!u,...o,onDragging:function(e){(u||r)&&c(e)},children:(0,j.jsx)("div",{className:N()("horizontal-resize-handle",{"horizontal-resize-handle-enabled":r}),title:a("resize"),onDoubleClick:function(){return null==i?void 0:i()},children:t})})},_=n(39493),B=n(28865),H=n(91661),z=n(96227),U=n(13980),J=n.n(U),G=n(10280),q=(n(73439),n(84050)),X=n(63290),V=n(28581),K=n(49169),W=n(72526),Y=n(47481),Q=n(28684),$=n(96931);function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ne=(0,m.createContext)(void 0),re=function(e){var t,n,r,i=e.children,o=(0,X.SE)(),a=o.first_name,l=o.last_name,u=(0,W.d)(),c=u._id,s=u.name,f=u.rootDocId,d=(0,Y.O)().hasFolders,p=(0,$.IM)(),h=(0,q._i)().cobranding,y=(0,V.Im)(),b=y.pdfDownloadUrl,v=y.pdfUrl,g=y.logEntries,x=(0,V.Im)().uncompiled;h&&(h.publishGuideHtml||h.partner)?h.brandedMenu?(n="/journals/".concat(h.brandId),t="branded"):h.partner?(n="/journals/".concat(h.brandId),t="export",r=h.brandVariationId):(n="/journals/".concat(h.brandId),t="guide",r=h.brandVariationId):(n="/journals",t="basic");var w=ee((0,m.useState)(null),2),S=w[0],E=w[1],C=ee((0,m.useState)(null),2),I=C[0],k=C[1],A=(0,K.Z)(),O=(0,m.useCallback)((function(){var e="/latest_template/".concat(c);return Promise.all([(0,Q.xA)(e),(0,Q.xA)(n)]).then((function(e){var t=ee(e,2),n=t[0],r=t[1];if(A.current){var i=n.title?{title:n.title}:{};i.description=n.description,i.author=n.author,i.license=n.license,k(n),E(r)}}))}),[A,n,c]),T=(0,m.useCallback)((function(){var e=f;if(p.editorManager.getCurrentDocId()===e)return!1;var t=p.editorManager.getCurrentDocValue();if(null==t)return!1;for(var n of t.split("\n"))if(/^[^%]*\\documentclass/.test(n))return!0;return!1}),[p.editorManager,f]),R={entries:S,initialShown:t,brandVariationId:r,fetchData:O,initParams:{projectId:c,pdfUrl:v?b:void 0,logs:g,uncompiled:x,hasFolders:d,rootDocOverridden:T(),firstName:a,lastName:l,title:s,...I}};return(0,j.jsx)(ne.Provider,{value:R,children:i})};var ie=n(67873),oe=n(63584),ae=n(11685);n(96928),n(61229),n(92215),n(9575),n(96264),n(71245);function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ce(r.key),r)}}function ce(e){var t=function(e,t){if("object"!=le(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==le(t)?t:String(t)}function se(e,t){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},se(e,t)}function fe(e){var t=de();return function(){var n,r=pe(e);if(t){var i=pe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function de(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(de=function(){return!!e})()}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}var me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&se(e,t)}(DestinationsError,e);var t,n,r,i=fe(DestinationsError);function DestinationsError(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DestinationsError),i.apply(this,arguments)}return t=DestinationsError,(n=[{key:"render",value:function(){return(0,j.jsx)("span",{children:(0,j.jsxs)("p",{children:["Sorry, we had trouble retrieving our list of submission destinations. If you give us a minute, retry, and still find this error, please notify support at"," ",(0,j.jsx)("a",{href:"mailto:support@overleaf.com?subject=Unable to submit",children:"support@overleaf.com"})]})})}}])&&ue(t.prototype,n),r&&ue(t,r),Object.defineProperty(t,"prototype",{writable:!1}),DestinationsError}(m.Component);function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var be=(0,m.lazy)((function(){return n.e(3229).then(n.bind(n,59516))}));function ve(e){var t,r=e.handleHide,i=(0,b.$G)().t,o=function(){var e=(0,m.useContext)(ne);if(!e)throw new Error("usePublishContext is only available inside PublishProvider");return e}(),a=o.entries,l=o.initialShown,u=o.initParams,c=o.fetchData,s=o.brandVariationId,f=he((0,m.useState)(!0),2),d=f[0],p=f[1],h=he((0,m.useState)(!1),2),y=h[0],v=h[1],g=he((0,m.useState)(!1),2),x=g[0],w=g[1],S=(0,K.Z)();function E(){r(),p(!1)}return(0,m.useEffect)((function(){n.e(3229).then(n.bind(n,59516)).catch((function(){return w(!0)})),y||(c().catch((function(){S.current&&w(!0)})),v(!0))}),[S,y,c]),t=a&&null!=u&&u.logs?(0,j.jsx)(m.Suspense,{fallback:(0,j.jsx)(ge,{}),children:(0,j.jsx)(be,{entries:a,initialShown:l,initParams:u,brandVariationId:s})}):x?(0,j.jsx)(me,{}):(0,j.jsx)(ge,{}),(0,j.jsxs)(ae.Z,{bsSize:"large",show:d,onHide:E,children:[(0,j.jsx)(ie.Z.Header,{closeButton:!0,children:(0,j.jsxs)(ie.Z.Title,{children:[" ",i("submit_title")," "]})}),(0,j.jsx)(ie.Z.Body,{children:(0,j.jsxs)("div",{className:"modal-body-publish",children:[t," "]})}),(0,j.jsx)(ie.Z.Footer,{children:(0,j.jsx)(oe.Z,{bsStyle:null,className:"btn-secondary",onClick:E,children:i("close")})})]})}function ge(){var e=(0,b.$G)().t;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(G.Z,{type:"refresh",fw:!0,spin:!0}),"",(0,j.jsxs)("span",{children:[e("loading"),""]})]})}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function we(e){var t=e.cobranding,n=(0,b.$G)().t,r=je((0,m.useState)(!1),2),i=r[0],o=r[1];var a=N()("btn","btn-full-height");return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"toolbar-item",children:(0,j.jsxs)("button",{id:"publishButton",className:a,onClick:function(){z.BZ("navigation-clicked-submit"),o(!0)},children:[(0,j.jsx)(G.Z,{type:"globe",fw:!0}),null!=t&&t.submitBtnHtml?(0,j.jsx)("p",{className:"toolbar-label toolbar-label-multiline",dangerouslySetInnerHTML:{__html:t.submitBtnHtml}}):(0,j.jsx)("p",{className:"toolbar-label",children:n("submit_title")})]})}),i&&(0,j.jsx)(re,{children:(0,j.jsx)(ve,{handleHide:function(){o(!1)}})})]})}we.propTypes={cobranding:J().shape({submitBtnHtml:J().string})};var Se=(0,y.Z)(we);function Ee(e){var t=e.onClick,n=(0,b.$G)().t;return(0,j.jsx)("div",{className:"toolbar-item",children:(0,j.jsxs)("button",{className:"btn btn-full-height",onClick:t,children:[(0,j.jsx)(G.Z,{type:"bars",fw:!0,className:"editor-menu-icon"}),(0,j.jsx)("p",{className:"toolbar-label",children:n("menu")})]})})}Ee.propTypes={onClick:J().func.isRequired};var Ce=Ee;function Ie(e){var t=e.brandVariationHomeUrl,n=e.brandVariationName,r=e.logoImgUrl;return(0,j.jsx)("a",{className:"btn btn-full-height header-cobranding-logo-container",href:t,target:"_blank",rel:"noreferrer noopener",children:(0,j.jsx)("img",{src:r,className:"header-cobranding-logo",alt:n})})}Ie.propTypes={brandVariationHomeUrl:J().string.isRequired,brandVariationName:J().string.isRequired,logoImgUrl:J().string.isRequired};var ke=Ie,Ae=n(24958);var Oe=function(){var e=(0,b.$G)().t;return(0,j.jsx)(Ae.Z,{id:"back-to-projects",description:e("back_to_your_projects"),overlayProps:{placement:"right"},children:(0,j.jsx)("div",{className:"toolbar-item",children:(0,j.jsx)("a",{className:"btn btn-full-height",draggable:"false",href:"/project",onClick:function(){z.BZ("navigation-clicked-home")},children:(0,j.jsx)(G.Z,{type:"home",fw:!0,accessibilityLabel:e("back_to_your_projects")})})})})};var Te=function(){var e=(0,b.$G)().t;return(0,j.jsx)("a",{className:"toolbar-header-upgrade-prompt btn btn-primary btn-xs",href:"/user/subscription/plans?itm_referrer=editor-header-upgrade-prompt",target:"_blank",onClick:function(e){z.lW("subscription-funnel","code-editor","upgrade"),z.BZ("upgrade-button-click",{source:"code-editor"})},children:e("upgrade")})};function Re(e){var t=e.chatIsOpen,n=e.unreadMessageCount,r=e.onClick,i=(0,b.$G)().t,o=N()("btn","btn-full-height","btn-full-height-no-border",{active:t}),a=n>0;return(0,j.jsx)("div",{className:"toolbar-item",children:(0,j.jsxs)("button",{className:o,onClick:r,children:[(0,j.jsx)(G.Z,{type:"comment",fw:!0,className:a?"bounce":""}),a&&(0,j.jsx)("span",{className:"label label-info",children:n}),(0,j.jsx)("p",{className:"toolbar-label",children:i("chat")})]})})}Re.propTypes={chatIsOpen:J().bool,unreadMessageCount:J().number.isRequired,onClick:J().func.isRequired};var Ze=Re,Ne=n(13253),Pe=n(82752);var Fe=function(){var e=(0,b.$G)().t;return(0,j.jsx)(G.Z,{type:"check",fw:!0,accessibilityLabel:e("selected")})},Le=n(15300),Me=n(32687),De=["checkmark","icon","text"];function _e(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Be(){return(0,j.jsx)(G.Z,{type:"",fw:!0})}function He(){return(0,j.jsx)(G.Z,{type:"refresh",fw:!0,spin:!0})}function ze(){return(0,j.jsx)(G.Z,{type:"columns",fw:!0})}function Ue(){return(0,j.jsx)(G.Z,{type:"columns",fw:!0})}function Je(){return(0,j.jsx)(G.Z,{type:"window-restore",fw:!0})}function Ge(){return(0,j.jsx)(G.Z,{type:"code",fw:!0})}function qe(){return(0,j.jsx)(G.Z,{type:"file-pdf-o",fw:!0})}function Xe(e){var t=e.iconFor,n=e.pdfLayout,r=e.view;return"detacher"===e.detachRole||"history"===r?(0,j.jsx)(Be,{}):"editorOnly"!==t||"flat"!==n||"editor"!==r&&"file"!==r?"pdfOnly"===t&&"flat"===n&&"pdf"===r||"sideBySide"===t&&"sideBySide"===n?(0,j.jsx)(Fe,{}):(0,j.jsx)(Be,{}):(0,j.jsx)(Fe,{})}function Ve(e){var t=e.checkmark,n=e.icon,r=e.text,i=_e(e,De);return(0,j.jsx)(Ne.Z,{...i,children:(0,j.jsx)("div",{className:"layout-menu-item",children:(0,j.jsxs)("div",{className:"layout-menu-item-start",children:[(0,j.jsx)("div",{children:t}),(0,j.jsx)("div",{children:n}),(0,j.jsx)("div",{children:r})]})})})}function Ke(){var e=(0,b.$G)().t;return(0,j.jsx)(Ae.Z,{id:"detach-disabled",description:e("your_browser_does_not_support_this_feature"),overlayProps:{placement:"left"},children:(0,j.jsx)(Ve,{disabled:!0,checkmark:(0,j.jsx)(Be,{}),icon:(0,j.jsx)(Je,{}),text:e("pdf_in_separate_tab")})})}function We(){var e=(0,b.$G)().t,t=(0,_.l5)(),n=t.reattach,r=t.detach,i=t.detachIsLinked,o=t.detachRole,a=t.changeLayout,l=t.view,u=t.pdfLayout,c=(0,m.useCallback)((function(){r(),z.BZ("project-layout-detach")}),[r]),s=(0,m.useCallback)((function(){"detacher"===o&&(n(),z.BZ("project-layout-reattach"))}),[o,n]);(0,Me.Z)("ui:pdf-open",s);var f=(0,m.useCallback)((function(e,t){s(),a(e,t),z.BZ("project-layout-change",{layout:e,view:t})}),[a,s]),d=!i&&"detacher"===o;return(0,j.jsxs)(j.Fragment,{children:[d&&(0,j.jsx)("div",{"aria-live":"assertive",className:"sr-only",children:e("layout_processing")}),(0,j.jsxs)(Le.Z,{id:"layout-dropdown",onMainButtonClick:function(){z.BZ("navigation-clicked-layout")},className:"toolbar-item layout-dropdown",pullRight:!0,children:[(0,j.jsxs)(Pe.Z.Toggle,{className:"btn-full-height",bsStyle:"link",children:[d?(0,j.jsx)(He,{}):(0,j.jsx)(ze,{}),(0,j.jsx)("span",{className:"toolbar-label",children:e("layout")})]}),(0,j.jsxs)(Pe.Z.Menu,{className:"layout-dropdown-list",children:[(0,j.jsx)(Ve,{onSelect:function(){return f("sideBySide")},checkmark:(0,j.jsx)(Xe,{iconFor:"sideBySide",pdfLayout:u,view:l,detachRole:o}),icon:(0,j.jsx)(Ue,{}),text:e("editor_and_pdf")}),(0,j.jsx)(Ve,{onSelect:function(){return f("flat","editor")},checkmark:(0,j.jsx)(Xe,{iconFor:"editorOnly",pdfLayout:u,view:l,detachRole:o}),icon:(0,j.jsx)(Ge,{}),text:(0,j.jsx)(b.cC,{i18nKey:"editor_only_hide_pdf",components:[(0,j.jsx)("span",{className:"subdued"},"editor_only_hide_pdf")]})}),(0,j.jsx)(Ve,{onSelect:function(){return f("flat","pdf")},checkmark:(0,j.jsx)(Xe,{iconFor:"pdfOnly",pdfLayout:u,view:l,detachRole:o}),icon:(0,j.jsx)(qe,{}),text:(0,j.jsx)(b.cC,{i18nKey:"pdf_only_hide_editor",components:[(0,j.jsx)("span",{className:"subdued"},"pdf_only_hide_editor")]})}),"BroadcastChannel"in window?(0,j.jsx)(Ve,{onSelect:function(){return c()},checkmark:"detacher"===o?i?(0,j.jsx)(Fe,{}):(0,j.jsx)(He,{}):(0,j.jsx)(Be,{}),icon:(0,j.jsx)(Je,{}),text:e("pdf_in_separate_tab")}):(0,j.jsx)(Ke,{})]})]})]})}var Ye=(0,m.memo)(We),Qe=(n(43450),n(18178),n(56556));function $e(e){return function(e){if(Array.isArray(e))return et(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return et(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tt(e){var t=e.onlineUsers,n=e.goToUser,r=(0,b.$G)().t;return t.length>=4?(0,j.jsxs)(Le.Z,{id:"online-users",className:"online-users",pullRight:!0,children:[(0,j.jsx)(rt,{bsRole:"toggle",onlineUserCount:t.length}),(0,j.jsxs)(Pe.Z.Menu,{children:[(0,j.jsx)(Ne.Z,{header:!0,children:r("connected_users")}),t.map((function(e,t){return(0,j.jsx)(Ne.Z,{as:"button",eventKey:e,onSelect:n,children:(0,j.jsx)(nt,{user:e,onClick:n,showName:!0})},"".concat(e.user_id,"_").concat(t))}))]})]}):(0,j.jsx)("div",{className:"online-users",children:t.map((function(e,t){return(0,j.jsx)(Ae.Z,{id:"online-user",description:e.name,overlayProps:{placement:"bottom",trigger:["hover","focus"]},children:(0,j.jsx)("span",{children:(0,j.jsx)(nt,{user:e,onClick:n})})},"".concat(e.user_id,"_").concat(t))}))})}function nt(e){var t=e.user,n=e.showName,r=e.onClick,i="hsl(".concat((0,Qe.V)(t.user_id),", 70%, 50%)");var o=$e(t.name)[0];return(0,j.jsxs)("span",{onClick:function(){r(t)},children:[(0,j.jsx)("span",{className:"online-user",style:{backgroundColor:i},children:o}),n&&t.name]})}tt.propTypes={onlineUsers:J().arrayOf(J().shape({user_id:J().string.isRequired,name:J().string.isRequired})).isRequired,goToUser:J().func.isRequired},nt.propTypes={user:J().shape({user_id:J().string.isRequired,name:J().string.isRequired}),showName:J().bool,onClick:J().func.isRequired};var rt=m.forwardRef((function(e,t){var n=(0,b.$G)().t;return(0,j.jsx)(Ae.Z,{id:"connected-users",description:n("connected_users"),overlayProps:{placement:"left"},children:(0,j.jsxs)("button",{className:"btn online-user online-user-multi",onClick:e.onClick,children:[(0,j.jsx)("strong",{children:e.onlineUserCount}),(0,j.jsx)(G.Z,{type:"users",fw:!0})]})})}));rt.displayName="DropDownToggleButton",rt.propTypes={onlineUserCount:J().number.isRequired,onClick:J().func};var it=tt;function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return at(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lt=function(e){var t=e.projectName,n=e.hasRenamePermissions,r=e.onChange,i=e.className,o=(0,b.$G)().t,a=ot((0,m.useState)(!1),2),l=a[0],u=a[1],c=n&&!l,s=ot((0,m.useState)(t),2),f=s[0],d=s[1],p=(0,m.useRef)(null);function h(){c&&(d(t),u(!0))}function y(){u(!1),r(f)}return(0,m.useEffect)((function(){var e;l&&(null===(e=p.current)||void 0===e||e.select())}),[l]),(0,j.jsxs)("div",{className:N()("project-name",i),children:[!l&&(0,j.jsx)("span",{className:"name",onDoubleClick:h,children:t}),l&&(0,j.jsx)("input",{ref:p,type:"text",className:"form-control",onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),y())},onChange:function(e){d(e.target.value)},onBlur:function(){l&&y()},value:f}),c&&(0,j.jsx)(Ae.Z,{id:"online-user",description:o("rename"),overlayProps:{placement:"bottom",trigger:["hover","focus"]},children:(0,j.jsx)("a",{className:"rename",role:"button",onClick:h,children:(0,j.jsx)(G.Z,{type:"pencil",fw:!0})})})]})};function ut(e){var t=e.trackChangesIsOpen,n=e.disabled,r=e.onMouseDown,i=(0,b.$G)().t,o=N()("btn","btn-full-height",{active:t&&!n,disabled:n});return(0,j.jsx)("div",{className:"toolbar-item",children:(0,j.jsxs)("button",{disabled:n,className:o,onMouseDown:r,children:[(0,j.jsx)("i",{className:"review-icon"}),(0,j.jsx)("p",{className:"toolbar-label",children:i("review")})]})})}ut.propTypes={trackChangesIsOpen:J().bool,disabled:J().bool,onMouseDown:J().func.isRequired};var ct=ut;function st(e){var t=e.onClick,n=(0,b.$G)().t;return(0,j.jsx)("div",{className:"toolbar-item",children:(0,j.jsxs)("button",{className:"btn btn-full-height",onClick:t,children:[(0,j.jsx)(G.Z,{type:"history",fw:!0}),(0,j.jsx)("p",{className:"toolbar-label",children:n("history")})]})})}st.propTypes={onClick:J().func.isRequired};var ft=st;function dt(e){var t=e.onClick,n=(0,b.$G)().t;return(0,j.jsx)("div",{className:"toolbar-item",children:(0,j.jsxs)("button",{className:"btn btn-full-height",onClick:t,children:[(0,j.jsx)(G.Z,{type:"group",fw:!0}),(0,j.jsx)("p",{className:"toolbar-label",children:n("share")})]})})}dt.propTypes={onClick:J().func.isRequired};var pt=dt,mt=n(34557);var ht=function(e){var t=e.onClick,n=(0,b.$G)().t;return(0,j.jsxs)(oe.Z,{bsSize:"sm",bsStyle:null,onClick:t,className:"back-to-editor-btn",children:[(0,j.jsx)(mt.Z,{type:"arrow_back",className:"toolbar-btn-secondary-icon"}),(0,j.jsx)("p",{className:"toolbar-label",children:n("back_to_editor")})]})},yt={import:r,path:"/overleaf/services/web/modules/publish-modal/frontend/js/components/publish-toolbar-button"},bt=null==yt?void 0:yt.import.default,vt=m.memo((function(e){var t=e.cobranding,n=e.onShowLeftMenuClick,r=e.chatIsOpen,i=e.toggleChatOpen,o=e.reviewPanelOpen,a=e.toggleReviewPanelOpen,l=e.historyIsOpen,u=e.toggleHistoryOpen,c=e.unreadMessageCount,s=e.onlineUsers,f=e.goToUser,d=e.isRestrictedTokenMember,p=e.hasPublishPermissions,m=e.projectName,h=e.renameProject,y=e.hasRenamePermissions,v=e.openShareModal,g=e.trackChangesVisible,x=(0,b.$G)().t,w=p&&bt;return(0,j.jsxs)("header",{className:"toolbar toolbar-header toolbar-with-labels",role:"navigation","aria-label":x("project_layout_sharing_submission"),children:[(0,j.jsxs)("div",{className:"toolbar-left",children:[(0,j.jsx)(Ce,{onClick:n}),t&&t.logoImgUrl&&(0,j.jsx)(ke,{...t}),(0,j.jsx)(Oe,{})]}),window.showUpgradePrompt&&(0,j.jsx)(Te,{}),(0,j.jsx)(lt,{className:"toolbar-center",projectName:m,hasRenamePermissions:y,onChange:h}),(0,j.jsxs)("div",{className:"toolbar-right",children:[(0,j.jsx)(it,{onlineUsers:s,goToUser:f}),l?(0,j.jsx)(ht,{onClick:u}):(0,j.jsxs)(j.Fragment,{children:[g&&(0,j.jsx)(ct,{onMouseDown:a,disabled:l,trackChangesIsOpen:o}),(0,j.jsx)(pt,{onClick:v}),w&&(0,j.jsx)(bt,{cobranding:t}),!d&&(0,j.jsx)(ft,{onClick:u}),(0,j.jsx)(Ye,{}),!d&&(0,j.jsx)(Ze,{chatIsOpen:r,onClick:i,unreadMessageCount:c})]})]})]})}));vt.propTypes={onShowLeftMenuClick:J().func.isRequired,cobranding:J().object,chatIsOpen:J().bool,toggleChatOpen:J().func.isRequired,reviewPanelOpen:J().bool,toggleReviewPanelOpen:J().func.isRequired,historyIsOpen:J().bool,toggleHistoryOpen:J().func.isRequired,unreadMessageCount:J().number.isRequired,onlineUsers:J().array.isRequired,goToUser:J().func.isRequired,isRestrictedTokenMember:J().bool,hasPublishPermissions:J().bool,projectName:J().string.isRequired,renameProject:J().func.isRequired,hasRenamePermissions:J().bool,openShareModal:J().func.isRequired,trackChangesVisible:J().bool};var gt=vt,jt=n(63551);function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function St(e){return e?"open":"close"}var Et=m.memo((function(e){var t=e.onlineUsersArray,n=e.openDoc,r=e.openShareProjectModal,i=(0,W.d)(),o=i.name,a=i.features.trackChangesVisible,l=(0,q._i)(),u=l.cobranding,c=l.isRestrictedTokenMember,s=l.renameProject,f=l.permissionsLevel,d=(0,_.l5)(),p=d.chatIsOpen,h=d.setChatIsOpen,y=d.reviewPanelOpen,b=d.setReviewPanelOpen,v=d.view,g=d.setView,x=d.setLeftMenuShown,w=(0,jt.mx)(),S=w.markMessagesAsRead,E=w.unreadMessageCount,C=(0,m.useCallback)((function(){p||S(),z.BZ("navigation-clicked-chat",{action:St(!p)}),h(!p)}),[p,h,S]),I=(0,m.useCallback)((function(e){e.preventDefault(),z.BZ("navigation-clicked-review",{action:St(!y)}),b((function(e){return!e}))}),[y,b]),k=xt((0,m.useState)(p),2),A=k[0],O=k[1],T=(0,m.useCallback)((function(){var e="history"===v?"close":"open";z.BZ("navigation-clicked-history",{action:e}),p&&"open"===e&&(O(!0),C()),A&&"close"===e&&(O(!1),C()),g("history"===v?"editor":"history")}),[v,p,A,g,C]),R=(0,m.useCallback)((function(){z.BZ("navigation-clicked-share"),r()}),[r]),Z=(0,m.useCallback)((function(){z.BZ("navigation-clicked-menu"),x((function(e){return!e}))}),[x]),N=(0,m.useCallback)((function(e){e.doc&&"number"==typeof e.row&&n(e.doc,{gotoLine:e.row+1})}),[n]);return(0,j.jsx)(gt,{cobranding:u,onShowLeftMenuClick:Z,chatIsOpen:p,unreadMessageCount:E,toggleChatOpen:C,reviewPanelOpen:y,toggleReviewPanelOpen:I,historyIsOpen:"history"===v,toggleHistoryOpen:T,onlineUsers:t,goToUser:N,isRestrictedTokenMember:c,hasPublishPermissions:"owner"===f||"readAndWrite"===f,projectName:o,renameProject:s,hasRenamePermissions:"owner"===f,openShareModal:R,trackChangesVisible:a})})),Ct=n(72891);function It(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var At=function(){var e=It((0,m.useState)(!1),2),t=e[0],n=e[1],r=(0,B.uS)().onlineUsersArray,i=(0,H.QA)().openDoc,o=(0,m.useCallback)((function(){n(!1)}),[]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Et,{onlineUsersArray:r,openDoc:i,openShareProjectModal:function(){z.xQ("ide-open-share-modal-once"),n(!0)}}),(0,j.jsx)(Ct.Z,{show:t,handleHide:o})]})};var Ot=function(e){var t=e.resetUnreadMessages,n=e.sendMessage,r=(0,b.$G)().t;return(0,j.jsxs)("form",{className:"new-message",children:[(0,j.jsx)("label",{htmlFor:"chat-input",className:"sr-only",children:r("your_message_to_collaborators")}),(0,j.jsx)("textarea",{id:"chat-input",placeholder:"".concat(r("your_message_to_collaborators"),""),onKeyDown:function(e){var t=e.nativeEvent.isComposing;if("Enter"===e.key&&!t){e.preventDefault();var r=e.target;n(r.value),window.setTimeout((function(){var e;r.blur(),null===(e=r.closest("form"))||void 0===e||e.reset(),r.focus()}),0)}},onClick:t})]})},Tt=n(76635),Rt=n.n(Tt);function Zt(e){var t=e.atEnd,n=e.children,r=e.className,i=void 0===r?"":r,o=e.fetchData,a=e.itemCount,l=e.isLoading,u=(0,m.useRef)(null),c=(0,m.useRef)(0);function s(){u.current.scrollTop=u.current.scrollHeight-u.current.clientHeight-c.current}return(0,m.useLayoutEffect)(s,[a]),(0,m.useEffect)((function(){var e=Rt().debounce(s,400);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,j.jsx)("div",{ref:u,onScroll:function(e){var n,r;n=u.current.scrollHeight-u.current.scrollTop-u.current.clientHeight,c.current=n,e.target===e.currentTarget&&(r=u.current.children[0].clientHeight<u.current.clientHeight,!(t||l||r)&&u.current.scrollTop<30&&o())},className:"infinite-scroll ".concat(i),children:n})}Zt.propTypes={atEnd:J().bool,children:J().element.isRequired,className:J().string,fetchData:J().func.isRequired,itemCount:J().number.isRequired,isLoading:J().bool};var Nt=Zt;function ChatFallbackError(e){var t=e.reconnect,n=(0,b.$G)().t;return(0,j.jsx)("aside",{className:"chat",children:(0,j.jsxs)("div",{className:"chat-error",children:[(0,j.jsx)(g.Z,{bsStyle:"danger",children:n("chat_error")}),t&&(0,j.jsx)("p",{className:"text-center",children:(0,j.jsx)(oe.Z,{bsStyle:"info",type:"button",onClick:t,children:n("reconnect")})})]})})}ChatFallbackError.propTypes={reconnect:J().any};var Pt=ChatFallbackError,Ft=n(28500);function Lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Dt=(0,m.lazy)((function(){return Promise.all([n.e(3546),n.e(551)]).then(n.bind(n,60551))})),_t=m.memo((function(){var e=(0,b.$G)().t,t=(0,_.l5)().chatIsOpen,n=(0,X.SE)(),r=(0,jt.mx)(),i=r.status,o=r.messages,a=r.initialMessagesLoaded,l=r.atEnd,u=r.loadInitialMessages,c=r.loadMoreMessages,s=r.reset,f=r.sendMessage,d=r.markMessagesAsRead,p=r.error;(0,m.useEffect)((function(){t&&!a&&u()}),[t,u,a]);var h="pending"!==i&&0===o.length,y=o.reduce((function(e,t){return e+t.contents.length}),0),v=Lt((0,m.useState)(t),2),g=v[0],x=v[1];if((0,m.useEffect)((function(){t&&x(!0)}),[t]),p){if(p instanceof Q.kp)return(0,j.jsx)(Pt,{reconnect:s});throw p}return n&&g?(0,j.jsxs)("aside",{className:"chat",children:[(0,j.jsx)(Nt,{atEnd:l,className:"messages",fetchData:c,isLoading:"pending"===i,itemCount:y,children:(0,j.jsxs)("div",{children:[(0,j.jsx)("h2",{className:"sr-only",children:e("chat")}),(0,j.jsxs)(m.Suspense,{fallback:(0,j.jsx)(Ft.Z,{delay:500}),children:["pending"===i&&(0,j.jsx)(Ft.Z,{delay:500}),h&&(0,j.jsx)(Bt,{}),(0,j.jsx)(Dt,{messages:o,userId:n.id,resetUnreadMessages:d})]})]})}),(0,j.jsx)(Ot,{resetUnreadMessages:d,sendMessage:f})]}):null}));function Bt(){var e=(0,b.$G)().t;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"no-messages text-center small",children:e("no_messages")}),(0,j.jsxs)("div",{className:"first-message text-center",children:[e("send_first_message"),(0,j.jsx)("br",{}),(0,j.jsx)(G.Z,{type:"arrow-down"})]})]})}var Ht=(0,y.Z)(_t,Pt);function zt(e){var t=e.id,n=e.isOpen,r=e.setIsOpen,i=e.togglerType,o=e.tooltipWhenOpen,a=e.tooltipWhenClosed,l=n?o:a;return(0,j.jsx)(Ae.Z,{id:t,description:l,overlayProps:{placement:"east"===i?"left":"right"},children:(0,j.jsx)("button",{className:N()("custom-toggler","custom-toggler-".concat(i),{"custom-toggler-open":n,"custom-toggler-closed":!n}),"aria-label":l,title:"",onClick:function(){return r(!n)}})})}function Ut(){return(0,j.jsx)("aside",{id:"history-file-tree",className:"ide-react-editor-sidebar history-file-tree"})}function Jt(e){var t=(0,b.$G)().t;return(0,j.jsx)(R.OT,{...e,children:(0,j.jsx)("div",{className:N()("vertical-resize-handle",{"vertical-resize-handle-enabled":!e.disabled}),title:t("resize")})})}var Gt=n(57743),qt=n(8596),Xt=n(64733),Vt=n(27715),Kt=n(61985),Wt=(n(93244),n(95342),n(5247)),Yt=n(74450),Qt=n(49243),$t=n(79412),en=n(48493),tn=n(84153),nn=n(24272),rn=n(38113),on=n(47897);function an(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ln(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var un="ENTITY",cn=function(e){var t=e.fileTreeContainer,n=e.children,r=(0,m.useMemo)((function(){return{rootElement:t}}),[t]);return(0,j.jsx)(Yt.W,{backend:en.PD,options:r,children:n})};function sn(e){var t=(0,b.$G)().t,n=(0,q._i)().permissionsLevel,r=(0,Y.O)().fileTreeData,i=(0,Kt.nF)(),o=i.selectedEntityIds,a=i.isRootFolderSelected,l=(0,Vt.Z)().finishMoving,u=an((0,m.useState)(!0),2),c=u[0],s=u[1],f=(0,Qt.c)({type:un,item:function(){var n=function(e,t){return e.size>1&&e.has(t)?new Set(e):new Set([t])}(a?new Set:o,e),i=(0,rn.gl)(r,n);return{type:un,title:dn(i,t),forbiddenFolderIds:pn(i),draggedEntityIds:n}},canDrag:function(){return"readOnly"!==n&&c},end:function(e,t){if(t.didDrop()){var n=t.getDropResult();n&&l(n.targetEntityId,e.draggedEntityIds)}}}),d=an(f,3),p=d[1],h=d[2];return(0,m.useEffect)((function(){h((0,tn.r)())}),[h]),{dragRef:p,setIsDraggable:s}}function fn(e){var t=(0,Vt.Z)(),n=t.setDroppedFiles,r=t.startUploadingDocOrFile,i=an((0,$t.L)({accept:[un,nn.FILE],canDrop:function(t,n){return!!n.isOver({shallow:!0})&&!(t.type===un&&t.forbiddenFolderIds.has(e))},drop:function(t,i){if(!i.didDrop())return t.type===un?{targetEntityId:e}:void(0,Wt.Z)(t).then((function(e){return e.filter((function(e){return(0,on.s)(e.name,e.relativePath)}))})).then((function(t){n({files:t,targetFolderId:e}),r()}))},collect:function(e){return{isOver:e.canDrop()}}}),2),o=i[0].isOver;return{dropRef:i[1],isOver:o}}function dn(e,t){return 1===e.size?Array.from(e)[0].entity.name:t("n_items",{count:e.size})}function pn(e){var t=Array.from(e).filter((function(e){return"folder"===e.type})).map((function(e){return e.entity})),n=new Set(t);return(0,rn.mz)(n)}var mn=function(e){var t=e.refProviders,n=e.reindexReferences,r=e.setRefProviderEnabled,i=e.setStartedFreeTrial,o=e.onSelect,a=e.fileTreeContainer,l=e.children;return(0,j.jsx)(Xt.Q,{refProviders:t,setRefProviderEnabled:r,setStartedFreeTrial:i,reindexReferences:n,children:(0,j.jsx)(Kt.oJ,{onSelect:o,children:(0,j.jsx)(Vt.P,{reindexReferences:n,children:(0,j.jsx)(cn,{fileTreeContainer:a,children:l})})})})};function hn(e){var t,n=e.isOver,r=e.isDragging,i=e.item,o=e.clientOffset,a=(0,m.useRef)();return(0,j.jsx)("div",{ref:a,className:N()("dnd-draggable-preview-layer",{"dnd-droppable-hover":n}),children:r&&(null==i?void 0:i.title)&&(0,j.jsx)("div",{style:bn(o,null===(t=a.current)||void 0===t?void 0:t.getBoundingClientRect()),children:(0,j.jsx)(yn,{title:i.title})})})}function yn(e){var t=e.title;return(0,j.jsx)("div",{className:"dnd-draggable-preview-item",children:t})}function bn(e,t){if(!t||!e)return{display:"none"};var n=t.x,r=t.y,i=e.x,o=e.y-r-15,a="translate(".concat(i-n-15,"px, ").concat(o,"px)");return{transform:a,WebkitTransform:a}}hn.propTypes={isOver:J().bool.isRequired,isDragging:J().bool.isRequired,item:J().shape({title:J().string}),clientOffset:J().shape({x:J().number,y:J().number})},yn.propTypes={title:J().string.isRequired};var vn=hn,gn=(n(43430),n(93057)),jn=n(41061);function xn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sn(e){var t=e.name,n=e.isSelected,r=e.setIsDraggable,i=(0,Vt.Z)(),o=i.isRenaming,a=i.startRenaming,l=i.finishRenaming,u=i.error,c=i.cancel,s=o&&n&&!u;return(0,m.useEffect)((function(){r(!s)}),[r,s]),s?(0,j.jsx)(Cn,{initialValue:t,finishRenaming:l,cancel:c}):(0,j.jsx)(En,{name:t,isSelected:n,startRenaming:a})}function En(e){var t=e.name,n=e.isSelected,r=e.startRenaming,i=xn((0,m.useState)(0),2),o=i[0],a=i[1];return(0,j.jsx)("button",{className:"item-name-button",onClick:function(){a(o+1),n||a(0)},onDoubleClick:function(){o<2||r()},children:(0,j.jsx)("span",{children:t})})}function Cn(e){var t=e.initialValue,n=e.finishRenaming,r=e.cancel,i=xn((0,m.useState)(t),2),o=i[0],a=i[1],l=(0,jn.Z)().autoFocusedRef;return(0,j.jsx)("span",{className:"rename-input",children:(0,j.jsx)("input",{type:"text",value:o,onKeyDown:function(e){"Enter"===e.key&&n(o),"Escape"===e.key&&r()},onChange:function(e){a(e.target.value)},onBlur:function(){n(o)},onFocus:function(e){var t=e.target.value.lastIndexOf(".");e.target.setSelectionRange(0,t)},ref:l})})}Sn.propTypes={name:J().string.isRequired,isSelected:J().bool.isRequired,setIsDraggable:J().func.isRequired},En.propTypes={name:J().string.isRequired,startRenaming:J().func.isRequired,isSelected:J().bool.isRequired},Cn.propTypes={initialValue:J().string.isRequired,finishRenaming:J().func.isRequired,cancel:J().func.isRequired};var In=Sn;function kn(e){var t=e.id,n=(0,b.$G)().t,r=(0,Xt.e)(),i=r.contextMenuCoords,o=r.setContextMenuCoords,a=(0,m.useRef)();return(0,j.jsx)("div",{className:"menu-button btn-group",children:(0,j.jsx)("button",{className:"entity-menu-toggle btn btn-sm",id:"menu-button-".concat(t),onClick:function(e){if(e.stopPropagation(),i)o(null);else{var t=a.current.getBoundingClientRect();o({top:t.top+t.height/2,left:t.right})}},ref:a,children:(0,j.jsx)(G.Z,{type:"ellipsis-v",accessibilityLabel:n("menu")})})})}kn.propTypes={id:J().string.isRequired};var An=kn,On=n(70819);var Tn=function(e){var t,n=e.id,r=e.name,i=e.type,o=e.isSelected,a=e.icons,l=(0,q._i)().permissionsLevel,u=(0,Xt.e)().setContextMenuCoords,c=(0,Vt.Z)().isRenaming,s=(0,Kt.nF)().selectedEntityIds,f="readOnly"!==l&&o&&1===s.size,d=sn(n),p=d.dragRef,h=d.setIsDraggable,y=(0,On.N)().getMonitor().getItem(),b=(0,m.useRef)(null);return(0,m.useEffect)((function(){var e=b.current;o&&e&&setTimeout((function(){e&&(0,gn.Z)(e,{scrollMode:"if-needed"})}),100)}),[o,b]),(0,j.jsx)("div",{className:N()("entity",{"file-tree-entity-dragging":null==y||null===(t=y.draggedEntityIds)||void 0===t?void 0:t.has(n)}),role:"presentation",ref:p,draggable:!c,onContextMenu:function(e){e.preventDefault(),u({top:e.pageY,left:e.pageX})},"data-file-id":n,"data-file-type":i,children:(0,j.jsxs)("div",{className:"entity-name entity-name-react",role:"presentation",ref:b,children:[a,(0,j.jsx)(In,{name:r,isSelected:o,setIsDraggable:h}),f?(0,j.jsx)(An,{id:n}):null]})})},Rn=n(65487);function Zn(e){var t=e.name,n=e.id,r=e.isFile,i=e.isLinkedFile,o=r?"file":"doc",a=(0,Kt.mI)(n,o),l=a.isSelected,u=a.props;return(0,j.jsx)("li",{role:"treeitem",...u,"aria-label":t,tabIndex:"0",children:(0,j.jsx)(Tn,{id:n,name:t,type:o,isSelected:l,icons:(0,j.jsx)(Nn,{isLinkedFile:i,name:t})})})}Zn.propTypes={name:J().string.isRequired,id:J().string.isRequired,isFile:J().bool,isLinkedFile:J().bool};var Nn=function(e){var t=e.isLinkedFile,n=e.name,r=(0,b.$G)().t,i=N()("spaced","file-tree-icon",{"linked-file-icon":t});return(0,j.jsxs)(j.Fragment,{children:["",(0,j.jsx)(G.Z,{type:(0,Rn.Z)(n),fw:!0,className:i}),t&&(0,j.jsx)(G.Z,{type:"external-link-square",modifier:"rotate-180",className:"linked-file-highlight",accessibilityLabel:r("linked_file")})]})};Nn.propTypes={name:J().string.isRequired,isLinkedFile:J().bool};var Pn=Zn,Fn=n(18977);function Ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dn(e){var t=e.name,n=e.id,r=e.folders,i=e.docs,o=e.files,a=(0,b.$G)().t,l=(0,Kt.mI)(n,"folder"),u=l.isSelected,c=l.props,s=(0,Kt.nF)(n).selectedEntityParentIds,f=Ln((0,Fn.Z)("folder.".concat(n,".expanded"),!1),2),d=f[0],p=f[1];(0,m.useEffect)((function(){s.has(n)&&p(!0)}),[n,s,p]);var h=fn(n),y=h.isOver,v=h.dropRef,g=fn(n),x=g.isOver,w=g.dropRef,S=(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("button",{onClick:function(){p(!d)},"aria-label":a(d?"collapse":"expand"),children:(0,j.jsx)(G.Z,{type:d?"angle-down":"angle-right",fw:!0,className:"file-tree-expand-icon"})}),(0,j.jsx)(G.Z,{type:d?"folder-open":"folder",fw:!0,className:"file-tree-folder-icon"})]});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("li",{role:"treeitem",...c,"aria-expanded":d,"aria-label":t,tabIndex:"0",ref:v,className:N()(c.className,{"dnd-droppable-hover":y||x}),children:(0,j.jsx)(Tn,{id:n,name:t,type:"folder",isSelected:u,icons:S})}),d?(0,j.jsx)(Gn,{folders:r,docs:i,files:o,dropRef:w}):null]})}Dn.propTypes={name:J().string.isRequired,id:J().string.isRequired,folders:J().array.isRequired,docs:J().array.isRequired,files:J().array.isRequired};var _n=Dn,Bn=n(50325);function Hn(e){return function(e){if(Array.isArray(e))return zn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Un(e){var t=e.folders,n=e.docs,r=e.files,i=e.classes,o=void 0===i?{}:i,a=e.dropRef,l=void 0===a?null:a,u=e.children,c=e.dataTestId;r=r.map((function(e){return{...e,isFile:!0}}));var s=[].concat(Hn(n),Hn(r));return(0,j.jsxs)("ul",{className:N()("list-unstyled",o.root),role:"tree",ref:l,"data-testid":c,children:[t.sort(Jn).map((function(e){return(0,j.jsx)(_n,{name:e.name,id:e._id,folders:e.folders,docs:e.docs,files:e.fileRefs},e._id)})),s.sort(Jn).map((function(e){return(0,j.jsx)(Pn,{name:e.name,id:e._id,isFile:e.isFile,isLinkedFile:e.linkedFileData&&!!e.linkedFileData.provider},e._id)})),u]})}function Jn(e,t){return Bn.W.compare(e.name,t.name)}Un.propTypes={folders:J().array.isRequired,docs:J().array.isRequired,files:J().array.isRequired,classes:J().exact({root:J().string}),dropRef:J().func,children:J().node,dataTestId:J().string};var Gn=Un;function qn(){var e=(0,b.$G)().t,t=(0,Vt.Z)(),n=t.canCreate,r=t.startCreatingFolder,i=t.startCreatingDocOrFile,o=t.startUploadingDocOrFile;return n?(0,j.jsxs)("div",{className:"toolbar-left",children:[(0,j.jsx)(Ae.Z,{id:"new-file",description:e("new_file"),overlayProps:{placement:"bottom"},children:(0,j.jsx)(oe.Z,{onClick:function(){z.BZ("new-file-click",{location:"toolbar"}),i()},bsStyle:null,children:(0,j.jsx)(G.Z,{type:"file",fw:!0,accessibilityLabel:e("new_file")})})}),(0,j.jsx)(Ae.Z,{id:"new-folder",description:e("new_folder"),overlayProps:{placement:"bottom"},children:(0,j.jsx)(oe.Z,{onClick:r,bsStyle:null,children:(0,j.jsx)(G.Z,{type:"folder",fw:!0,accessibilityLabel:e("new_folder")})})}),(0,j.jsx)(Ae.Z,{id:"upload",description:e("upload"),overlayProps:{placement:"bottom"},children:(0,j.jsx)(oe.Z,{onClick:function(){z.BZ("upload-click",{location:"toolbar"}),o()},children:(0,j.jsx)(G.Z,{type:"upload",fw:!0,accessibilityLabel:e("upload")})})})]}):null}function Xn(){var e=(0,b.$G)().t,t=(0,Vt.Z)(),n=t.canRename,r=t.canDelete,i=t.startRenaming,o=t.startDeleting;return n||r?(0,j.jsxs)("div",{className:"toolbar-right",children:[n?(0,j.jsx)(Ae.Z,{id:"rename",description:e("rename"),overlayProps:{placement:"bottom"},children:(0,j.jsx)(oe.Z,{onClick:i,children:(0,j.jsx)(G.Z,{type:"pencil",fw:!0,accessibilityLabel:e("rename")})})}):null,r?(0,j.jsx)(Ae.Z,{id:"delete",description:e("delete"),overlayProps:{placement:"bottom"},children:(0,j.jsx)(oe.Z,{onClick:o,children:(0,j.jsx)(G.Z,{type:"trash-o",fw:!0,accessibilityLabel:e("delete")})})}):null]}):null}var Vn=function(){return"readOnly"===(0,q._i)().permissionsLevel?null:(0,j.jsxs)("div",{className:"toolbar toolbar-filetree",children:[(0,j.jsx)(qn,{}),(0,j.jsx)(Xn,{})]})};var Kn=function(){var e=(0,b.$G)().t,t=(0,Vt.Z)(),n=t.isDeleting,r=t.inFlight,i=t.finishDeleting,o=t.actionedEntities,a=t.cancel,l=t.error;if(!n)return null;function u(){a()}return(0,j.jsxs)(ae.Z,{show:!0,onHide:u,children:[(0,j.jsx)(ie.Z.Header,{children:(0,j.jsx)(ie.Z.Title,{children:e("delete")})}),(0,j.jsxs)(ie.Z.Body,{children:[(0,j.jsx)("p",{children:e("sure_you_want_to_delete")}),(0,j.jsx)("ul",{children:o.map((function(e){return(0,j.jsx)("li",{children:e.name},e._id)}))}),l&&(0,j.jsx)("div",{className:"alert alert-danger file-tree-modal-alert",children:e("generic_something_went_wrong")})]}),(0,j.jsx)(ie.Z.Footer,{children:r?(0,j.jsxs)(oe.Z,{bsStyle:"danger",disabled:!0,children:[e("deleting"),""]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(oe.Z,{bsStyle:null,className:"btn-secondary",onClick:u,children:e("cancel")}),(0,j.jsx)(oe.Z,{bsStyle:"danger",onClick:function(){i()},children:e("delete")})]})})]})},Wn=(n(45794),n(17776)),Yn=n(61416);function Qn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function er(e){var t=e.name,n=e.setName,r=e.validName,i=e.setValidName,o=e.handleCreateFolder,a=(0,jn.Z)().autoFocusedRef;return(0,j.jsx)("input",{ref:a,className:"form-control",type:"text",value:t,onKeyDown:function(e){"Enter"===e.key&&r&&o()},onChange:function(e){i((0,Yn.AG)(e.target.value.trim())),n(e.target.value)},onFocus:function(e){e.target.setSelectionRange(0,-1)}})}er.propTypes={name:J().string.isRequired,setName:J().func.isRequired,validName:J().bool.isRequired,setValidName:J().func.isRequired,handleCreateFolder:J().func.isRequired};var tr=function(){var e=(0,b.$G)().t,t=Qn((0,m.useState)(""),2),n=t[0],r=t[1],i=Qn((0,m.useState)(!0),2),o=i[0],a=i[1],l=(0,Vt.Z)(),u=l.isCreatingFolder,c=l.inFlight,s=l.finishCreatingFolder,f=l.cancel,d=l.error;if((0,m.useEffect)((function(){u||r("")}),[u]),!u)return null;function p(){f()}function h(){s(n)}function y(){return d.constructor===Wn.w4?e("file_already_exists"):e("generic_something_went_wrong")}return(0,j.jsxs)(ae.Z,{show:!0,onHide:p,children:[(0,j.jsx)(ie.Z.Header,{children:(0,j.jsx)(ie.Z.Title,{children:e("new_folder")})}),(0,j.jsxs)(ie.Z.Body,{children:[(0,j.jsx)(er,{name:n,setName:r,validName:o,setValidName:a,handleCreateFolder:h}),o?null:(0,j.jsx)("div",{role:"alert","aria-label":e("files_cannot_include_invalid_characters"),className:"alert alert-danger file-tree-modal-alert",children:e("files_cannot_include_invalid_characters")}),d?(0,j.jsx)("div",{role:"alert","aria-label":y(),className:"alert alert-danger file-tree-modal-alert",children:y()}):null]}),(0,j.jsx)(ie.Z.Footer,{children:c?(0,j.jsxs)(oe.Z,{bsStyle:"primary",disabled:!0,children:[e("creating"),""]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(oe.Z,{bsStyle:null,className:"btn-secondary",onClick:p,children:e("cancel")}),(0,j.jsx)(oe.Z,{bsStyle:"primary",onClick:h,disabled:!o,children:e("create")})]})})]})};var nr=function FileTreeModalError(){var e=(0,b.$G)().t,t=(0,Vt.Z)(),n=t.isRenaming,r=t.isMoving,i=t.cancel,o=t.error;if(!o)return null;if(!n&&!r)return null;function a(){i()}function l(){switch(o.constructor){case Wn.w4:return e("file_already_exists");case Wn.d9:return(0,j.jsx)(b.cC,{i18nKey:"file_already_exists_in_this_location",components:[(0,j.jsx)("strong",{})],values:{fileName:o.entityName},shouldUnescape:!0,tOptions:{interpolation:{escapeValue:!0}}});case Wn.I9:return e("files_cannot_include_invalid_characters");case Wn.Cr:return e("blocked_filename");default:return e("generic_something_went_wrong")}}return(0,j.jsxs)(ie.Z,{show:!0,onHide:a,children:[(0,j.jsx)(ie.Z.Header,{children:(0,j.jsx)(ie.Z.Title,{children:function(){switch(o.constructor){case Wn.w4:case Wn.d9:return e("duplicate_file");case Wn.I9:case Wn.Cr:return e("invalid_file_name");default:return e("error")}}()})}),(0,j.jsx)(ie.Z.Body,{children:(0,j.jsx)("div",{role:"alert","aria-label":l(),children:l()})}),(0,j.jsx)(ie.Z.Footer,{children:(0,j.jsx)(oe.Z,{onClick:a,bsStyle:"primary",children:e("ok")})})]})};n(96708);var rr=function(){var e=(0,b.$G)().t,t=(0,Vt.Z)(),n=t.canRename,r=t.canDelete,i=t.canCreate,o=t.startRenaming,a=t.startDeleting,l=t.startCreatingFolder,u=t.startCreatingDocOrFile,c=t.startUploadingDocOrFile,s=t.downloadPath,f=t.selectedFileName,d=(0,W.d)().owner,p=(0,m.useCallback)((function(){null!=f&&f.endsWith(".bib")&&z.BZ("download-bib-file",{projectOwner:d._id})}),[f,d]),h=(0,m.useCallback)((function(){z.BZ("new-file-click",{location:"file-menu"}),u()}),[u]),y=(0,m.useCallback)((function(){z.BZ("upload-click",{location:"file-menu"}),c()}),[c]);return(0,j.jsxs)(j.Fragment,{children:[n?(0,j.jsx)(Ne.Z,{onClick:o,children:e("rename")}):null,s?(0,j.jsx)(Ne.Z,{href:s,onClick:p,download:!0,children:e("download")}):null,r?(0,j.jsx)(Ne.Z,{onClick:a,children:e("delete")}):null,i?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Ne.Z,{divider:!0}),(0,j.jsx)(Ne.Z,{onClick:h,children:e("new_file")}),(0,j.jsx)(Ne.Z,{onClick:l,children:e("new_folder")}),(0,j.jsx)(Ne.Z,{onClick:y,children:e("upload")})]}):null]})};var ir=m.forwardRef((function(e,t){e.bsRole;return null}));ir.displayName="FakeDropDownToggle";var or=function(){var e=(0,q._i)().permissionsLevel,t=(0,Xt.e)(),n=t.contextMenuCoords,r=t.setContextMenuCoords;if("readOnly"===e||!n)return null;function i(e){e||r(null)}return p.createPortal((0,j.jsxs)(Pe.Z,{onClick:function(){i(!1)},open:!0,id:"dropdown-file-tree-context-menu",onToggle:i,children:[(0,j.jsx)(ir,{bsRole:"toggle"}),(0,j.jsx)(Pe.Z.Menu,{className:"context-menu",style:n,children:(0,j.jsx)(rr,{})})]}),document.body)},ar=n(46267);var lr=function FileTreeError(){var e=(0,b.$G)().t,t=(0,ar.T)().reload;return(0,j.jsxs)("div",{className:"file-tree-error",children:[(0,j.jsx)("p",{children:e("generic_something_went_wrong")}),(0,j.jsx)("p",{children:e("please_refresh")}),(0,j.jsx)(oe.Z,{bsStyle:"primary",onClick:t,children:e("refresh")})]})};n(39529),n(31235);function ur(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sr=(0,m.createContext)(void 0),fr=function(){var e=(0,m.useContext)(sr);if(!e)throw new Error("useFileTreeCreateForm is only available inside FileTreeCreateFormProvider");return e},dr=function(e){var t=e.children,n=ur((0,m.useState)(!1),2),r=n[0],i=n[1];return(0,j.jsx)(sr.Provider,{value:{valid:r,setValid:i},children:t})};function pr(e){var t=e.mode,n=e.icon,r=e.label,i=(0,Vt.Z)(),o=i.newFileCreateMode,a=i.startCreatingFile;return(0,j.jsx)("li",{className:N()({active:o===t}),children:(0,j.jsxs)(oe.Z,{bsStyle:"link",block:!0,onClick:function(){a(t),z.BZ("file-modal-click",{method:t})},className:"modal-new-file-mode",children:[(0,j.jsx)(G.Z,{type:n,fw:!0}),"",r]})})}function mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}pr.propTypes={mode:J().string.isRequired,icon:J().string.isRequired,label:J().string.isRequired};var yr=(0,m.createContext)(void 0),br=function(){var e=(0,m.useContext)(yr);if(!e)throw new Error("useFileTreeCreateName is only available inside FileTreeCreateNameProvider");return e},vr=function(e){var t=e.children,n=e.initialName,r=void 0===n?"":n,i=mr((0,m.useReducer)((function(e,t){return{name:t,touchedName:!0}}),{name:r,touchedName:!1}),2),o=i[0],a=i[1],l=(0,m.useMemo)((function(){return(0,Yn.AG)(o.name.trim())}),[o]);return(0,j.jsx)(yr.Provider,{value:{...o,setName:a,validName:l},children:t})},gr=n(99262),jr=n(72300),xr=n(51854),wr=(n(21515),n(30286));function Sr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Er(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Er(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Cr=n(10726),Ir=n.n(Cr),kr=n(88664),Ar=n.n(kr);function Or(e){var t=e.label,n=e.focusName,r=void 0!==n&&n,i=e.classes,o=void 0===i?{}:i,a=e.placeholder,l=e.error,u=e.inFlight,c=(0,b.$G)().t,s=br(),f=s.name,d=s.setName,p=s.touchedName,h=s.validName,y=(0,m.useCallback)((function(e){e&&r&&window.requestAnimationFrame((function(){e.focus(),e.setSelectionRange(0,e.value.lastIndexOf("."))}))}),[r]);return(0,j.jsxs)(Ar(),{controlId:"new-doc-name",className:o.formGroup,children:[(0,j.jsx)(Ir(),{children:t||c("file_name")}),(0,j.jsx)(xr.Z,{type:"text",placeholder:a||c("file_name"),required:!0,value:f,onChange:function(e){return d(e.target.value)},inputRef:y,disabled:u}),(0,j.jsx)(xr.Z.Feedback,{}),p&&!h&&(0,j.jsx)(g.Z,{bsStyle:"danger",className:"row-spaced-small",children:c("files_cannot_include_invalid_characters")}),l&&(0,j.jsx)(Tr,{error:l})]})}function Tr(e){var t=e.error,n=(0,b.$G)().t;switch(t.constructor){case Wn.w4:return(0,j.jsx)(g.Z,{bsStyle:"danger",className:"row-spaced-small",children:n("file_already_exists")});case Wn.I9:return(0,j.jsx)(g.Z,{bsStyle:"danger",className:"row-spaced-small",children:n("files_cannot_include_invalid_characters")});case Wn.Cr:return(0,j.jsx)(g.Z,{bsStyle:"danger",className:"row-spaced-small",children:n("blocked_filename")});default:return null}}Or.propTypes={focusName:J().bool,label:J().string,classes:J().shape({formGroup:J().string}),placeholder:J().string,error:J().oneOfType([J().object,J().string]),inFlight:J().bool.isRequired},Tr.propTypes={error:J().oneOfType([J().object,J().string]).isRequired};var Rr=n(37087),Zr=n(36190),Nr=n(92910);function Pr(e){var t=e.provider,n=e.data,r=e.selectedGroupId,i=e.setSelectedGroupId,o=(0,b.$G)().t;switch(t){case"mendeley":return(0,j.jsxs)(gr.Z,{controlId:"group-select",children:[(0,j.jsx)(jr.Z,{children:o("select_a_group_optional")}),(0,j.jsxs)(xr.Z,{className:"form-control",componentClass:"select",placeholder:o("select_a_group_optional"),value:r||"",onChange:function(e){return i(e.target.value)},children:[(0,j.jsxs)("option",{disabled:!0,value:"",children:["- ",o("select_a_group_optional")]}),n.map((function(e){return(0,j.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]});case"zotero":return(0,j.jsxs)(gr.Z,{controlId:"group-select",children:[(0,j.jsx)(jr.Z,{children:o("library")}),(0,j.jsxs)(xr.Z,{className:"form-control",componentClass:"select",value:r||"",onChange:function(e){return i(e.target.value)},children:[(0,j.jsx)("option",{value:"",children:o("my_library")}),(0,j.jsx)("option",{disabled:!0,value:"_",children:o("group_libraries")}),n.map((function(e){return(0,j.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]});default:throw new Error('Unknown reference provider "'.concat(t,'"'))}}Pr.propTypes={provider:J().string.isRequired,data:J().arrayOf(J().object).isRequired,selectedGroupId:J().string,setSelectedGroupId:J().func.isRequired};var Fr=n(70887),Lr=n(22276);function Mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _r(e){var t,n=e.provider,r=e.providerName,i=e.supportsGroups,o=void 0!==i&&i,a=e.supportsFormat,l=void 0!==a&&a,u=(0,b.$G)().t,c=br(),s=c.name,f=c.validName,d=fr().setValid,p=(0,X.SE)().features,h=(0,Xt.e)(),y=h.refProviders,v=h.setStartedFreeTrial,x=h.setRefProviderEnabled,w=(0,Vt.Z)(),S=w.error,E=w.finishCreatingLinkedFile,C=w.inFlight,I=(0,Xt.e)().reindexReferences,k=Mr((0,m.useState)(""),2),A=k[0],O=k[1],T=Mr((0,m.useState)("bibtex"),2),R=T[0],Z=T[1];(0,Fr.K)((0,m.useCallback)((function(e){e.refProviders&&n in e.refProviders&&(x(n,!1),window.setTimeout((function(){x(n,e.refProviders[n])})))}),[n,x]));var N=(null==p?void 0:p.references)||(null==p?void 0:p[n])||!1,P=N&&y[n],F=(0,m.useCallback)((function(){z.BZ("link-integration-click",{integration:n,location:"Editor"}),window.open("/".concat(n,"/oauth"),"reference-auth","width=700,height=500")}),[n]),L=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Sr((0,m.useState)(!1),2),r=n[0],i=n[1],o=Sr((0,m.useState)(null),2),a=o[0],l=o[1],u=Sr((0,m.useState)(null),2),c=u[0],s=u[1],f=(0,wr.Z)().signal;return(0,m.useEffect)((function(){t&&(i(!0),s(null),l(null),(0,Q.xA)("/".concat(e,"/groups"),{signal:f}).then((function(e){l(e.groups)})).catch((function(e){400===e.response.status?e.data.relink&&s("relink"):s("loading_groups")})).finally((function(){i(!1)})))}),[t,e,f]),{loading:r,data:a,error:c}}(n,o&&P);(0,m.useEffect)((function(){d(f&&P&&!L.error)}),[d,f,P,L.error]);var M=(0,m.useCallback)((function(e){e.preventDefault();var t={};A&&(t.group_id=A),l&&(t.format=R),E({name:s,provider:n,data:t}).then(I),z.BZ("new-file-created",{method:n,extension:s.split(".").length>1?s.split(".").pop():""})}),[s,A,n,E,R,I,l]),D=(0,Lr.ye)("paywall-cta");return N?(0,j.jsxs)("div",{className:"referencesImportModal",children:[P?(0,j.jsxs)("div",{children:[L.loading?(0,j.jsx)("div",{children:(0,j.jsx)("h2",{className:"text-center",children:(0,j.jsxs)("small",{children:[(0,j.jsx)(G.Z,{type:"refresh",spin:!0,fw:!0}),"",u("loading"),""]})})}):(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{children:u("import_a_bibtex_file_from_your_provider_account",{provider:r})}),(0,j.jsxs)("form",{noValidate:!0,id:"create-file",onSubmit:M,children:[L.error&&(0,j.jsx)(Hr,{provider:n,error:L.error,linkAccount:F}),L.data&&L.data.length>0&&(0,j.jsx)("div",{className:"row-spaced-small",children:(0,j.jsx)(Pr,{provider:n,data:L.data,selectedGroupId:A,setSelectedGroupId:O})}),(0,j.jsx)("div",{className:"row-spaced-small",children:(0,j.jsx)(Or,{label:u("file_name_in_this_project"),focusName:!0,error:S,inFlight:C})}),l&&(0,j.jsx)("div",{className:"row-spaced-small",children:(0,j.jsxs)(gr.Z,{controlId:"format",children:[(0,j.jsx)(jr.Z,{children:u("format")}),(0,j.jsxs)(xr.Z,{className:"form-control",componentClass:"select",value:R,onChange:function(e){return Z(e.target.value)},children:[(0,j.jsx)("option",{value:"bibtex",children:"BibTeX"}),(0,j.jsx)("option",{value:"biblatex",children:"BibLaTeX"})]})]})})]})]}),C&&(0,j.jsx)("h3",{className:"text-center",children:(0,j.jsxs)("small",{children:[(0,j.jsx)(G.Z,{type:"refresh",spin:!0,fw:!0}),"",u("importing"),""]})})]}):(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{children:Br[n].sync_description(u)}),(0,j.jsx)("p",{children:(0,j.jsx)(oe.Z,{bsStyle:"info",type:"button",onClick:F,children:Br[n].link_to(u)})})]}),S&&(0,j.jsx)(j.Fragment,{children:"string"==typeof S?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)("hr",{}),(0,j.jsx)(Hr,{error:S,provider:n,linkAccount:F})]}),(0,j.jsx)(Ur,{error:S,provider:n,linkAccount:F})]}):null!==(t=S.data)&&void 0!==t&&t.relink?(0,j.jsx)(zr,{provider:n,linkAccount:F}):(0,j.jsx)(Rr.Z,{error:S})})]}):(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"small",children:Br[n].sync_description(u)}),(0,j.jsxs)(g.Z,{bsStyle:"info",children:[(0,j.jsx)("p",{children:Br[n].is_premium(u)}),(0,j.jsx)("p",{children:(0,j.jsx)(Nr.Z,{source:n,buttonProps:{bsStyle:"info"},handleClick:function(){return v(!0)},children:D?Br[n].cta(u):u("start_free_trial")})})]})]})}var Br={mendeley:{default:function(e){return e("mendeley_reference_loading_error")},expired:function(e){return e("mendeley_reference_loading_error_expired")},forbidden:function(e){return e("mendeley_reference_loading_error_forbidden")},"refresh-failed":function(e){return e("mendeley_reference_loading_error_expired")},sync_description:function(e){return e("mendeley_sync_description")},link_to:function(e){return e("link_to_mendeley")},is_premium:function(e){return e("mendeley_is_premium")},loading_groups:function(e){return e("mendeley_groups_loading_error")},relink:function(e){return e("mendeley_groups_relink")},cta:function(e){return e("mendeley_cta")}},zotero:{default:function(e){return e("zotero_reference_loading_error")},expired:function(e){return e("zotero_reference_loading_error_expired")},forbidden:function(e){return e("zotero_reference_loading_error_forbidden")},"refresh-failed":function(e){return e("zotero_reference_loading_error_expired")},sync_description:function(e){return e("zotero_sync_description")},link_to:function(e){return e("link_to_zotero")},is_premium:function(e){return e("zotero_is_premium")},loading_groups:function(e){return e("zotero_groups_loading_error")},relink:function(e){return e("zotero_groups_relink")},cta:function(e){return e("zotero_cta")}}};function Hr(e){var t=e.provider,n=e.error,r=e.linkAccount,i=(0,b.$G)().t;return"relink"===n?(0,j.jsx)(zr,{provider:t,linkAccount:r}):n in Br[t]?(0,j.jsx)(Zr.Z,{children:Br[t][n](i)}):(0,j.jsx)(Rr.Z,{error:n})}function zr(e){var t=e.provider,n=e.linkAccount,r=(0,b.$G)().t;return(0,j.jsxs)(Zr.Z,{children:[(0,j.jsx)("div",{children:Br[t].relink(r)}),(0,j.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:(0,j.jsx)(oe.Z,{bsStyle:"danger",type:"button",onClick:n,children:r("relink_your_account")})})]})}function Ur(e){var t=e.error,n=e.provider,r=e.linkAccount,i=(0,b.$G)().t;switch(t){case"refresh-failed":return(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{children:Br[n].sync_description(i)}),(0,j.jsx)("p",{children:(0,j.jsx)(oe.Z,{bsStyle:"info",type:"button",onClick:r,children:Br[n].link_to(i)})})]});case"default":case"expired":case"forbidden":return(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{children:[i("reference_error_relink_hint")," "]}),(0,j.jsx)("div",{children:(0,j.jsx)("a",{href:"/user/settings",target:"_blank",rel:"noopener",style:{fontWeight:"bold"},children:i("account_settings")})})]});default:return null}}function Jr(){var e=(0,b.$G)().t;return(0,j.jsx)(pr,{mode:"mendeley",icon:"book",label:e("from_provider",{provider:"Mendeley"})})}function Gr(){return"mendeley"!==(0,Vt.Z)().newFileCreateMode?null:(0,j.jsx)(vr,{initialName:"references.bib",children:(0,j.jsx)(_r,{provider:"mendeley",providerName:"Mendeley",supportsGroups:!0})})}function qr(){var e=(0,b.$G)().t;return(0,j.jsx)(pr,{mode:"zotero",icon:"book",label:e("from_provider",{provider:"Zotero"})})}function Xr(){return"zotero"!==(0,Vt.Z)().newFileCreateMode?null:(0,j.jsx)(vr,{initialName:"references.bib",children:(0,j.jsx)(_r,{provider:"zotero",providerName:"Zotero",supportsGroups:!0,supportsFormat:!0})})}var Vr=["event","action"];function Kr(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Wr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Wr((0,m.useState)(!1),2),r=n[0],i=n[1],o=(0,q._i)(),a=o.deactivateTutorial,l=o.currentPopup,u=o.setCurrentPopup,c=(0,m.useCallback)((async function(n){var r=n.event,o=void 0===r?"promo-click":r,l=n.action,u=void 0===l?"complete":l,c=Kr(n,Vr);z.BZ(o,{...t,...c});try{await(0,Q.ty)("/tutorial/".concat(e,"/").concat(u))}catch(e){C.c.error(e)}i(!1),a(e)}),[a,t,e]),s=(0,m.useCallback)((async function(){await c({event:"promo-dismiss",action:"complete"})}),[c]),f=(0,m.useCallback)((async function(){await c({event:"promo-click",action:"postpone",button:"maybe-later"})}),[c]),d=(0,m.useCallback)((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"promo-prompt";return null===l&&(u(e),i(!0),z.BZ(n,t),!0)}),[l,u,e,t]),p=(0,m.useCallback)((function(){l===e&&(u(null),i(!1))}),[u,i,l,e]),h=(0,m.useCallback)((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"promo-prompt";u(e),i(!0),z.BZ(n,t)}),[u,i,e,t]);return{completeTutorial:c,dismissTutorial:s,maybeLater:f,tryShowingPopup:d,clearPopup:p,clearAndShow:h,showPopup:r}},$r=Qr,ei=n(96480),ti=function(e){var t=e.onDismiss,n=e.handleLearnMore,r=e.handleFreeTrialClick,i=(0,b.$G)().t,o=(0,j.jsxs)("div",{children:[(0,j.jsx)(Nr.Z,{source:"create-bib-file-upgrade-prompt",buttonProps:{bsStyle:"default",className:"btn-secondary"},handleClick:r,children:i("upgrade")}),(0,j.jsx)(oe.Z,{bsStyle:null,className:"btn-bg-ghost",href:"/learn/how-to/How_to_link_your_Overleaf_account_to_Mendeley_and_Zotero",target:"blank",onClick:n,children:i("learn_more")})]}),a=(0,j.jsx)("div",{children:i("easily_import_and_sync_your_references")}),l=(0,j.jsx)("img",{src:"/img/third-party-references/book-illlustration.svg","aria-hidden":"true",alt:"better bibliographies",width:64,height:64});return(0,j.jsx)("div",{className:"tpr-file-promo-container tpr-bib-file-prompt hidden-sm",children:(0,j.jsx)(ei.Z,{type:"offer",action:o,isDismissible:!0,isActionBelowContent:!0,customIcon:l,title:i("adding_a_bibliography"),content:a,onDismiss:t})})},ni="bib-file-tpr-prompt",ri={location:"create-bib-file-upgrade-prompt",name:ni},ii=function(){var e=(0,Lr.yW)().splitTestVariants,t=(0,X.SE)(),n=t.allowedFreeTrial,r=t.features,i=(0,q._i)().inactiveTutorials,o=Qr(ni,ri),a=o.completeTutorial,l=o.dismissTutorial,u=o.tryShowingPopup,c=o.showPopup,s=o.clearAndShow;(0,m.useEffect)((function(){var t="new-bib-file"===e["bib-file-tpr-prompt"],o=i.includes(ni),a=!(null!=r&&r.mendeley||null!=r&&r.zotero);t&&(n&&a)&&!o&&(u("reference-manager-prompt-view")||s("reference-manager-prompt-view"))}),[s,u,n,r,i,e]);var f=(0,m.useCallback)((function(){return a({event:"promo-click",action:"complete",button:"Upgrade"})}),[a]),d=(0,m.useCallback)((function(){return z.BZ("promo-click",{...ri,button:"Learn more"})}),[]);return c?(0,j.jsx)(ti,{handleFreeTrialClick:f,handleLearnMore:d,onDismiss:l}):null},oi=(0,m.memo)(ii),ai=[{import:a,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/promotions/new-bib-file-prompt"}];function li(){var e=br(),t=e.name,n=e.validName,r=fr().setValid,i=(0,Vt.Z)(),o=i.error,a=i.finishCreatingDoc,l=i.inFlight;(0,m.useEffect)((function(){r(n)}),[r,n]);var u=(0,m.useCallback)((function(e){e.preventDefault(),a({name:t}),z.BZ("new-file-created",{method:"doc",extension:t.split(".").length>1?t.split(".").pop():""})}),[a,t]);return(0,j.jsxs)("form",{noValidate:!0,id:"create-file",onSubmit:u,children:[(0,j.jsx)(Or,{focusName:!0,error:o,inFlight:l}),o&&(0,j.jsx)(Rr.Z,{error:o}),ai.map((function(e){var t=e.import.default,n=e.path;return(0,j.jsx)(t,{},n)}))]})}n(74069);function ui(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ci(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ci(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ci(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function si(){var e=(0,b.$G)().t,t=br(),n=t.name,r=t.setName,i=t.validName,o=fr().setValid,a=(0,Vt.Z)(),l=a.finishCreatingLinkedFile,u=a.error,c=a.inFlight,s=ui((0,m.useState)(""),2),f=s[0],d=s[1],p=(0,m.useCallback)((function(e){d(e.target.value)}),[]);(0,m.useEffect)((function(){if(f){var e=f.match(/^\s*https?:\/\/.+\/([^/]+\.(\w+))\s*$/);r(e?e[1]:"")}}),[r,f]),(0,m.useEffect)((function(){o(i&&!!f)}),[o,i,f]);return(0,j.jsxs)("form",{className:"form-controls",id:"create-file",noValidate:!0,onSubmit:function(e){e.preventDefault(),z.BZ("new-file-created",{method:"url",extension:n.split(".").length>1?n.split(".").pop():""}),l({name:n,provider:"url",data:{url:f.trim()}})},children:[(0,j.jsxs)(gr.Z,{controlId:"import-from-url",children:[(0,j.jsx)(jr.Z,{children:e("url_to_fetch_the_file_from")}),(0,j.jsx)(xr.Z,{type:"url",placeholder:"https://example.com/my-file.png",required:!0,value:f,onChange:p})]}),(0,j.jsx)(Or,{label:e("file_name_in_this_project"),placeholder:"my_file",error:u,inFlight:c}),u&&(0,j.jsx)(Rr.Z,{error:u})]})}n(49228);var fi=n(87983),di=n(15270),pi=n(25137);function mi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yi(){var e=(0,b.$G)().t,t=window.ExposedSettings,n=t.hasLinkedProjectFileFeature,r=t.hasLinkedProjectOutputFileFeature,i=n&&r,o=br(),a=o.name,l=o.setName,u=o.validName,c=fr().setValid,s=(0,Vt.Z)(),f=s.error,d=s.finishCreatingLinkedFile,p=s.inFlight,h=mi((0,m.useState)(),2),y=h[0],v=h[1],g=mi((0,m.useState)(),2),x=g[0],w=g[1],S=mi((0,m.useState)(),2),E=S[0],C=S[1],I=mi((0,m.useState)(!n),2),k=I[0],A=I[1],O=(0,m.useCallback)((function(e){var t=e.split("/").pop();t&&l(t)}),[l]);(0,m.useEffect)((function(){E&&("output.pdf"===E.path&&y.name?l("".concat(y.name,".pdf")):O(E.path))}),[y,E,l,O]),(0,m.useEffect)((function(){x&&O(x.path)}),[x,O]),(0,m.useEffect)((function(){var e=Boolean(k?E:x);c(u&&e)}),[c,u,k,x,E]);return(0,j.jsxs)("form",{className:"form-controls",id:"create-file",onSubmit:function(e){e.preventDefault(),z.BZ("new-file-created",{method:"project",extension:a.split(".").length>1?a.split(".").pop():""}),d(k?{name:a,provider:"project_output_file",data:{source_project_id:y._id,source_output_file_path:E.path,build_id:E.build,clsiServerId:E.clsiServerId}}:{name:a,provider:"project_file",data:{source_project_id:y._id,source_entity_path:x.path}})},children:[(0,j.jsx)(bi,{selectedProject:y,setSelectedProject:v}),k?(0,j.jsx)(vi,{selectedProjectId:null==y?void 0:y._id,selectedProjectOutputFile:E,setSelectedProjectOutputFile:C}):(0,j.jsx)(gi,{selectedProjectId:null==y?void 0:y._id,selectedProjectEntity:x,setSelectedProjectEntity:w}),i&&(0,j.jsxs)("div",{className:"toggle-file-type-button",children:["or",(0,j.jsx)(oe.Z,{bsStyle:"link",type:"button",onClick:function(){return A((function(e){return!e}))},children:(0,j.jsx)("span",{children:e(k?"select_from_source_files":"select_from_output_files")})})]}),(0,j.jsx)(Or,{label:e("file_name_in_this_project"),classes:{formGroup:"form-controls row-spaced-small"},placeholder:"example.tex",error:f,inFlight:p}),f&&(0,j.jsx)(Rr.Z,{error:f})]})}function bi(e){var t=e.selectedProject,n=e.setSelectedProject,r=(0,b.$G)().t,i=(0,W.d)()._id,o=(0,fi.Z)(),a=o.data,l=o.error,u=o.loading,c=(0,m.useMemo)((function(){return a?a.filter((function(e){return e._id!==i})):null}),[a,i]);return l?(0,j.jsx)(Rr.Z,{error:l}):(0,j.jsxs)(gr.Z,{className:"form-controls",controlId:"project-select",children:[(0,j.jsx)(jr.Z,{children:r("select_a_project")}),u&&(0,j.jsxs)("span",{children:["",(0,j.jsx)(G.Z,{type:"spinner",spin:!0})]}),(0,j.jsxs)(xr.Z,{componentClass:"select",disabled:!a,value:t?t._id:"",onChange:function(e){var t=e.target.value,r=a.find((function(e){return e._id===t}));n(r)},children:[(0,j.jsxs)("option",{disabled:!0,value:"",children:["- ",r("please_select_a_project")]}),c&&c.map((function(e){return(0,j.jsx)("option",{value:e._id,children:e.name},e._id)}))]}),c&&!c.length&&(0,j.jsx)("small",{children:r("no_other_projects_found")})]})}function vi(e){var t=e.selectedProjectId,n=e.selectedProjectOutputFile,r=e.setSelectedProjectOutputFile,i=(0,b.$G)().t,o=(0,pi.h)(t),a=o.data,l=o.error,u=o.loading;return l?(0,j.jsx)(Rr.Z,{error:l}):(0,j.jsxs)(gr.Z,{className:"form-controls row-spaced-small",controlId:"project-output-file-select",children:[(0,j.jsx)(jr.Z,{children:i("select_an_output_file")}),u&&(0,j.jsxs)("span",{children:["",(0,j.jsx)(G.Z,{type:"spinner",spin:!0})]}),(0,j.jsxs)(xr.Z,{componentClass:"select",disabled:!a,value:(null==n?void 0:n.path)||"",onChange:function(e){var t=e.target.value,n=null==a?void 0:a.find((function(e){return e.path===t}));r(n)},children:[(0,j.jsxs)("option",{disabled:!0,value:"",children:["- ",i("please_select_an_output_file")]}),a&&a.map((function(e){return(0,j.jsx)("option",{value:e.path,children:e.path},e.path)}))]})]})}function gi(e){var t=e.selectedProjectId,n=e.selectedProjectEntity,r=e.setSelectedProjectEntity,i=(0,b.$G)().t,o=(0,di.t)(t),a=o.data,l=o.error,u=o.loading;return l?(0,j.jsx)(Rr.Z,{error:l}):(0,j.jsxs)(gr.Z,{className:"form-controls row-spaced-small",controlId:"project-entity-select",children:[(0,j.jsx)(jr.Z,{children:i("select_a_file")}),u&&(0,j.jsxs)("span",{children:["",(0,j.jsx)(G.Z,{type:"spinner",spin:!0})]}),(0,j.jsxs)(xr.Z,{componentClass:"select",disabled:!a,value:(null==n?void 0:n.path)||"",onChange:function(e){var t=e.target.value,n=a.find((function(e){return e.path===t}));r(n)},children:[(0,j.jsxs)("option",{disabled:!0,value:"",children:["- ",i("please_select_a_file")]}),a&&a.map((function(e){return(0,j.jsx)("option",{value:e.path,children:e.path.slice(1)},e.path)}))]})]})}var ji=[{import:i,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/create-file-mode-mendeley"},{import:o,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/create-file-mode-zotero"}],xi=(0,m.lazy)((function(){return Promise.all([n.e(2385),n.e(1220),n.e(7583)]).then(n.bind(n,19319))}));function wi(){var e=(0,b.$G)().t,t=(0,Vt.Z)().newFileCreateMode,n=(0,Y.O)().fileCount;return n&&"error"!==n.status?(0,j.jsx)("table",{children:(0,j.jsx)("tbody",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{className:"modal-new-file--list",children:(0,j.jsxs)("ul",{className:"list-unstyled",children:[(0,j.jsx)(pr,{mode:"doc",icon:"file",label:e("new_file")}),(0,j.jsx)(pr,{mode:"upload",icon:"upload",label:e("upload")}),(window.ExposedSettings.hasLinkedProjectFileFeature||window.ExposedSettings.hasLinkedProjectOutputFileFeature)&&(0,j.jsx)(pr,{mode:"project",icon:"folder-open",label:e("from_another_project")}),window.ExposedSettings.hasLinkUrlFeature&&(0,j.jsx)(pr,{mode:"url",icon:"globe",label:e("from_external_url")}),ji.map((function(e){var t=e.import.CreateFileMode,n=e.path;return(0,j.jsx)(t,{},n)}))]})}),(0,j.jsxs)("td",{className:"modal-new-file--body modal-new-file--body-".concat(t),children:["doc"===t&&(0,j.jsx)(vr,{initialName:"name.tex",children:(0,j.jsx)(li,{})}),"url"===t&&(0,j.jsx)(vr,{children:(0,j.jsx)(si,{})}),"project"===t&&(0,j.jsx)(vr,{children:(0,j.jsx)(yi,{})}),"upload"===t&&(0,j.jsx)(m.Suspense,{fallback:(0,j.jsx)(Ft.w,{delay:500}),children:(0,j.jsx)(xi,{})}),ji.map((function(e){var t=e.import.CreateFilePane,n=e.path;return(0,j.jsx)(t,{},n)}))]})]})})}):null}function Si(){var e=fr().valid,t=(0,Vt.Z)(),n=t.newFileCreateMode,r=t.inFlight,i=t.cancel,o=(0,Y.O)().fileCount;return(0,j.jsx)(Ei,{valid:e,cancel:i,newFileCreateMode:n,inFlight:r,fileCount:o})}function Ei(e){var t=e.valid,n=e.fileCount,r=e.inFlight,i=e.newFileCreateMode,o=e.cancel,a=(0,b.$G)().t;return(0,j.jsxs)(j.Fragment,{children:["warning"===n.status&&(0,j.jsxs)("div",{className:"modal-footer-left approaching-file-limit",children:[a("project_approaching_file_limit")," (",n.value,"/",n.limit,")"]}),"error"===n.status&&(0,j.jsx)(g.Z,{bsStyle:"warning",className:"at-file-limit",children:a("project_has_too_many_files")}),(0,j.jsx)(oe.Z,{bsStyle:null,className:"btn-secondary",type:"button",disabled:r,onClick:o,children:a("cancel")}),"upload"!==i&&(0,j.jsx)(oe.Z,{bsStyle:"primary",type:"submit",form:"create-file",disabled:r||!t,children:(0,j.jsx)("span",{children:r?"".concat(a("creating"),""):a("create")})})]})}function Ci(){var e=(0,b.$G)().t,t=(0,Vt.Z)(),n=t.isCreatingFile,r=t.cancel;return n?(0,j.jsx)(dr,{children:(0,j.jsxs)(ae.Z,{bsSize:"large",onHide:r,show:!0,children:[(0,j.jsx)(ie.Z.Header,{closeButton:!0,children:(0,j.jsx)(ie.Z.Title,{children:e("add_files")})}),(0,j.jsx)(ie.Z.Body,{className:"modal-new-file",children:(0,j.jsx)(wi,{})}),(0,j.jsx)(ie.Z.Footer,{children:(0,j.jsx)(Si,{})})]})}):null}Ei.propTypes={cancel:J().func.isRequired,fileCount:J().shape({limit:J().number.isRequired,status:J().string.isRequired,value:J().number.isRequired}).isRequired,inFlight:J().bool.isRequired,newFileCreateMode:J().string,valid:J().bool.isRequired};var Ii=function(e){var t=e.children,n=(0,Kt.nF)(),r=n.setIsRootFolderSelected,i=n.selectedEntityIds,o=n.select,a=(0,m.useCallback)((function(){r(!0),i.size>1&&o([])}),[o,i.size,r]);return(0,j.jsx)("div",{className:"file-tree-inner",onClick:a,"data-testid":"file-tree-inner",children:t})},ki=n(22396),Ai=n(22110);function Oi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ti(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ti(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ri=m.memo((function(e){var t=e.refProviders,n=e.reindexReferences,r=e.setRefProviderEnabled,i=e.setStartedFreeTrial,o=e.onSelect,a=e.onInit,l=e.onDelete,u=e.isConnected,c=Oi((0,m.useState)(null),2),s=c[0],f=c[1],d=(0,W.d)()._id,p=(0,Y.O)().fileTreeData,h=Boolean(d&&p);return(0,m.useEffect)((function(){if(s){var e=function(e){if(e.dataTransfer){var t=e.target.dataset;if(t.fileId&&t.fileType&&"folder"!==t.fileType){e.dataTransfer.setData("application/x-overleaf-file-id",t.fileId);var n=(0,Ai.Te)(p,t.fileId);n&&e.dataTransfer.setData("application/x-overleaf-file-path",n)}}};return s.addEventListener("dragstart",e),function(){s.removeEventListener("dragstart",e)}}}),[s,p]),(0,m.useEffect)((function(){h&&a()}),[h,a]),h?(0,j.jsx)("div",{className:"file-tree","data-testid":"file-tree",ref:f,children:s&&(0,j.jsxs)(mn,{refProviders:t,setRefProviderEnabled:r,setStartedFreeTrial:i,reindexReferences:n,onSelect:o,fileTreeContainer:s,children:[u?null:(0,j.jsx)("div",{className:"disconnected-overlay"}),(0,j.jsx)(Vn,{}),(0,j.jsx)(or,{}),(0,j.jsx)(Ii,{children:(0,j.jsx)(Zi,{onDelete:l})}),(0,j.jsx)(Kn,{}),(0,j.jsx)(Ci,{}),(0,j.jsx)(tr,{}),(0,j.jsx)(nr,{})]})}):null}));function Zi(e){!function(e){var t=(0,X.SE)(),n=(0,Y.O)(),r=n.dispatchRename,i=n.dispatchDelete,o=n.dispatchMove,a=n.dispatchCreateFolder,l=n.dispatchCreateDoc,u=n.dispatchCreateFile,c=n.fileTreeData,s=(0,Kt.nF)(),f=s.selectedEntityIds,d=s.selectedEntityParentIds,p=s.select,h=s.unselect,y=(0,$.IM)().socket,b=(0,m.useCallback)((function(e,n,r){r&&(null==t?void 0:t.id)===r&&window.expectingLinkedFileRefreshedSocketFor===n&&(p(e),window.expectingLinkedFileRefreshedSocketFor=null)}),[t,p]);(0,m.useEffect)((function(){function e(e,t){r(e,t)}return y&&y.on("reciveEntityRename",e),function(){y&&y.removeListener("reciveEntityRename",e)}}),[y,r]),(0,m.useEffect)((function(){function t(t){var n=(0,rn.Z7)(c,t);if(h(t),d.has(t))for(var r of f)(0,rn.we)(c,r).path.includes(t)&&h(r);i(t),e&&e(n)}return y&&y.on("removeEntity",t),function(){y&&y.removeListener("removeEntity",t)}}),[y,h,i,c,f,d,e]),(0,m.useEffect)((function(){function e(e,t){o(e,t)}return y&&y.on("reciveEntityMove",e),function(){y&&y.removeListener("reciveEntityMove",e)}}),[y,o]),(0,m.useEffect)((function(){function e(e,t){a(e,t)}return y&&y.on("reciveNewFolder",e),function(){y&&y.removeListener("reciveNewFolder",e)}}),[y,a]),(0,m.useEffect)((function(){function e(e,t,n){l(e,t)}return y&&y.on("reciveNewDoc",e),function(){y&&y.removeListener("reciveNewDoc",e)}}),[y,l]),(0,m.useEffect)((function(){function e(e,t,n,r,i){u(e,t),r&&b(t._id,t.name,i)}return y&&y.on("reciveNewFile",e),function(){y&&y.removeListener("reciveNewFile",e)}}),[y,u,b])}(e.onDelete);var t=(0,Y.O)().fileTreeData,n=fn(t._id),r=n.isOver,i=n.dropRef,o=(0,ki.f)((function(e){return{isDragging:e.isDragging(),item:e.getItem(),clientOffset:e.getClientOffset()}}));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(vn,{isOver:r,...o}),(0,j.jsx)(Gn,{folders:t.folders,docs:t.docs,files:t.fileRefs,classes:{root:N()("file-tree-list",{"file-tree-dragging":o.isDragging})},dropRef:i,dataTestId:"file-tree-list-root"})]})}var Ni=(0,y.Z)(Ri,lr),Pi=n(7242);function Fi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Li(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Li(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Li(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mi=(0,m.memo)((function(){var e=(0,X.SE)(),t=(0,Gt.a4)().indexAllReferences,n=(0,qt.I)().setStartedFreeTrial,r=(0,E.Km)(),i=r.isConnected,o=r.connectionState,a=(0,Pi.z)(),l=a.handleFileTreeInit,u=a.handleFileTreeSelect,c=a.handleFileTreeDelete,s=Fi((0,m.useState)((function(){return e.refProviders||{}})),2),f=s[0],d=s[1];var p=(0,m.useCallback)((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];d((function(n){return{...n,[e]:t}}))}),[]);return(0,j.jsx)(Ni,{refProviders:f,reindexReferences:function(){t(!0)},setRefProviderEnabled:p,setStartedFreeTrial:n,isConnected:i||null!==o.reconnectAt,onInit:l,onSelect:u,onDelete:c})})),Di=(n(27072),n(67694),(0,m.memo)((function(e){var t=e.expanded,n=e.setExpanded,r=(0,b.$G)().t;return(0,j.jsx)("button",{className:"outline-item-expand-collapse-btn",onClick:function(){return n((function(e){return!e}))},"aria-label":r(t?"collapse":"expand"),children:(0,j.jsx)(G.Z,{type:t?"angle-down":"angle-right",className:"outline-caret-icon"})})})));function _i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Di.displayName="OutlineItemToggleButton";var Hi=(0,m.memo)((function(e){var t=e.outlineItem,n=e.jumpToLine,r=e.highlightedLine,i=e.matchesHighlightedLine,o=e.containsHighlightedLine,a=_i((0,m.useState)(!0),2),l=a[0],u=a[1],c=(0,m.useRef)(),s=(0,m.useRef)(!1),f=N()("outline-item",{"outline-item-no-children":!t.children}),d=i||!l&&o,p=N()("outline-item-link",{"outline-item-link-highlight":d});(0,m.useEffect)((function(){var e=s.current;s.current=d,!e&&d&&(0,gn.Z)(c.current,{scrollMode:"if-needed",block:"center"})}),[d,c,s]);var h=t.children?l:void 0;return(0,j.jsxs)("li",{className:f,"aria-expanded":h,role:"treeitem","aria-current":d,"aria-label":t.title,children:[(0,j.jsxs)("div",{className:"outline-item-row",children:[!!t.children&&(0,j.jsx)(Di,{expanded:l,setExpanded:u}),(0,j.jsx)("button",{className:p,onClick:function(e){var r=2===e.detail;n(t.line,r)},ref:c,children:t.title})]}),l&&t.children?(0,j.jsx)(Gi,{outline:t.children,jumpToLine:n,isRoot:!1,highlightedLine:o?r:null,containsHighlightedLine:o}):null]})}));Hi.propTypes={outlineItem:J().exact({line:J().number.isRequired,title:J().string.isRequired,level:J().number,children:J().array,from:J().number,to:J().number}).isRequired,jumpToLine:J().func.isRequired,highlightedLine:J().number,matchesHighlightedLine:J().bool,containsHighlightedLine:J().bool};var zi=Hi;function Ui(e){return(e||[]).map((function(e){return Ui(e.children).concat(e.line)})).flat()}var Ji=(0,m.memo)((function(e){var t=e.outline,n=e.jumpToLine,r=e.isRoot,i=e.highlightedLine,o=e.containsHighlightedLine,a=N()("outline-item-list",{"outline-item-list-root":r});return(0,j.jsx)("ul",{className:a,role:r?"tree":"group",children:t.map((function(e,t){var r=o&&i===e.line,a=o&&Ui(e.children).includes(i);return(0,j.jsx)(zi,{outlineItem:e,jumpToLine:n,highlightedLine:r||a?i:null,matchesHighlightedLine:r,containsHighlightedLine:a},"".concat(e.level,"-").concat(t))}))})}));Ji.propTypes={outline:J().array.isRequired,jumpToLine:J().func.isRequired,isRoot:J().bool,highlightedLine:J().number,containsHighlightedLine:J().bool};var Gi=Ji;function qi(e){var t=e.outline,n=e.jumpToLine,r=e.highlightedLine,i=(0,b.$G)().t;return(0,j.jsx)("div",{children:t.length?(0,j.jsx)(Gi,{outline:t,jumpToLine:n,isRoot:!0,highlightedLine:r,containsHighlightedLine:!0}):(0,j.jsxs)("div",{className:"outline-body-no-elements",children:[i("we_cant_find_any_sections_or_subsections_in_this_file"),"."," ",(0,j.jsx)("a",{href:"/learn/how-to/Using_the_File_Outline_feature",className:"outline-body-link",target:"_blank",rel:"noopener noreferrer",children:i("find_out_more_about_the_file_outline")})]})})}qi.propTypes={outline:J().array.isRequired,jumpToLine:J().func.isRequired,highlightedLine:J().number};var Xi=qi,Vi=(0,m.memo)((function(e){var t=e.isTexFile,n=e.toggleExpanded,r=e.expanded,i=e.isOpen,o=e.isPartial,a=(0,b.$G)().t;return(0,j.jsxs)("button",{className:"outline-header-expand-collapse-btn",disabled:!t,onClick:n,"aria-label":a(r?"hide_outline":"show_outline"),children:[(0,j.jsx)(G.Z,{type:i?"angle-down":"angle-right",className:"outline-caret-icon"}),(0,j.jsx)("h4",{className:"outline-header-name",children:a("file_outline")}),o&&(0,j.jsx)(Ae.Z,{id:"partial-outline",description:a("partial_outline_warning"),overlayProps:{placement:"top"},children:(0,j.jsx)("span",{role:"status",children:(0,j.jsx)(G.Z,{type:"exclamation-triangle","aria-label":a("partial_outline_warning")})})})]})}));Vi.displayName="OutlineToggleButton";var Ki=m.memo((function(e){var t=e.isTexFile,n=e.outline,r=e.jumpToLine,i=e.onToggle,o=e.highlightedLine,a=e.isPartial,l=void 0!==a&&a,u=e.expanded,c=e.toggleExpanded,s=Boolean(t&&u);(0,m.useEffect)((function(){i(s)}),[s,i]);var f=N()("outline-pane",{"outline-pane-disabled":!t});return(0,j.jsxs)("div",{className:f,children:[(0,j.jsx)("header",{className:"outline-header",children:(0,j.jsx)(Vi,{toggleExpanded:c,expanded:u,isOpen:s,isPartial:l,isTexFile:t})}),s&&(0,j.jsx)("div",{className:"outline-body",children:(0,j.jsx)(Xi,{outline:n,jumpToLine:r,highlightedLine:o})})]})})),Wi=(0,y.Z)(Ki),Yi=n(19816),Qi=n(85209),$i=n(44466);function eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return to(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return to(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function to(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var no=(0,m.memo)((function(){var e=(0,Yi.k)(),t=e.flatOutline,n=e.highlightedLine,r=e.canShowOutline,i=e.jumpToLine,o=e.outlineExpanded,a=e.toggleOutlineExpanded,l=(0,$i.Z)("outline-toggled"),u=eo((0,m.useState)((function(){return{items:[],partial:!1}})),2),c=u[0],s=u[1],f=(0,m.useRef)(void 0);return(0,m.useEffect)((function(){var e=f.current;f.current=t,t?ro(null==e?void 0:e.items,t.items)&&(C.c.log("Rebuilding changed outline"),s({items:(0,Qi.zz)(t.items),partial:t.partial})):s({items:[],partial:!1})}),[t]),(0,j.jsx)("div",{className:"outline-container",children:(0,j.jsx)(Wi,{outline:c.items,onToggle:l,isTexFile:r,jumpToLine:i,highlightedLine:n,isPartial:c.partial,expanded:o,toggleExpanded:a})})}));no.displayName="OutlineContainer";var ro=function(e,t){if(!e)return!0;if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++){var r=e[n],i=t[n];if(r.level!==i.level||r.line!==i.line||r.title!==i.title)return!0}return!1};function io(e,t){(0,m.useEffect)((function(){var n=t.current;n&&(e?n.expand():n.collapse())}),[e,t])}function oo(){var e=(0,_.l5)().view,t=function(){var e=(0,Yi.k)(),t=e.canShowOutline,n=e.outlineExpanded,r=(0,m.useRef)(null),i=t&&n;return io(i,r),{outlineEnabled:i,outlinePanelRef:r}}(),n=t.outlineEnabled,r=t.outlinePanelRef;return(0,j.jsx)("aside",{className:N()("ide-react-editor-sidebar",{hidden:"history"===e}),children:(0,j.jsxs)(R.eh,{autoSaveId:"ide-editor-sidebar-layout",direction:"vertical",children:[(0,j.jsx)(R.s_,{defaultSize:50,minSize:25,className:"ide-react-file-tree-panel",id:"panel-file-tree",order:1,children:(0,j.jsx)(Mi,{})}),(0,j.jsx)(Jt,{disabled:!n}),(0,j.jsx)(R.s_,{defaultSize:50,maxSize:75,id:"panel-outline",order:2,collapsible:!0,ref:r,style:{minHeight:32},children:(0,j.jsx)(no,{})})]})})}function ao(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return co(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return co(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function co(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function so(){var e=(0,b.$G)().t;return(0,j.jsx)("div",{className:"no-file-selection",children:(0,j.jsx)("div",{className:"no-file-selection-message",children:(0,j.jsx)("h3",{children:e("no_selection_select_file")})})})}var fo=function(e,t){var n;return(null===(n=e.linkedFileData)||void 0===n?void 0:n.provider)===t};function po(e){var t=e.file,n=(0,b.$G)().t,r=(0,X.SE)().id;return fo(t,"mendeley")||fo(t,"zotero")?t.linkedFileData.importer_id===r?null:(0,j.jsx)("div",{className:"row",children:(0,j.jsx)("div",{className:"alert",children:n("only_importer_can_refresh",{provider:(0,Tt.capitalize)(t.linkedFileData.provider)})})}):null}var mo=n(7585),ho=function(e){return(0,j.jsx)(G.Z,{type:"external-link-square",modifier:"rotate-180",className:"linked-file-icon",...e})};function yo(e){var t=e.file,n=(0,b.$G)().t;return"mendeley"===t.linkedFileData.provider?(0,j.jsx)("div",{children:(0,j.jsxs)("p",{children:[(0,j.jsx)(ho,{fw:!0}),n("imported_from_mendeley_at_date",{formattedDate:(0,mo.mr)(t.created),relativeDate:(0,mo.K8)(t.created)})]})}):"zotero"===t.linkedFileData.provider?(0,j.jsx)("div",{children:(0,j.jsxs)("p",{children:[(0,j.jsx)(ho,{fw:!0}),n("imported_from_zotero_at_date",{formattedDate:(0,mo.mr)(t.created),relativeDate:(0,mo.K8)(t.created)})]})}):null}yo.propTypes={file:J().shape({created:J().string,linkedFileData:J().shape({provider:J().string})})};var bo=function(e,t){var n;return(null===(n=e.linkedFileData)||void 0===n?void 0:n.provider)===t};function vo(e){var t,n=e.file,r=e.refreshing,i=e.refreshFile,o=(0,b.$G)().t,a=(0,X.SE)().id,l=fo(n,"mendeley")||fo(n,"zotero");l&&(t=n.linkedFileData.importer_id===a);var u=!l||t;return(0,j.jsxs)("button",{className:N()("btn",{"btn-primary":u,"btn-secondary":!u}),onClick:function(){return i(l)},disabled:r||!u,children:[(0,j.jsx)(G.Z,{type:"refresh",spin:r,fw:!0}),(0,j.jsx)("span",{children:r?"".concat(o("refreshing"),""):o("refresh")})]})}function go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xo=[{import:c,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/file-view/tpr-file-view-refresh-button"}];function wo(e){var t=e.setRefreshError,n=e.file,r=(0,W.d)()._id,i=(0,wr.Z)().signal,o=go((0,m.useState)(!1),2),a=o[0],l=o[1],u=(0,m.useCallback)((function(e){l(!0),window.expectingLinkedFileRefreshedSocketFor=n.name;var o={shouldReindexReferences:e||/\.bib$/.test(n.name)};(0,Q.ty)("/project/".concat(r,"/linked_file/").concat(n.id,"/refresh"),{signal:i,body:o}).then((function(){l(!1)})).catch((function(e){var n;l(!1),t((null===(n=e.data)||void 0===n?void 0:n.message)||e.message)}))}),[n,r,i,t]);return xo.length>0?xo.map((function(e){var t=e.import.TPRFileViewRefreshButton,r=e.path;return(0,j.jsx)(t,{file:n,refreshFile:u,refreshing:a},r)}))[0]:(0,j.jsx)(So,{refreshFile:u,refreshing:a})}function So(e){var t=e.refreshFile,n=e.refreshing,r=(0,b.$G)().t;return(0,j.jsxs)("button",{className:"btn btn-primary",onClick:function(){return t(null)},disabled:n,children:[(0,j.jsx)(G.Z,{type:"refresh",spin:n,fw:!0}),(0,j.jsx)("span",{children:n?"".concat(r("refreshing"),""):r("refresh")})]})}function TPRFileViewRefreshError(e){var t=e.file,n=e.refreshError,r=fo(t,"mendeley")||fo(t,"zotero");return(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("br",{}),r?(0,j.jsx)(FileViewMendeleyOrZoteroRefreshError,{file:t}):(0,j.jsx)(FileViewDefaultRefreshError,{refreshError:n})]})}function FileViewMendeleyOrZoteroRefreshError(e){var t=e.file,n=(0,b.$G)().t;return(0,j.jsxs)("div",{className:"alert alert-danger col-md-10 col-md-offset-1",style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,j.jsxs)("div",{children:[n("something_not_right"),"!",(0,j.jsx)("span",{children:t.linkedFileData&&n("try_relinking_provider",{provider:(0,Tt.capitalize)(t.linkedFileData.provider)})})]}),(0,j.jsx)("div",{className:"text-center",children:(0,j.jsx)("button",{className:"btn btn-danger",children:(0,j.jsx)("a",{href:"/user/settings",target:"_blank",style:{fontWeight:"bold",textDecoration:"none"},children:n("go_to_settings")})})})]})}function FileViewDefaultRefreshError(e){var t=e.refreshError,n=(0,b.$G)().t;return(0,j.jsxs)("div",{className:"alert alert-danger col-md-6 col-md-offset-3",children:[n("access_denied"),": ",t]})}var Eo=[{import:s,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/file-view/tpr-file-view-refresh-error"}];function FileViewRefreshError(e){var t=e.file,n=e.refreshError,r=(0,b.$G)().t;return Eo.length>0?Eo.map((function(e){var r=e.import.TPRFileViewRefreshError,i=e.path;return(0,j.jsx)(r,{file:t,refreshError:n},i)}))[0]:(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("br",{}),(0,j.jsxs)("div",{className:"alert alert-danger col-md-6 col-md-offset-3",children:[r("access_denied"),": ",n]})]})}function Co(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Io(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Io(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Io(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ko=[{import:u,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/file-view/tpr-file-view-info"}],Ao=[{import:l,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/file-view/tpr-file-view-not-original-importer"}],Oo=60,To=35,Ro="...",Zo=Oo-To-Ro.length;function No(e){if(e){if(e.length>Oo){var t=e.slice(0,To),n=e.slice(e.length-Zo);return t+Ro+n}return e}}function Po(e){var t,n=e.file,r=(0,W.d)()._id,i=(0,q._i)().permissionsLevel,o=(0,b.$G)().t,a=Co((0,m.useState)(null),2),l=a[0],u=a[1];return n.linkedFileData&&(bo(n,"url")?t=(0,j.jsx)("div",{children:(0,j.jsx)(Fo,{file:n})}):bo(n,"project_file")?t=(0,j.jsx)("div",{children:(0,j.jsx)(Lo,{file:n})}):bo(n,"project_output_file")&&(t=(0,j.jsx)("div",{children:(0,j.jsx)(Mo,{file:n})}))),(0,j.jsxs)("div",{children:[n.linkedFileData&&t,n.linkedFileData&&ko.map((function(e){var t=e.import.TPRFileViewInfo,r=e.path;return(0,j.jsx)(t,{file:n},r)})),n.linkedFileData&&"readOnly"!==i&&(0,j.jsx)(wo,{file:n,setRefreshError:u}),"",(0,j.jsxs)("a",{download:!0,href:"/project/".concat(r,"/file/").concat(n.id),className:"btn btn-secondary-info btn-secondary",children:[(0,j.jsx)(G.Z,{type:"download",fw:!0}),"",(0,j.jsx)("span",{children:o("download")})]}),n.linkedFileData&&Ao.map((function(e){var t=e.import.TPRFileViewNotOriginalImporter,r=e.path;return(0,j.jsx)(t,{file:n},r)}))[0],l&&(0,j.jsx)(FileViewRefreshError,{file:n,refreshError:l})]})}function Fo(e){var t=e.file;return(0,j.jsxs)("p",{children:[(0,j.jsx)(ho,{}),"",(0,j.jsx)(b.cC,{i18nKey:"imported_from_external_provider_at_date",components:[(0,j.jsx)("a",{href:t.linkedFileData.url})],values:{shortenedUrl:No(t.linkedFileData.url),formattedDate:(0,mo.mr)(t.created),relativeDate:(0,mo.K8)(t.created)},shouldUnescape:!0,tOptions:{interpolation:{escapeValue:!0}}})]})}function Lo(e){var t=e.file;return(0,j.jsxs)("p",{children:[(0,j.jsx)(ho,{}),(0,j.jsx)(b.cC,{i18nKey:"imported_from_another_project_at_date",components:t.linkedFileData.v1_source_doc_id?[(0,j.jsx)("span",{})]:[(0,j.jsx)("a",{href:"/project/".concat(t.linkedFileData.source_project_id),target:"_blank",rel:"noopener"})],values:{sourceEntityPath:t.linkedFileData.source_entity_path.slice(1),formattedDate:(0,mo.mr)(t.created),relativeDate:(0,mo.K8)(t.created)},shouldUnescape:!0,tOptions:{interpolation:{escapeValue:!0}}})]})}function Mo(e){var t=e.file;return(0,j.jsxs)("p",{children:[(0,j.jsx)(ho,{}),"",(0,j.jsx)(b.cC,{i18nKey:"imported_from_the_output_of_another_project_at_date",components:t.linkedFileData.v1_source_doc_id?[(0,j.jsx)("span",{})]:[(0,j.jsx)("a",{href:"/project/".concat(t.linkedFileData.source_project_id),target:"_blank",rel:"noopener"})],values:{sourceOutputFilePath:t.linkedFileData.source_output_file_path,formattedDate:(0,mo.mr)(t.created),relativeDate:(0,mo.K8)(t.created)},shouldUnescape:!0,tOptions:{interpolation:{escapeValue:!0}}})]})}function Do(e){var t=e.fileName,n=e.fileId,r=e.onLoad,i=e.onError,o=(0,W.d)()._id;return(0,j.jsx)("img",{src:"/project/".concat(o,"/file/").concat(n),onLoad:r,onError:i,alt:t})}var _o=n(97502),Bo=function(e){var t=e.fileId,r=e.onLoad,i=e.onError,o=(0,K.Z)(),a=(0,_o.Yt)(),l=a.previewByPath,u=a.pathInFolder,c=(0,m.useCallback)((async function(e){if(e){var a=(await n.e(7960).then(n.bind(n,17960)).then((function(e){return e.default}))).PDFJS;if(!o.current)return void i();var c=u(t),s=c?l(c):null;if(!s)return void i();var f=await a.getDocument({url:s.url,isEvalSupported:!1}).promise;if(!o.current)return void i();e.textContent="";for(var d=window.devicePixelRatio||1,p=1;p<=f.numPages;p++){var m=await f.getPage(p),h=m.getViewport({scale:d}),y=document.createElement("canvas");y.classList.add("pdf-page"),y.width=h.width,y.height=h.height,y.style.width="".concat(h.width/d,"px"),y.style.height="".concat(h.height/d,"px"),e.append(y),m.render({canvasContext:y.getContext("2d"),viewport:h})}return r(),function(){f.cleanup().catch(C.c.error),f.destroy()}}}),[o,u,t,l,r,i]);return(0,j.jsx)("div",{className:"file-view-pdf",ref:c})};n(85940);function Ho(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Uo=2097152;function Jo(e){var t=e.file,n=e.onLoad,r=e.onError,i=(0,W.d)()._id,o=Ho((0,m.useState)(""),2),a=o[0],l=o[1],u=Ho((0,m.useState)(!1),2),c=u[0],s=u[1],f=Ho((0,m.useState)(!1),2),d=f[0],p=f[1],h=(0,wr.Z)(),y=(0,wr.Z)();return(0,m.useEffect)((function(){if(!d){var e,o="/project/".concat(i,"/file/").concat(t.id),a=setTimeout((function(){return h.abort()}),1e4);fetch(o,{method:"HEAD",signal:h.signal}).then((function(e){if(!e.ok)throw new Error("HTTP Error Code: "+e.status);return e.headers.get("Content-Length")})).then((function(t){var r=!1,i=null;return t&&Number(t)>Uo&&(r=!0,i=Uo),null!=i&&(o+="?range=0-".concat(i)),e=window.setTimeout((function(){return y.abort()}),6e4),fetch(o,{signal:y.signal}).then((function(e){return e.text().then((function(e){r&&(e=e.replace(/\n.*$/,"")),l(e),n(),s(r)}))}))})).catch((function(e){C.c.error("Error fetching file contents",e),r()})).finally((function(){p(!1),clearTimeout(a),clearTimeout(e)}))}}),[i,t.id,r,n,d,h,y]),(0,j.jsx)("div",{children:a&&(0,j.jsx)("div",{className:"text-preview",children:(0,j.jsxs)("div",{className:"scroll-container",children:[(0,j.jsx)("p",{children:a}),c&&(0,j.jsx)("p",{children:"..."})]})})})}function Go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xo=["png","jpg","jpeg","gif"];function Vo(e){var t=e.file,n=Go((0,m.useState)(!0),2),r=n[0],i=n[1],o=Go((0,m.useState)(!1),2),a=o[0],l=o[1],u=(0,b.$G)().t,c=window.ExposedSettings,s=c.textExtensions,f=c.editableFilenames,d=t.name.split(".").pop().toLowerCase(),p=s.includes(d)||f.includes(t.name.toLowerCase()),h=Xo.includes(d),y="pdf"===d,v=!p&&!h&&!y,g=(0,m.useCallback)((function(){i(!1)}),[]),x=(0,m.useCallback)((function(){a||(i(!1),l(!0))}),[a]),w=(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Po,{file:t}),h&&(0,j.jsx)(Do,{fileName:t.name,fileId:t.id,onLoad:g,onError:x}),p&&(0,j.jsx)(Jo,{file:t,onLoad:g,onError:x}),y&&(0,j.jsx)(Bo,{fileId:t.id,onLoad:g,onError:x})]});return(0,j.jsxs)("div",{className:"file-view full-size",children:[!a&&w,!v&&r&&(0,j.jsx)(Ko,{}),(v||a)&&(0,j.jsx)("p",{className:"no-preview",children:u("no_preview_available")})]})}function Ko(){var e=(0,b.$G)().t;return(0,j.jsx)("div",{className:"loading-panel loading-panel-file-view",children:(0,j.jsxs)("span",{children:[(0,j.jsx)(G.Z,{type:"refresh",spin:!0}),"",e("loading"),""]})})}function Wo(e){var t=e.selectedEntityCount,n=(0,b.$G)().t;return(0,j.jsx)("div",{className:"multi-selection-ongoing",children:(0,j.jsx)("div",{className:"multi-selection-message",children:(0,j.jsx)("h4",{children:"".concat(t," ").concat(n("files_selected"))})})})}Vo.propTypes={file:J().shape({id:J().string,name:J().string}).isRequired};var Yo=n(14185),Qo=n(92227),$o=n(32755),ea=n(53669),ta=function(e){var t=e.onDismiss,n=(0,b.$G)().t;return(0,j.jsx)(ei.Z,{ariaLive:"polite",className:"editor-notification ol-overlay hidden-xs-container",content:(0,j.jsx)("div",{children:(0,j.jsx)("p",{children:n("writefull_disable_prompt_body")})}),customIcon:(0,j.jsx)("div",{className:"writefull-logo-bg",children:(0,j.jsx)(ea.Z,{width:"50",height:"50",background:"#fff"})}),isDismissible:!0,onDismiss:t,title:n("writefull_prompt_title"),type:"offer"})};function na(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ra(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ra(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ia(e){var t=e.delay,n=void 0===t?3e3:t,r=e.initialState,i=void 0!==r&&r,o=na((0,m.useState)((function(){return i})),2),a=o[0],l=o[1];return(0,m.useEffect)((function(){var e=setTimeout((function(){return l(!!document.querySelector("grammarly-desktop-integration"))}),n);return function(){return clearTimeout(e)}}),[n]),a}function oa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var la="writefull-oauth-promotion",ua={location:"notification",name:la};function ca(e){var t=e.grammarlyCheckDelay,n=void 0===t?3e3:t,r=oa((0,m.useState)(!1),2),i=r[0],o=r[1],a=oa((0,m.useState)(!1),2),l=a[0],u=a[1],c=(0,X.SE)().writefull,s=(0,q._i)(),f=s.inactiveTutorials,d=s.setWritefullAdClicked,p=(0,b.$G)().t,h=$r(la,ua),y=h.completeTutorial,v=h.dismissTutorial,g=h.maybeLater,x=h.showPopup,w=h.tryShowingPopup,S=h.clearPopup,E=ia({initialState:!0,delay:n}),I=(0,Lr.ye)(la),k=f.includes(la),A=(0,m.useMemo)((function(){var e,t="extension"===(null===(e=window.writefull)||void 0===e?void 0:e.type);return I&&!t&&!(null!=c&&c.enabled)&&!E&&!k}),[c,E,k,I]);(0,m.useEffect)((function(){A?w():S()}),[A,w,S]);var O=(0,m.useCallback)((async function(e){try{await(0,Q.BS)("/writefull/enabled",{body:{enabled:!0}})}catch(e){C.c.error(e)}o(!0),await y({event:"promo-click",action:"complete",button:e}),d(e)}),[y,d]),T=(0,m.useCallback)((function(){o(!1)}),[o]),R=p("try_writefull"),Z=(0,j.jsxs)("div",{children:[(0,j.jsx)(oe.Z,{bsStyle:null,className:"btn-secondary","data-testid":"try-writefull-button",onClick:function(){return O("try-it")},children:R}),(0,j.jsx)(oe.Z,{className:"btn-bg-ghost",bsStyle:null,onClick:g,"data-cy":"maybe-later",children:p("maybe_later")})]}),N=(0,j.jsx)(ei.Z,{action:Z,ariaLive:"polite",className:"editor-notification ol-overlay hidden-xs-container",content:(0,j.jsx)("div",{children:(0,j.jsx)("p",{children:p("writefull_prompt_body")})}),customIcon:(0,j.jsx)("div",{className:"writefull-logo-bg",children:(0,j.jsx)(ea.Z,{width:"50",height:"50",background:"#fff"})}),disclaimer:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.cC,{i18nKey:"writefull_alternate_login_prompt",components:[(0,j.jsx)(oe.Z,{className:"btn-inline-link",onClick:function(){return O("log-in")},bsStyle:null},"log-in"),(0,j.jsx)("a",{href:"https://www.writefull.com/terms",className:"wf-promotion-link",target:"_blank",rel:"noopener"},"terms-of-service"),(0,j.jsx)("a",{href:"https://www.writefull.com/privacy",className:"wf-promotion-link",target:"_blank",rel:"noopener"},"privacy-policy")]}),(0,j.jsxs)("details",{onToggle:function(e){u(e.target.open)},children:[(0,j.jsxs)("summary",{className:"writefull-disclosure-summary my-1",children:[p("writefull_prompt_terms_title"),(0,j.jsx)(mt.Z,{type:l?"expand_more":"keyboard_arrow_right"})]}),(0,j.jsx)(b.cC,{i18nKey:"writefull_prompt_terms",components:[(0,j.jsx)("b",{},"command"),(0,j.jsx)("p",{},"spacing"),(0,j.jsx)("a",{href:"/learn/how-to/Writefull_integration",className:"wf-promotion-link",target:"_blank",rel:"noopener"},"learn-more")]})]})]}),isActionBelowContent:!0,isDismissible:!0,onDismiss:v,title:p("writefull_prompt_title"),type:"offer"});return x||i?k?(0,j.jsx)(ta,{onDismiss:T}):N:null}var sa=ca,fa=function(e){var t=e.onDismiss,n=e.handleLearnMore,r=e.handleFreeTrialClick,i=(0,b.$G)().t,o=(0,j.jsxs)("div",{children:[(0,j.jsx)(Nr.Z,{source:"open-bib-file-upgrade-prompt",buttonProps:{bsStyle:"default",className:"btn-secondary"},handleClick:r,children:i("upgrade")}),(0,j.jsx)(oe.Z,{bsStyle:null,className:"btn-bg-ghost",href:"/learn/how-to/How_to_link_your_Overleaf_account_to_Mendeley_and_Zotero",target:"blank",onClick:n,children:i("learn_more")})]}),a=(0,j.jsx)("div",{children:i("easily_import_and_sync_your_references")}),l=(0,j.jsx)("img",{src:"/img/third-party-references/book-illlustration.svg","aria-hidden":"true",alt:"better bibliographies",width:64,height:64});return(0,j.jsx)("div",{className:"tpr-editor-prompt-container tpr-bib-file-prompt hidden-xs-container fade-slide-in",children:(0,j.jsx)(ei.Z,{type:"offer",action:o,isDismissible:!0,isActionBelowContent:!0,customIcon:l,title:i("better_bibliographies"),content:a,onDismiss:t})})};function da(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ma="bib-file-tpr-prompt",ha={location:"open-bib-file-upgrade-prompt",name:ma},ya=function(){var e=(0,Lr.yW)().splitTestVariants,t=(0,X.SE)(),n=t.allowedFreeTrial,r=t.features,i=(0,q._i)().inactiveTutorials,o=da((0,I.Z)("editor"),1)[0],a=Qr(ma,ha),l=a.completeTutorial,u=a.dismissTutorial,c=a.tryShowingPopup,s=a.showPopup,f=a.clearPopup;(0,m.useEffect)((function(){var t="edit-bib-file"===e["bib-file-tpr-prompt"],a=i.includes(ma),l=!(null!=r&&r.mendeley||null!=r&&r.zotero),u=n&&l,s=null==o?void 0:o.open_doc_name,d=s&&(null==s?void 0:s.endsWith(".bib"));t&&u&&d&&!a?c("reference-manager-prompt-view"):t&&f()}),[n,r,o,i,c,u,e,f]);var d=(0,m.useCallback)((function(){return l({event:"promo-click",action:"complete",button:"Upgrade"})}),[l]),p=(0,m.useCallback)((function(){return z.BZ("promo-click",{...ha,button:"Learn more"})}),[]);return s?(0,j.jsx)(fa,{handleFreeTrialClick:d,handleLearnMore:p,onDismiss:u}):null},ba=(0,m.memo)(ya),va=n(48755),ga=n(76066);function ja(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wa=function(e){var t=e.width,n=void 0===t?"40":t,r=e.height,i=void 0===r?"40":r,o=e.background,a=void 0===o?"none":o;return(0,j.jsxs)("svg",{width:n,height:i,viewBox:"0 0 40 40",fill:a,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{verticalAlign:"middle"},children:[(0,j.jsx)("rect",{x:"1.6665",y:"1.66666",width:"36.6667",height:"36.6667",fill:"url(#grammarly-pattern)"}),(0,j.jsxs)("defs",{children:[(0,j.jsx)("pattern",{id:"grammarly-pattern",patternContentUnits:"objectBoundingBox",width:"1",height:"1",children:(0,j.jsx)("use",{xlinkHref:"#grammarly-image",transform:"scale(0.00195312)"})}),(0,j.jsx)("image",{id:"grammarly-image",width:"512",height:"512",xlinkHref:"data:image/png;base64,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"})]})]})},Sa=n(99618);function Ea(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ca(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ca(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ia(){var e=(0,Sa.Z)("ol-ExposedSettings").isOverleaf,t=Ea((0,m.useState)(!1),2),n=t[0],r=t[1],i=(0,b.$G)().t,o=ia({initialState:!1}),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"editor",n=ja((0,Fn.Z)("".concat(t,".has_dismissed_").concat(e,"_until")),2),r=n[0],i=n[1],o=ja((0,m.useState)(!0),2),a=o[0],l=o[1];return(0,m.useEffect)((function(){var n=ga.Z.getItem("".concat(t,".has_dismissed_").concat(e)),i=Boolean(r&&new Date(r)>new Date);l(n||i)}),[l,r,e,t]),{stillDissmissed:a,remindThemLater:(0,m.useCallback)((function(){var e=new Date;e.setDate(e.getDate()+1),i(e)}),[i]),saveDismissed:(0,m.useCallback)((function(){ga.Z.setItem("".concat(t,".has_dismissed_").concat(e),!0)}),[e,t])}}("grammarly_advert"),l=a.stillDissmissed,u=a.remindThemLater,c=a.saveDismissed;(0,m.useEffect)((function(){o&&!l&&(z.BZ("grammarly-advert-shown"),r(!0))}),[l,o,r]);var s=(0,m.useCallback)((function(){r(!1),c(),z.BZ("grammarly-advert-dismissed")}),[c]),f=(0,m.useCallback)((function(){z.BZ("promo-click",{location:"notification",name:"grammarly-advert",type:"click"}),c(),r(!1),window.open("https://grammarly.go2cloud.org/aff_c?offer_id=373&aff_id=142242")}),[c]),d=(0,m.useCallback)((function(){z.BZ("promo-click",{location:"notification",name:"grammarly-advert",type:"pause"}),r(!1),u()}),[u]);if(!e||!n)return null;var p=(0,j.jsxs)("div",{children:[(0,j.jsx)(oe.Z,{bsStyle:null,className:"btn-secondary",onClick:f,children:i("claim_discount")}),(0,j.jsx)(oe.Z,{className:"btn-bg-ghost",bsStyle:null,onClick:d,children:i("maybe_later")})]});return(0,j.jsx)(ei.Z,{action:p,ariaLive:"polite",className:"editor-notification ol-overlay hidden-xs-container",content:(0,j.jsx)("div",{children:(0,j.jsx)("p",{children:"Get 25% off Grammarly Premium with this exclusive offer for Overleaf users."})}),customIcon:(0,j.jsx)("div",{children:(0,j.jsx)(wa,{width:"50",height:"50",background:"#fff"})}),isActionBelowContent:!0,isDismissible:!0,onDismiss:s,title:"Love Grammarly? Then you're in luck!",type:"offer"})}var ka=[{import:f,path:"/overleaf/services/web/modules/writefull/frontend/js/components/writefull-promotion"},{import:d,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/promotions/edit-bib-file-prompt"}],Aa=(0,m.lazy)((function(){return Promise.all([n.e(7198),n.e(3261),n.e(3539),n.e(9865),n.e(3546),n.e(7042),n.e(9706),n.e(1758),n.e(7029),n.e(88),n.e(9516)]).then(n.bind(n,49219))}));function Oa(){return(0,j.jsxs)(m.Suspense,{fallback:(0,j.jsx)(Ft.w,{delay:500}),children:[ka.map((function(e){var t=e.import.default,n=e.path;return(0,j.jsx)(t,{},n)})),(0,j.jsx)(Ia,{}),(0,j.jsx)(Aa,{})]})}var Ta=(0,y.Z)((0,m.memo)(Oa),va.l),Ra=function(){var e=(0,b.$G)().t;return(0,j.jsx)("div",{className:"loading-panel",children:(0,j.jsxs)("span",{children:[(0,j.jsx)("i",{className:"fa fa-spin fa-refresh"}),"",e("loading"),""]})})};function Za(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Na(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Na(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Na(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pa=(0,m.lazy)((function(){return n.e(7483).then(n.bind(n,27483))})),Fa=function(){var e=Za((0,I.Z)("editor"),1)[0],t=(0,Pi.z)(),n=t.selectedEntityCount,r=t.openEntity;if(!(0,H.QA)().currentDocumentId)return null;var i=Boolean((!e.sharejs_doc||e.opening)&&!e.error_state&&e.open_doc_id);return(0,j.jsx)("div",{className:N()("ide-react-editor-content","full-size",{hidden:"doc"!==(null==r?void 0:r.type)||1!==n}),children:(0,j.jsxs)(R.eh,{autoSaveId:"ide-editor-layout",direction:"vertical",children:[(0,j.jsxs)(R.s_,{id:"panel-source-editor",order:1,className:"ide-react-editor-panel",children:[(0,j.jsx)(Ta,{}),i&&(0,j.jsx)(Ra,{})]}),e.showSymbolPalette&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Jt,{id:"editor-symbol-palette"}),(0,j.jsx)(R.s_,{id:"panel-symbol-palette",order:2,defaultSize:25,minSize:10,maxSize:50,children:(0,j.jsx)(m.Suspense,{fallback:(0,j.jsx)(Ft.w,{delay:500}),children:(0,j.jsx)(Pa,{})})})]})]})})};function La(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ma(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ma(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ma(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Da=function(){var e=La((0,m.useState)(!1),2),t=e[0],n=e[1],r=(0,b.$G)().t,i=function(){var e=(0,_.l5)(),t=e.view,n=e.pdfLayout,r=e.changeLayout,i=e.detachRole,o=e.reattach,a=(0,m.useRef)(null),l="sideBySide"===n||"pdf"===t;io(l,a);var u=(0,m.useCallback)((function(){l?r("flat","editor"):r("sideBySide")}),[r,l]),c=(0,m.useCallback)((function(e){e?("detacher"===i&&o(),r("sideBySide")):r("flat","editor")}),[r,i,o]);return{togglePdfPane:u,handlePdfPaneExpand:(0,m.useCallback)((function(){"flat"===n&&"editor"===t&&r("sideBySide","editor")}),[r,n,t]),handlePdfPaneCollapse:(0,m.useCallback)((function(){"sideBySide"===n&&r("flat","editor")}),[r,n]),setPdfIsOpen:c,pdfIsOpen:l,pdfPanelRef:a}}(),o=i.togglePdfPane,a=i.handlePdfPaneExpand,l=i.handlePdfPaneCollapse,u=i.setPdfIsOpen,c=i.pdfIsOpen,s=i.pdfPanelRef,f=(0,_.l5)(),d=f.view,p=f.pdfLayout,h=(0,Pi.z)(),y=h.selectedEntityCount,v=h.openEntity,g="editor"===d||"file"===d||"sideBySide"===p;return(0,j.jsxs)(R.eh,{autoSaveId:"ide-editor-pdf-layout",direction:"horizontal",className:N()({"ide-panel-group-resizing":t,hidden:"history"===d}),children:[(0,j.jsxs)(R.s_,{id:"panel-main",order:1,defaultSize:50,minSize:5,className:N()("ide-react-panel",{"ide-panel-group-resizing":t,hidden:!g}),children:[0===y&&(0,j.jsx)(so,{}),1===y&&"fileRef"===(null==v?void 0:v.type)&&(0,j.jsx)(Vo,{file:(0,$o.P)(v.entity)}),y>1&&(0,j.jsx)(Wo,{selectedEntityCount:y}),(0,j.jsx)(Fa,{})]}),(0,j.jsxs)(D,{resizable:"sideBySide"===p,onDoubleClick:o,onDragging:n,className:N()({hidden:!g}),children:[(0,j.jsx)(zt,{id:"editor-pdf",togglerType:"east",isOpen:c,setIsOpen:u,tooltipWhenOpen:r("tooltip_hide_pdf"),tooltipWhenClosed:r("tooltip_show_pdf")}),"sideBySide"===p&&(0,j.jsx)("div",{className:"synctex-controls",children:(0,j.jsx)(Yo.bx,{})})]}),(0,j.jsxs)(R.s_,{ref:s,id:"panel-pdf",order:2,defaultSize:50,minSize:5,collapsible:!0,onCollapse:l,onExpand:a,className:"ide-react-panel",children:[c&&(0,j.jsx)(Qo.Z,{}),"flat"===p&&"pdf"===d&&(0,j.jsx)("div",{className:"synctex-controls",hidden:!0,children:(0,j.jsx)(Yo.bx,{})})]})]})},_a=(0,m.lazy)((function(){return Promise.all([n.e(7198),n.e(3261),n.e(3539),n.e(9865),n.e(3546),n.e(7042),n.e(9706),n.e(1758),n.e(7029),n.e(88),n.e(9516),n.e(838)]).then(n.bind(n,70838))}));var Ba=(0,y.Z)((function(){return"history"!==(0,_.l5)().view?null:(0,j.jsx)(m.Suspense,{fallback:(0,j.jsx)(Ft.w,{delay:500}),children:(0,j.jsx)(_a,{})})}),va.l),Ha=function(){var e=(0,_.l5)().view,t=function(){var e=ao((0,m.useState)(!0),2),t=e[0],n=e[1],r=ao((0,m.useState)(!1),2),i=r[0],o=r[1],a=(0,m.useRef)(null);io(t,a);var l=(0,m.useCallback)((function(){n((function(e){return!e}))}),[]),u=(0,m.useCallback)((function(){n(!0)}),[]),c=(0,m.useCallback)((function(){n(!1)}),[]);return{isOpen:t,setIsOpen:n,panelRef:a,togglePane:l,handlePaneExpand:u,handlePaneCollapse:c,resizing:i,setResizing:o}}(),n=t.isOpen,r=t.setIsOpen,i=t.panelRef,o=t.togglePane,a=t.handlePaneExpand,l=t.handlePaneCollapse,u=t.resizing,c=t.setResizing,s=function(){var e=(0,_.l5)(),t=e.chatIsOpen,n=e.setChatIsOpen,r=uo((0,m.useState)(!1),2),i=r[0],o=r[1],a=(0,m.useRef)(null);return io(t,a),{isOpen:t,panelRef:a,resizing:i,setResizing:o,togglePane:(0,m.useCallback)((function(){n((function(e){return!e}))}),[n]),handlePaneExpand:(0,m.useCallback)((function(){n(!0)}),[n]),handlePaneCollapse:(0,m.useCallback)((function(){n(!1)}),[n])}}(),f=s.isOpen,d=s.panelRef,p=s.togglePane,h=s.resizing,y=s.setResizing,v=s.handlePaneCollapse,g=s.handlePaneExpand,x=(0,b.$G)().t;return(0,j.jsxs)("div",{className:"ide-react-main",children:[(0,j.jsx)(At,{}),(0,j.jsx)("div",{className:"ide-react-body",children:(0,j.jsxs)(R.eh,{autoSaveId:"ide-outer-layout",direction:"horizontal",className:N()({"ide-panel-group-resizing":u||h}),children:[(0,j.jsxs)(R.s_,{ref:i,id:"panel-sidebar",order:1,defaultSize:15,minSize:5,maxSize:80,collapsible:!0,onCollapse:l,onExpand:a,children:[(0,j.jsx)(oo,{}),"history"===e&&(0,j.jsx)(Ut,{})]}),(0,j.jsx)(D,{onDoubleClick:o,resizable:n,onDragging:c,children:(0,j.jsx)(zt,{id:"panel-sidebar",togglerType:"west",isOpen:n,setIsOpen:r,tooltipWhenOpen:x("tooltip_hide_filetree"),tooltipWhenClosed:x("tooltip_show_filetree")})}),(0,j.jsx)(R.s_,{id:"panel-outer-main",order:2,children:(0,j.jsxs)(R.eh,{autoSaveId:"ide-inner-layout",direction:"horizontal",children:[(0,j.jsxs)(R.s_,{className:"ide-react-panel",id:"panel-main",order:1,children:[(0,j.jsx)(Ba,{}),(0,j.jsx)(Da,{})]}),(0,j.jsx)(D,{onDoubleClick:p,resizable:f,onDragging:y}),(0,j.jsx)(R.s_,{ref:d,id:"panel-chat",order:2,defaultSize:20,minSize:5,maxSize:30,collapsible:!0,onCollapse:v,onExpand:g,children:(0,j.jsx)(Ht,{})})]})})]})})]})},za=n(72309);function Ua(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ja(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ja(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ja(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ga=(0,m.memo)((function(){var e=(0,_.l5)().setLeftMenuShown,t=(0,za.cq)().userSettings,n=t.editorTheme,r=t.overallTheme,i=Ua((0,m.useState)({editorTheme:n,overallTheme:r}),1)[0],o=(0,m.useRef)(null);return(0,m.useEffect)((function(){o.current&&(n===i.editorTheme&&r===i.overallTheme||(o.current.style.opacity="0"))}),[n,r,i]),(0,j.jsx)("div",{id:"left-menu-mask",ref:o,onClick:function(){return e(!1)}})})),qa=(0,m.lazy)((function(){return Promise.all([n.e(7198),n.e(3261),n.e(1758),n.e(7769)]).then(n.bind(n,84181))}));function Xa(){var e=(0,_.l5)(),t=e.leftMenuShown,n=e.setLeftMenuShown;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ae.Z,{backdropClassName:"left-menu-modal-backdrop",keyboard:!0,onHide:function(){n(!1)},id:"left-menu-modal",show:t,children:(0,j.jsx)(ie.Z.Body,{className:N()("full-size",{shown:t}),id:"left-menu",children:(0,j.jsx)(m.Suspense,{fallback:(0,j.jsx)(Ft.w,{delay:500}),children:(0,j.jsx)(qa,{})})})}),t&&(0,j.jsx)(Ga,{})]})}var Va=(0,m.memo)(Xa);var Ka=n(65403),Wa=n(66123),Ya=n(50066);function Qa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var el=function(){var e=(0,b.$G)().t,t=(0,E.Km)().socket,n=(0,qt.I)().projectId,r=(0,Ya.a)().showGenericMessageModal,i=Qa((0,I.Z)("project.publicAccesLevel"),2)[1],o=Qa((0,I.Z)("project.members"),2)[1],a=Qa((0,I.Z)("project.invites"),2)[1],l=(0,ar.T)();(0,Ka.Z)(t,"project:access:revoked",(0,m.useCallback)((function(){r(e("removed_from_project"),e("you_have_been_removed_from_this_project_and_will_be_redirected_to_project_dashboard"));var t=window.setTimeout((function(){l.assign("/project")}),5e3);return function(){window.clearTimeout(t)}}),[r,e,l])),(0,Ka.Z)(t,"project:publicAccessLevel:changed",(0,m.useCallback)((function(e){e.newAccessLevel&&i(e.newAccessLevel)}),[i])),(0,Ka.Z)(t,"project:collaboratorAccessLevel:changed",(0,m.useCallback)((function(){(0,Wa.eH)(n).then((function(e){var t=e.members;t&&o(t)})).catch((function(e){C.c.error("Error fetching members for project",e)}))}),[n,o])),(0,Ka.Z)(t,"project:membership:changed",(0,m.useCallback)((function(e){e.members&&(0,Wa.eH)(n).then((function(e){var t=e.members;t&&o(t)})).catch((function(e){C.c.error("Error fetching members for project",e)})),e.invites&&(0,Wa.bh)(n).then((function(e){var t=e.invites;t&&a(t)})).catch((function(e){C.c.error("Error fetching invites for project",e)}))}),[n,a,o]))};n(35883);var tl=n(43363),nl=n(19034),rl=n.n(nl);function il(e,t,n){(0,m.useEffect)((function(){return e.addEventListener(t,n),function(){e.removeEventListener(t,n)}}),[e,t,n])}function ol(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return al(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return al(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function al(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ll(){var e=(0,qt.I)().projectId,t=(0,H.QA)().getEditorType,n=ol((0,m.useState)(0),2),r=n[0],i=n[1],o=ol((0,m.useState)((function(){return new Date})),2),a=o[0],l=o[1],u=(0,m.useCallback)((function(){C.c.log("[Event] heartbeat trigger");var n=t();if(null!==n&&!(a>new Date)){var o=function(e){var t={editorType:e},n=(0,tl.N)();if(n.numberOfEntries>0)for(var r of Object.entries(n)){var i=ol(r,2),o=i[0],a=i[1],l="cm6Perf"+o.charAt(0).toUpperCase()+o.slice(1);null!==a&&(t[l]=a)}return t}(n);C.c.log("[Event] send heartbeat request",o),function(e,t){(0,Q.BS)("/editingSession/".concat(e),{body:{segmentation:t}}).catch(C.c.error)}(e,o),i((function(e){return e+1}));var u=r<=2?30:r<=6?60*(r-2):300;l(rl()().add(u,"seconds").toDate())}}),[t,r,a,e]);(0,Me.Z)("cursor:editor:update",u),(0,Me.Z)("scroll:editor:update",u),il(document,"click",u)}var ul=n(87828);function cl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fl(){var e=(0,E.Km)().connectionState,t=(0,b.$G)().t,n=cl((0,m.useState)(0),2),r=n[0],i=n[1],o=cl((0,m.useState)(!1),2),a=o[0],l=o[1];return(0,m.useEffect)((function(){e.forceDisconnected&&l(!0)}),[e.forceDisconnected]),(0,m.useEffect)((function(){e.forceDisconnected&&i(e.forcedDisconnectDelay)}),[e.forceDisconnected,e.forcedDisconnectDelay]),(0,m.useEffect)((function(){if(a){var e=window.setInterval((function(){i((function(e){return Math.max(0,e-1)}))}),1e3);return function(){window.clearInterval(e)}}}),[a]),a?(0,j.jsxs)(ae.Z,{show:!0,onHide:function(){},className:"lock-editor-modal",backdrop:!1,keyboard:!1,children:[(0,j.jsx)(ie.Z.Header,{children:(0,j.jsx)(ie.Z.Title,{children:t("please_wait")})}),(0,j.jsx)(ie.Z.Body,{children:t("were_performing_maintenance",{seconds:r})})]}):null}var dl=(0,m.memo)(fl),pl=(n(79321),function(){var e=(0,b.$G)().t;return(0,j.jsxs)(ae.Z,{show:!0,onHide:function(){},className:"lock-editor-modal",backdrop:!1,keyboard:!1,children:[(0,j.jsx)(ie.Z.Header,{children:(0,j.jsx)(ie.Z.Title,{children:e("connection_lost")})}),(0,j.jsx)(ie.Z.Body,{children:e("sorry_the_connection_to_the_server_is_down")})]})});function ml(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||yl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hl(e){return function(e){if(Array.isArray(e))return bl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yl(e,t){if(e){if("string"==typeof e)return bl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bl(e,t):void 0}}function bl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vl=function(e){var t=e.unsavedDocs;return(0,j.jsx)(j.Fragment,{children:hl(t.entries()).map((function(e){var t=ml(e,2),n=t[0],r=t[1];return r>8&&(0,j.jsx)(gl,{docId:n,seconds:r},n)}))})},gl=function(e){var t=e.docId,n=e.seconds,r=(0,_o.Yt)(),i=r.pathInFolder,o=r.findEntityByPath,a=(0,b.$G)().t,l=(0,m.useMemo)((function(){var e=i(t);return e?o(e):null}),[t,o,i]);return l?(0,j.jsx)(g.Z,{bsStyle:"warning",bsSize:"small",children:a("saving_notification_with_seconds",{docname:l.entity.name,seconds:n})}):null};function jl(e){return function(e){if(Array.isArray(e))return Sl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||wl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||wl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wl(e,t){if(e){if("string"==typeof e)return Sl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sl(e,t):void 0}}function Sl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var El=function(){var e=(0,H.QA)(),t=e.openDocs,n=e.debugTimers,r=(0,q._i)(),i=r.permissionsLevel,o=r.setPermissionsLevel,a=xl((0,m.useState)(!1),2),l=a[0],u=a[1],c=xl((0,m.useState)(new Map),2),s=c[0],f=c[1],d=(0,k.I)(),h=(0,m.useRef)(s);(0,m.useEffect)((function(){h.current=s}),[s]);var y=(0,m.useRef)(i);(0,m.useEffect)((function(){y.current=i}),[i]),(0,Me.Z)("beforeunload",(0,m.useCallback)((function(e){t.hasUnsavedChanges()&&e.preventDefault()}),[t])),(0,m.useEffect)((function(){var e=window.setInterval((function(){n.current.CheckUnsavedDocs=Date.now();var e=new Map,r=t.unsavedDocIds();for(var i of r){var o,a=(null!==(o=h.current.get(i))&&void 0!==o?o:0)+1;e.set(i,a)}(e.size>0||h.current.size>0)&&(h.current=e,f(e))}),1e3);return function(){window.clearInterval(e)}}),[t,n]);var b=Math.max.apply(Math,[0].concat(jl(s.values())));(0,m.useEffect)((function(){u(b>15)}),[b]);var v=(0,m.useRef)(null);return(0,m.useEffect)((function(){l?(v.current=y.current,o("readOnly"),u(!0)):v.current&&o(v.current)}),[l,o]),(0,m.useEffect)((function(){0===s.size&&"readOnly"===y.current&&u(!1)}),[s]),(0,j.jsxs)(j.Fragment,{children:[l&&(0,j.jsx)(pl,{}),s.size>0&&d&&(0,p.createPortal)((0,j.jsx)(vl,{unsavedDocs:s}),d)]})},Cl=n(61019),Il=(0,m.memo)((function(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(dl,{}),(0,j.jsx)(El,{}),(0,j.jsx)(Cl.Z,{})]})}));function kl(){var e,t,n,r,i,o,a,l;return e=(0,_.l5)(),t=e.view,n=e.leftMenuShown,r=e.chatIsOpen,(0,m.useEffect)((function(){"editor"!==t&&"pdf"!==t&&(0,z.xQ)("ide-open-view-".concat(t,"-once"))}),[t]),(0,m.useEffect)((function(){n&&(0,z.xQ)("ide-open-left-menu-once")}),[n]),(0,m.useEffect)((function(){r&&(0,z.xQ)("ide-open-chat-once")}),[r]),el(),ll(),i=(0,E.Km)().registerUserActivity,(0,Me.Z)("cursor:editor:update",i),il(document.body,"click",i),function useHasLintingError(){var e=(0,ul.A3)().setHasLintingError;(0,Me.Z)("editor:lint",(function(t){e(t.detail.hasLintingError)}))}(),o=(0,$.IM)(),a=(0,Y.O)().fileTreeData,l=(0,m.useCallback)((function(e){var t=(0,rn.Z7)(a,e);"fileRef"===(null==t?void 0:t.type)&&window.dispatchEvent(new CustomEvent("editor.openDoc",{detail:e}))}),[a]),o.binaryFilesManager={openFileWithId:l},(0,j.jsxs)(k.f,{children:[(0,j.jsx)(T,{}),(0,j.jsx)(Il,{}),(0,j.jsx)(Va,{}),(0,j.jsx)(Ha,{})]})}Il.displayName="Modals";var Al=n(35324),Ol=n(42141),Tl=n(29246);function Rl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Nl=new Set(["initial"]),Pl=new Set(["initial","render","connection","translations","project"]),Fl=function(e){var t=e.setLoaded,n=Rl((0,m.useState)(Nl),2),r=n[0],i=n[1],o=r.size/Pl.size*100;(0,m.useEffect)((function(){t(100===o)}),[o,t]);var a=(0,E.Km)(),l=a.connectionState,u=a.isConnected,c=(0,Tl.Z)(),s=(0,qt.I)().projectJoined;(0,m.useEffect)((function(){i((function(e){return new Set(e).add("render")}))}),[]),(0,m.useEffect)((function(){u&&i((function(e){return new Set(e).add("connection")}))}),[u]),(0,m.useEffect)((function(){c.isReady&&i((function(e){return new Set(e).add("translations")}))}),[c.isReady]),(0,m.useEffect)((function(){s&&i((function(e){return new Set(e).add("project")}))}),[s]);var f=function LoadingScreenError(){return l.error?"io-not-loaded"===l.error?"Could not connect to websocket server :(":l.error:c.error?(0,Sa.Z)("ol-translationLoadErrorMessage"):""},d=(0,Sa.Z)("ol-loadingText"),p=Boolean(l.error||c.error);return(0,j.jsxs)("div",{className:"loading-screen",children:[(0,j.jsx)(Ol.Z,{loadProgress:o,label:d,hasError:p}),p&&(0,j.jsx)("p",{className:"loading-screen-error",children:(0,j.jsx)(f,{})})]})};function Ll(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ml(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ml(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ml(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Dl=function(){var e=Ll((0,m.useState)(!1),2),t=e[0],n=e[1];return(0,j.jsx)(Al.u,{children:t?(0,j.jsx)(kl,{}):(0,j.jsx)(Fl,{setLoaded:n})})},_l=(0,y.Z)((0,m.memo)(Dl),h._);p.render((0,j.jsx)(_l,{}),document.getElementById("ide-root"))},44872:function(e,t,n){n.d(t,{Z:function(){return s}});n(34769),n(34115);var r=n(2784),i=n(52322),o=["as"];function a(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=function(e){var t=e.as,n=a(e,o),r=t||"div";return(0,i.jsx)(r,{...n})},u=["onClick","onMouseDown","offset"];function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=function(e){var t=e.onClick,n=e.onMouseDown,o=e.offset,a=void 0===o?50:o,s=c(e,u),f=(0,r.useRef)(!1),d=(0,r.useRef)(),p=s;return(0,r.useEffect)((function(){var e=function(e){if(f.current){if(f.current=!1,!d.current)return;var n=d.current.width/2,r=d.current.height/2,i=d.current.x+n,o=d.current.y+r,l=Math.abs(e.clientX-i),u=Math.abs(e.clientY-o);l<n+a&&u<r+a&&t()}};return document.addEventListener("mouseup",e),function(){document.removeEventListener("mouseup",e)}}),[t,a]),(0,i.jsx)(l,{onMouseDown:function(e){f.current=!0,d.current=e.target.getBoundingClientRect(),null==n||n(e)},...p})}},28500:function(e,t,n){n.d(t,{w:function(){return s}});n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850),n(71372);var r=n(75234),i=n(10280),o=n(2784),a=n(52322);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){var t=e.delay,n=void 0===t?0:t,u=e.loadingText,c=(0,r.$G)().t,s=l((0,o.useState)(!1),2),f=s[0],d=s[1];return(0,o.useEffect)((function(){var e=window.setTimeout((function(){d(!0)}),n);return function(){window.clearTimeout(e)}}),[n]),f?(0,a.jsxs)("div",{className:"loading",children:[(0,a.jsx)(i.Z,{type:"refresh",fw:!0,spin:!0}),"",u||c("loading"),""]}):null}function s(e){var t=e.delay,n=void 0===t?0:t,r=e.minHeight,i=e.loadingText;return(0,a.jsx)("div",{className:"full-size-loading-spinner-container",style:{minHeight:r},children:(0,a.jsx)(c,{loadingText:i,delay:n})})}t.Z=c},84050:function(e,t,n){n.d(t,{KU:function(){return v},_i:function(){return g}});n(26936),n(18178),n(16781),n(71372),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(27233),n(77950),n(21850);var r=n(2784),i=n(37246),o=n(73091),a=n(96931),l=n(72526),u=n(99834),c=n(99618),s=n(63290),f=n(2982),d=n(52322);function p(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=(0,r.createContext)(void 0),v=function(e){var t=e.children,n=(0,a.IM)(),h=(0,s.SE)().id,y=(0,u.JY)().role,v=(0,l.d)(),g=v.owner,j=v.features,x=v._id,w=(0,r.useMemo)((function(){return window.brandVariation&&{logoImgUrl:window.brandVariation.logo_url,brandVariationName:window.brandVariation.name,brandVariationId:window.brandVariation.id,brandId:window.brandVariation.brand_id,brandVariationHomeUrl:window.brandVariation.home_url,publishGuideHtml:window.brandVariation.publish_guide_html,partner:window.brandVariation.partner,brandedMenu:window.brandVariation.branded_menu,submitBtnHtml:window.brandVariation.submit_button_html}}),[]),S=m((0,i.Z)("state.loading"),1)[0],E=m((0,i.Z)("project.name"),2),C=E[0],I=E[1],k=m((0,i.Z)("permissionsLevel"),2),A=k[0],O=k[1],T=m((0,r.useState)(!1),2),R=T[0],Z=T[1],N=m((0,i.Z)("editor.showSymbolPalette"),1)[0],P=m((0,i.Z)("editor.toggleSymbolPalette"),1)[0],F=m((0,r.useState)((function(){return(0,c.Z)("ol-inactiveTutorials",[])})),2),L=F[0],M=F[1],D=m((0,r.useState)(""),2),_=D[0],B=D[1],H=m((0,r.useState)(null),2),z=H[0],U=H[1],J=(0,r.useCallback)((function(e){M([].concat(p(L),[e]))}),[L]);(0,r.useEffect)((function(){if(null!=n&&n.socket)return n.socket.on("projectNameUpdated",I),function(){return n.socket.removeListener("projectNameUpdated",I)}}),[null==n?void 0:n.socket,I]);var G=(0,r.useCallback)((function(e){I((function(t){return t!==e&&(0,f.W)(x,{name:e}).catch((function(e){I(t);var r=e.data;return 400===e.status?n.showGenericMessageModal("Error renaming project",r):n.showGenericMessageModal("Error renaming project","Please try again in a moment")})),e}))}),[n,I,x]),q=(0,o.Z)().setTitle;(0,r.useEffect)((function(){var e=[];"detached"===y&&e.push("[PDF]"),C&&(e.push(C),e.push("-")),e.push("Online LaTeX Editor"),e.push(window.ExposedSettings.appName);var t=e.join(" ");q(t)}),[C,q,y]);var X=(0,r.useCallback)((function(e){window.dispatchEvent(new CustomEvent("editor:insert-symbol",{detail:e}))}),[]),V=(0,r.useMemo)((function(){return{cobranding:w,hasPremiumCompile:"priority"===(null==j?void 0:j.compileGroup),loading:S,renameProject:G,permissionsLevel:R?"readOnly":A,setPermissionsLevel:O,isProjectOwner:(null==g?void 0:g._id)===h,isRestrictedTokenMember:(0,c.Z)("ol-isRestrictedTokenMember"),showSymbolPalette:N,toggleSymbolPalette:P,insertSymbol:X,inactiveTutorials:L,deactivateTutorial:J,currentPopup:z,setCurrentPopup:U,writefullAdClicked:_,setWritefullAdClicked:B,setOutOfSync:Z}}),[w,null==j?void 0:j.compileGroup,g,h,S,G,A,O,N,P,X,L,J,z,U,_,B,R,Z]);return(0,d.jsx)(b.Provider,{value:V,children:t})};function g(){var e=(0,r.useContext)(b);if(!e)throw new Error("useEditorContext is only available inside EditorProvider");return e}},47481:function(e,t,n){n.d(t,{O:function(){return b},T:function(){return v}});n(71372),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850);var r=n(2784),i=n(37246),o=n(20681),a=n(53687),l=n(92242),u=n(55108),c=n(32967),s=n(52322);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=(0,r.createContext)(void 0),m=function(e){return e.RENAME="RENAME",e.RESET="RESET",e.DELETE="DELETE",e.MOVE="MOVE",e.CREATE="CREATE",e}(m||{});function h(e,t){var n=e.fileTreeData;switch(t.type){case m.RESET:var r=t.fileTreeData;return{fileTreeData:r,fileCount:(0,a.y)(r)};case m.RENAME:var i=(0,o.Gd)(n,t.id,{newName:t.newName});return{fileTreeData:i,fileCount:(0,a.y)(i)};case m.DELETE:var l=(0,o.xv)(n,t.id);return{fileTreeData:l,fileCount:(0,a.y)(l)};case m.MOVE:var u=(0,o.RB)(n,t.entityId,t.toFolderId);return{fileTreeData:u,fileCount:(0,a.y)(u)};case m.CREATE:var c=(0,o.$O)(n,t.parentFolderId,t.entity);return{fileTreeData:c,fileCount:(0,a.y)(c)};default:throw new Error("Unknown mutable file tree action type: ".concat(t.type))}}var y=function(e){var t=null==e?void 0:e[0];return{fileTreeData:t,fileCount:(0,a.y)(t)}};function b(){var e=(0,r.useContext)(p);if(!e)throw new Error("useFileTreeData is only available inside FileTreeDataProvider");return e}var v=function(e){var t=e.children,n=f((0,i.Z)("project"),1)[0],o=f((0,i.Z)("editor.open_doc_id"),1)[0],a=f((0,c.Z)("editor.open_doc_name"),2)[1],d=(n||{}).rootFolder,b=f((0,r.useReducer)(h,d,y),2),v=b[0],g=v.fileTreeData,j=v.fileCount,x=b[1],w=f((0,r.useState)([]),2),S=w[0],E=w[1],C=(0,r.useMemo)((function(){return g?(0,u.m)(g):void 0}),[g]);(0,l.Z)((function(){x({type:m.RESET,fileTreeData:null==d?void 0:d[0]})}),[d]);var I=(0,r.useCallback)((function(e,t){t.type="folder",x({type:m.CREATE,parentFolderId:e,entity:t})}),[]),k=(0,r.useCallback)((function(e,t){t.type="doc",x({type:m.CREATE,parentFolderId:e,entity:t})}),[]),A=(0,r.useCallback)((function(e,t){t.type="fileRef",x({type:m.CREATE,parentFolderId:e,entity:t})}),[]),O=(0,r.useCallback)((function(e,t){x({type:m.RENAME,newName:t,id:e}),e===o&&a(t)}),[o,a]),T=(0,r.useCallback)((function(e){x({type:m.DELETE,id:e})}),[]),R=(0,r.useCallback)((function(e,t){x({type:m.MOVE,entityId:e,toFolderId:t})}),[]),Z=(0,r.useMemo)((function(){return{dispatchCreateDoc:k,dispatchCreateFile:A,dispatchCreateFolder:I,dispatchDelete:T,dispatchMove:R,dispatchRename:O,fileCount:j,fileTreeData:g,hasFolders:(null==g?void 0:g.folders.length)>0,selectedEntities:S,setSelectedEntities:E,docs:C}}),[k,A,I,T,R,O,j,g,S,E,C]);return(0,s.jsx)(p.Provider,{value:Z,children:t})}},39493:function(e,t,n){n.d(t,{aM:function(){return h},l5:function(){return y}});n(71372),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850);var r=n(2784),i=n(37246),o=n(41740),a=n(76066),l=n(99618),u=n(45177),c=n(44466),s=n(52322);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=(0,l.Z)("ol-debugPdfDetach"),m=(0,r.createContext)(void 0);var h=function(e){var t=e.children,n=f((0,i.Z)("ui.view"),2),l=n[0],d=n[1],h=f((0,i.Z)("openFile"),1)[0],y=(0,c.Z)("history:toggle",!0),b=(0,r.useCallback)((function(e){d((function(t){return"history"!==e&&"history"!==t||y(),"editor"===e&&h?"file":e}))}),[d,h,y]),v=f((0,i.Z)("ui.chatOpen"),2),g=v[0],j=v[1],x=f((0,i.Z)("ui.reviewPanelOpen"),2),w=x[0],S=x[1],E=f((0,i.Z)("ui.miniReviewPanelVisible"),2),C=E[0],I=E[1],k=f((0,i.Z)("ui.leftMenuShown"),2),A=k[0],O=k[1],T=f((0,i.Z)("ui.pdfLayout"),2),R=T[0],Z=T[1],N=f((0,i.Z)("ui.loadingStyleSheet"),2),P=N[0],F=N[1],L=(0,r.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"editor";Z(e),b("sideBySide"===e?"editor":t),function(e){a.Z.setItem("pdf.layout","sideBySide"===e?"split":"flat")}(e)}),[Z,b]),M=(0,o.Z)(),D=M.reattach,_=M.detach,B=M.isLinking,H=M.isLinked,z=M.role,U=M.isRedundant,J="sideBySide"===R||"pdf"===l||"detacher"===z;(0,r.useEffect)((function(){p&&u.c.warn("Layout Effect",{detachIsRedundant:U,detachRole:z,detachIsLinking:B,detachIsLinked:H}),"detacher"===z&&(U?L("sideBySide"):(B||H)&&L("flat","editor"))}),[U,z,B,H,L]);var G=(0,r.useMemo)((function(){return{reattach:D,detach:_,detachIsLinked:H,detachRole:z,changeLayout:L,chatIsOpen:g,leftMenuShown:A,pdfLayout:R,pdfPreviewOpen:J,reviewPanelOpen:w,miniReviewPanelVisible:C,loadingStyleSheet:P,setChatIsOpen:j,setLeftMenuShown:O,setPdfLayout:Z,setReviewPanelOpen:S,setMiniReviewPanelVisible:I,setLoadingStyleSheet:F,setView:b,view:l}}),[D,_,H,z,L,g,A,R,J,w,C,P,j,O,Z,S,I,F,b,l]);return(0,s.jsx)(m.Provider,{value:G,children:t})};function y(){var e=(0,r.useContext)(m);if(!e)throw new Error("useLayoutContext is only available inside LayoutProvider");return e}},22276:function(e,t,n){n.d(t,{_8:function(){return l},yW:function(){return u},ye:function(){return c}});n(71372);var r=n(2784),i=n(99618),o=n(52322),a=(0,r.createContext)(void 0),l=function(e){var t=e.children,n=(0,r.useMemo)((function(){return{splitTestVariants:(0,i.Z)("ol-splitTestVariants")||{},splitTestInfo:(0,i.Z)("ol-splitTestInfo")||{}}}),[]);return(0,o.jsx)(a.Provider,{value:n,children:t})};function u(){var e=(0,r.useContext)(a);if(!e)throw new Error("useSplitTestContext is only available within SplitTestProvider");return e}function c(e){return"enabled"===u().splitTestVariants[e]}},70887:function(e,t,n){n.d(t,{K:function(){return i}});var r=n(2784),i=function(e){var t,n=(null===(t=(0,r.useRef)(null)).current&&"BroadcastChannel"in window&&(t.current=new BroadcastChannel("user")),(0,r.useEffect)((function(){return function(){var e;return null===(e=t.current)||void 0===e?void 0:e.close()}}),[]),t.current);(0,r.useEffect)((function(){var t=new AbortController;return null==n||n.addEventListener("message",(function(t){var n=t.data;return e(n)}),{signal:t.signal}),function(){return t.abort()}}),[n,e])}},56556:function(e,t,n){n.d(t,{V:function(){return u}});n(32501),n(58188),n(88233);var r=n(92193),i=100,o=200,a=20,l=360;function u(e,t){if(null==e||"anonymous-user"===e)return i;if(t===e)return o;var n=function(e){var t=(0,r.M)(e),n=parseInt(t.toString().slice(0,8),16)%(l-2*a);return n}(e);return n>o-a&&n<o+a&&(n=(n-=o)+l-a),n}},34097:function(e,t,n){function r(){return!!document.querySelector("grammarly-desktop-integration")}n.d(t,{Z:function(){return r}})},99618:function(e,t,n){n.d(t,{Z:function(){return o}});n(15735),n(79321),n(58188),n(28673),n(6886),n(34769),n(1939),n(43430),n(43450),n(27233),n(26936),n(32501);var r=n(76635),i=n.n(r);function o(e,t){if(window.metaAttributesCache.has(e))return window.metaAttributesCache.get(e);var n=document.head.querySelector('meta[name="'.concat(e,'"]'));if(!n)return t;var r,i=n.content;switch(n.dataset.type){case"boolean":r=n.hasAttribute("content");break;case"json":r=i?JSON.parse(i):void 0;break;default:r=i}return window.metaAttributesCache.set(e,r),r}window.metaAttributesCache=window.metaAttributesCache||new Map,window.data=window.data||{},Array.from(document.querySelectorAll('meta[name^="ol-"]')).map((function(e){return e.name})).sort().forEach((function(e){var t=e.slice("ol-".length);i().set(window,t,o(e)),i().set(window.data,t,o(e))}))}},s={};function f(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,loaded:!1,exports:{}};return c[e].call(n.exports,n,n.exports,f),n.loaded=!0,n.exports}f.m=c,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=function(e){e&&e.d<1&&(e.d=1,e.forEach((function(e){e.r--})),e.forEach((function(e){e.r--?e.r++:e()})))},f.a=function(i,o,a){var l;a&&((l=[]).d=-1);var u,c,s,f=new Set,d=i.exports,p=new Promise((function(e,t){s=t,c=e}));p[t]=d,p[e]=function(e){l&&e(l),f.forEach(e),p.catch((function(){}))},i.exports=p,o((function(i){var o;u=function(i){return i.map((function(i){if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var o=[];o.d=0,i.then((function(e){a[t]=e,r(o)}),(function(e){a[n]=e,r(o)}));var a={};return a[e]=function(e){e(o)},a}}var l={};return l[e]=function(){},l[t]=i,l}))}(i);var a=function(){return u.map((function(e){if(e[n])throw e[n];return e[t]}))},c=new Promise((function(t){(o=function(){t(a)}).r=0;var n=function(e){e!==l&&!f.has(e)&&(f.add(e),e&&!e.d&&(o.r++,e.push(o)))};u.map((function(t){t[e](n)}))}));return o.r?c:a()}),(function(e){e?s(p[n]=e):c(d),r(l)})),l&&l.d<0&&(l.d=0)},i=[],f.O=function(e,t,n,r){if(!t){var o=1/0;for(c=0;c<i.length;c++){t=i[c][0],n=i[c][1],r=i[c][2];for(var a=!0,l=0;l<t.length;l++)(!1&r||o>=r)&&Object.keys(f.O).every((function(e){return f.O[e](t[l])}))?t.splice(l--,1):(a=!1,r<o&&(o=r));if(a){i.splice(c--,1);var u=n();void 0!==u&&(e=u)}}return e}r=r||0;for(var c=i.length;c>0&&i[c-1][2]>r;c--)i[c]=i[c-1];i[c]=[t,n,r]},f.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(t,{a:t}),t},a=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},f.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);f.r(n);var r={};o=o||[null,a({}),a([]),a(a)];for(var i=2&t&&e;"object"==typeof i&&!~o.indexOf(i);i=a(i))Object.getOwnPropertyNames(i).forEach((function(t){r[t]=function(){return e[t]}}));return r.default=function(){return e},f.d(n,r),n},f.d=function(e,t){for(var n in t)f.o(t,n)&&!f.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},f.f={},f.e=function(e){return Promise.all(Object.keys(f.f).reduce((function(t,n){return f.f[n](e,t),t}),[]))},f.u=function(e){return"js/"+({46:"zh-CN-json",123:"ru-json",320:"en-json",395:"tr-json",562:"cm6-theme8",588:"cm6-theme26",809:"cm6-theme1",929:"cm6-theme17",1312:"ja-json",1333:"cm6-theme4",1369:"cm6-theme27",1377:"ko-json",1787:"cm6-theme19",1897:"cm6-theme36",1921:"cm6-theme22",1949:"cm6-theme39",2231:"cm6-theme3",2268:"cm6-theme11",2461:"codemirror-emacs",2671:"nl-json",2834:"cm6-theme18",3340:"pt-json",3359:"cm6-theme6",3506:"cm6-theme9",3552:"cm6-theme32",3778:"cm6-theme0",4288:"cm6-theme16",4412:"cm6-theme31",4507:"no-json",4608:"cm6-theme13",4701:"cm6-theme2",4934:"cm6-theme20",5277:"pdf-js-viewer",5777:"cm6-theme15",5806:"da-json",5848:"cm6-theme12",6108:"cm6-theme5",6144:"cm6-theme35",6817:"it-json",6901:"de-json",6975:"cm6-theme33",7157:"cm6-theme10",7223:"cm6-theme25",7479:"cm6-theme7",7519:"cs-json",7530:"cm6-theme37",7846:"pl-json",7895:"cm6-theme14",8006:"fr-json",8166:"cm6-theme24",8244:"cm6-theme28",8367:"es-json",8671:"fi-json",8812:"cm6-theme23",8863:"cm6-theme34",8895:"cm6-theme30",8967:"cm6-theme38",9190:"cm6-theme29",9192:"cm6-theme21",9303:"sv-json",9516:"codemirror-editor"}[e]||e)+"-"+{46:"c1a620ac2bd3288e980d",50:"9404ec35722e1713d48d",88:"c09bc8987744fd1ebe2d",123:"e6ef7475df23fea6f76f",191:"0b8d58a07f7392cb609b",320:"d586780b604d61a78d37",375:"2d6de94259d91d120a89",395:"7a787505e1b3f3a6124c",551:"906c8c69ae203207c809",562:"1f528507e3cf66b4a3a2",588:"4d6d8c9a0c56f670ad18",809:"f6afc861f6f71dc8a046",838:"12506494f3cf2230491a",915:"652184cf07db17e91778",929:"b3179f416508ddb8e803",1148:"db76b5d5d4b2cc80d01a",1220:"3681130f1b7ce4517a31",1312:"8379767b86c9cac9ba4d",1333:"1ed03e1ac162feb781d8",1365:"1a2b079fffa7a55f2306",1369:"83fb3cbb7deddec367e9",1377:"4cc51f00ffd478793de3",1758:"3c263f02647199cde3bf",1763:"e06b4f633f09c3d78ecd",1787:"77eddc04c3dc45c226ca",1897:"396b52df86a364fa80dc",1921:"c9201aa47642cff4a79d",1949:"657755e5eb289dcecccf",2231:"b0828f37548b7cd9a5e7",2268:"d8c0eac4a234ad18cd79",2385:"d350d9ef6dc573a8914b",2461:"945e1fb1fe15291891a0",2671:"e8af3c2d6d0896f48b41",2834:"3ce23cff17c541f0169b",3148:"74f59966bdaea20c49f1",3229:"0fbf183cbb1b778cf8a8",3261:"dbdbc52ce8c136e503a6",3340:"407e320de11ba29e5645",3359:"1c878b33067a3c96e906",3506:"7e697b05655f5c319a31",3539:"362f40bd24aa6b1c1e3e",3546:"5477ff54ecb0d2bbbf4c",3552:"c11aca6a63c79c02f780",3568:"ce1cc9ac610ce40a6038",3588:"a2832d1c91a827a0a7ad",3621:"46b39172a82aff550894",3778:"846e23fef6e212b77aec",4179:"e130eeb5fe538219d252",4288:"06f87a6cc0c84070cf2a",4412:"073b484afda9b373b3fd",4507:"611e9445ee43c68d2744",4608:"82779acab146d190138a",4701:"0caef38351691c6d968b",4934:"2b655579ac69b618952d",5063:"154fcb093f378b60213f",5277:"458a988a3b31645d1ab6",5303:"ab5ef84dc6a7a2a07ea9",5593:"37ec7e9629e43e283d3a",5777:"d56558c5f17e2a14dfcb",5806:"104b6cf56e19df38f6ee",5848:"3231276d88db380fb420",6071:"f8fe0862cbe1c3ec3620",6108:"ca7f2a550497fe425f46",6144:"5aa1a05537326290c46f",6219:"8e5f703480d328881fc6",6817:"c2b453e7a0b6ddcbe026",6849:"20ec8f5961bdb4d8542d",6901:"70f8fe0df41fab7a6f57",6975:"3d6ce9297448ca9dbee4",7029:"abb144adf23cf3f70af0",7042:"043faf7200096156882e",7157:"31d40809844c4d00b806",7198:"6d35542769ee3e70c6b8",7223:"a3db98b7b9571c6d74ce",7329:"938c74f1aa39fdecbc59",7479:"70186a97c19ade699b6a",7483:"9f8e282987860483d696",7504:"13f7b7fe7ef91fcd7f12",7519:"67ab31f75f4949c8ee37",7530:"37b0e7a0abdee7ca66e8",7544:"d3e42547e781d57bd024",7583:"b5f63e460aa0ce657fa9",7710:"f7a3b6d191f945f02cc9",7733:"9c519e10c512ab2dbb6f",7769:"57ae93e0b56afab7c8ca",7846:"1339a2f799208416de8a",7895:"068f5bcfe8422e85581e",7956:"209e2131aa1fe9c4f25e",7960:"b35aaa1022849737a292",8006:"10f74f3994a6ca8722aa",8166:"b05bba741081d97d6dce",8244:"3e4eae5dc817067c218b",8367:"4074cdb7ac90bccb0474",8404:"a13f0621b828f75c8992",8522:"37b18465e7372422e73e",8671:"9dc28d4ae4e4c11984b9",8812:"f625176b8ee1ab30a1e0",8863:"70e849c3b4934a1e597f",8895:"66f6715df3a63774e9ce",8967:"8d5471ee59a209cff20e",9190:"692a22ec5ef0f93073f2",9192:"7974ac05e98ae4ceb922",9303:"3d125e3eaa70ce454551",9516:"4aa2dffede75a6ab8c9b",9706:"a9889db5a9c2898e09c6",9865:"b7d06147224a051ebdd7"}[e]+".js"},f.miniCssF=function(e){return"stylesheets/"+e+"-"+{1148:"674a60b9694abb4702b7",1220:"e3fdc0daf303563a226a",3621:"3421bafac1aa5f9b670b",4179:"2e73b1394291da3f261a",6219:"e88824631fea5aac4685"}[e]+".css"},f.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),f.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},f.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l={},u="Frontend:",f.l=function(e,t,n,r){if(l[e])l[e].push(t);else{var i,o;if(void 0!==n)for(var a=document.getElementsByTagName("script"),c=0;c<a.length;c++){var s=a[c];if(s.getAttribute("src")==e||s.getAttribute("data-webpack")==u+n){i=s;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,f.nc&&i.setAttribute("nonce",f.nc),i.setAttribute("data-webpack",u+n),i.src=e),l[e]=[t];var d=function(t,n){i.onerror=i.onload=null,clearTimeout(p);var r=l[e];if(delete l[e],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),o&&document.head.appendChild(i)}},f.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},f.p="/",function(){if("undefined"!=typeof document){var e=function(e){return new Promise((function(t,n){var r=f.miniCssF(e),i=f.p+r;if(function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var i=(a=n[r]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(i===e||i===t))return a}var o=document.getElementsByTagName("style");for(r=0;r<o.length;r++){var a;if((i=(a=o[r]).getAttribute("data-href"))===e||i===t)return a}}(r,i))return t();!function(e,t,n,r,i){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=function(n){if(o.onerror=o.onload=null,"load"===n.type)r();else{var a=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.href||t,u=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");u.code="CSS_CHUNK_LOAD_FAILED",u.type=a,u.request=l,o.parentNode&&o.parentNode.removeChild(o),i(u)}},o.href=t,n?n.parentNode.insertBefore(o,n.nextSibling):document.head.appendChild(o)}(e,i,null,t,n)}))},t={1072:0};f.f.miniCss=function(n,r){t[n]?r.push(t[n]):0!==t[n]&&{1148:1,1220:1,3621:1,4179:1,6219:1}[n]&&r.push(t[n]=e(n).then((function(){t[n]=0}),(function(e){throw delete t[n],e})))}}}(),function(){f.b=document.baseURI||self.location.href;var e={1072:0};f.f.j=function(t,n){var r=f.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else if(1148!=t){var i=new Promise((function(n,i){r=e[t]=[n,i]}));n.push(r[2]=i);var o=f.p+f.u(t),a=new Error;f.l(o,(function(n){if(f.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,r[1](a)}}),"chunk-"+t,t)}else e[t]=0},f.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,i,o=n[0],a=n[1],l=n[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(r in a)f.o(a,r)&&(f.m[r]=a[r]);if(l)var c=l(f)}for(t&&t(n);u<o.length;u++)i=o[u],f.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return f.O(c)},n=self.webpackChunkFrontend=self.webpackChunkFrontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var d=f.O(void 0,[6708,5256,4339,757,3488,2933,427,8815,8126,6840,2697,3433,9672,65,9034,7797,471,8112,4121,1202,3167,511,1875,2392,6146,9556,4511,2217],(function(){return f(45225)}));return d=f.O(d)}()}));